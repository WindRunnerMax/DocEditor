(this["webpackJsonpdoc-editor-react"]=this["webpackJsonpdoc-editor-react"]||[]).push([[4],{0:function(e,t){e.exports=React},17:function(e,t){e.exports=ReactDOM},177:function(e,t,r){},213:function(e,t,r){},214:function(e,t,r){},215:function(e,t,r){},216:function(e,t,r){},217:function(e,t,r){},314:function(e,t,r){},315:function(e,t,r){},316:function(e,t,r){},317:function(e,t,r){},318:function(e,t,r){},319:function(e,t,r){},320:function(e,t,r){},321:function(e,t,r){},322:function(e,t,r){},323:function(e,t,r){},324:function(e,t,r){},325:function(e,t,r){},329:function(e,t,r){},330:function(e,t,r){},331:function(e,t,r){},338:function(e,t,r){},339:function(e,t,r){},340:function(e,t,r){},342:function(e,t,r){},343:function(e,t,r){},344:function(e,t,r){},345:function(e,t,r){},346:function(e,t,r){"use strict";r.r(t),r.d(t,"App",(function(){return Di})),r(177);var n=r(354),i=r(355),o=r(360),s=r(361),a=r(0),l=r.n(a),c=(t=r(17),r.n(t)),d=(r(349),r(82),r(348),r(350),r(135),r(192),r(194),r(196),r(198),r(347),r(205),r(3)),h=r(362),u=r(405);const p={GLOBAL_MOUSE_DOWN:"mousedown",GLOBAL_MOUSE_UP:"mouseup"},b={CONTENT_CHANGE:"CONTENT_CHANGE",SELECTION_CHANGE:"SELECTION_CHANGE",PAINT:"PAINT",MOUNT:"MOUNT",READONLY_CHANGE:"READONLY_CHANGE",COMPOSITION_START:"react_compositionstart",COMPOSITION_UPDATE:"react_compositionupdate",COMPOSITION_END:"react_compositionend",COPY:"react_copy",CUT:"react_cut",PASTE:"react_paste",KEY_DOWN:"react_keydown",KEY_PRESS:"react_keypress",KEY_UP:"react_keyup",FOCUS:"react_focus",BLUR:"react_blur",MOUSE_DOWN:"react_mousedown",MOUSE_UP:"react_mouseup",MOUSE_MOVE:"react_mousemove",DROP:"react_drop",DROP_OVER:"react_dragover",...p};var m=r(49);const v=e=>!d.a.isEditor(e)&&d.b.isElement(e),g=(e,t)=>v(e)&&!!e[t],j=(e,t)=>!!t&&d.a.isBlock(e,t),f=e=>d.h.isText(e),x=(e,t)=>{var{at:t=e.selection,match:r,self:n=!0}=t||{};if(t){var i,o,s=d.a.path(e,t);for([i,o]of d.a.levels(e,{at:s,voids:!1,match:r,reverse:!0}))if(!d.h.isText(i)&&(n||!d.e.equals(s,o)))return{node:i,path:o}}},w=(e,t)=>Object(m.a)(t)&&!t.length||!(e=d.a.parent(e,t))?null:([t,e]=e,{node:t,path:e}),y=(e,t)=>{if(!e)return{};const r=t||[],n=(r.push("children"),{});return Object.keys(e).filter((e=>-1===r.indexOf(e))).forEach((t=>n[t]=e[t])),n};class O{constructor(e){this.editor=e}get raw(){return this.editor.raw}get do(){return this.editor.do}get event(){return this.editor.event}get state(){return this.editor.state}get track(){return this.editor.track}get schema(){return this.editor.schema}get reflex(){return this.editor.reflex}get logger(){return this.editor.logger}get command(){return this.editor.command}get clipboard(){return this.editor.clipboard}get selection(){return this.editor.selection}get plugin(){return this.editor.plugin}}const k="BLOCK",N="INLINE",E="serialize",C="deserialize",M="normalize",D="willSetToClipboard",S="willApplyPasteNodes",L="text/html",B="data-line";t=r(363);const T="Backspace",A="Enter",P=" ",_="Tab",I="mouseup",z="mousemove",K="mousedown",F="copy",U="selectionchange";t={...t.a,B:66,I:73,K:75,U:85};const V=100,H=e=>{if(e instanceof Text)return e.textContent||"";const t=[];return e.childNodes.forEach((e=>{t.push(H(e))})),e instanceof Element&&e.getAttribute(B)&&t.push("\n"),t.join("")};class R extends O{constructor(){super(...arguments),this.onCopy=e=>{if(e.preventDefault(),e.stopPropagation(),e=this.editor.selection.get()){var t=this.reflex.getClosestBlockTuple(e),r=[];if(e.isCollapsed)t&&this.reflex.isVoidNode(t.node)&&r.push(t.node);else{let e=this.raw.getFragment();for(;e.length&&1===e.length&&(1!==(e=e[0].children||[]).length||!f(e[0])););r.push(...e)}r.length&&(this.copy(r),this.selection.focus(),this.selection.set(e))}},this.onCut=e=>{e.preventDefault(),e.stopPropagation();var t=this.editor.selection.get();t&&(this.onCopy(e),t.isCollapsed?(e=this.reflex.getClosestBlockTuple(t))&&this.reflex.isVoidNode(e.node)&&this.do.delete(e.path):this.do.delete(t),this.selection.focus())}}copy(e){e={node:e={children:e},html:this.serialize(e)};var t=(this.plugin.call(D,e),(e=>{const t=[];return Array.from(e.childNodes).forEach((e=>{t.push(H(e))})),t.join("").slice(0,-1)})(e.html));i=e.html,(n=document.createElement("div")).appendChild(i);var r,n,i={"text/plain":t,"text/html":n.innerHTML,"application/x-doc-editor":JSON.stringify(e.node.children)};this.logger.info("Set Clipboard Data:",i),r=i,n=e=>{for(var[t,n]of(e.preventDefault(),e.stopImmediatePropagation(),Object.entries(r)))e.clipboardData&&e.clipboardData.setData(t,n)},(t=document.createElement("textarea")).addEventListener(F,n,!0),t.style.position="fixed",t.style.left="-999999999px",t.style.top="-999999999px",t.value=" ",document.body.appendChild(t),t.select(),document.execCommand(F),t.removeEventListener(F,n),document.body.removeChild(t)}serialize(e,t){if(t=t||document.createDocumentFragment(),this.reflex.isTextBlock(e)){const i=document.createDocumentFragment();e.children.forEach((e=>{var t=e.text||"";e={node:e,html:document.createTextNode(t)};this.plugin.call(E,e,N),i.appendChild(e.html)}));var r={node:e,html:i},n=(this.plugin.call(E,r,k),document.createElement("div"));n.setAttribute(B,"true"),n.appendChild(r.html),t.appendChild(n)}else if(this.reflex.isBlock(e)){const n=document.createDocumentFragment();e.children.forEach((e=>this.serialize(e,n))),r={node:e,html:n},this.plugin.call(E,r,k),t.appendChild(r.html)}return t}}var W=r(127);const G="IS_MOUSE_DOWN",q="READ_ONLY";var Y=globalThis.Node;globalThis.Text,globalThis.Element;const X=e=>e instanceof Node,J=e=>X(e)&&e instanceof HTMLElement;class Z extends O{constructor(){super(...arguments),this.onPaste=e=>{var t,r,n,i;if(e.preventDefault(),e.stopPropagation(),(e=e.clipboardData)&&!this.state.get(q))return i=Array.from(e.files),n=e.getData("application/x-doc-editor"),t=e.getData(L),r=e.getData("text/plain"),this.logger.info("Paste Clipboard Data:",{files:i,"application/x-doc-editor":n,"text/html":t,"text/plain":r}),n?(n=W.a.parse(n))&&this.applyNodes(n):i.length?this.processFiles(i):t?(n=(new DOMParser).parseFromString(t,L)).body&&n.body.hasChildNodes()?(i=this.deserialize(n.body),this.applyNodes(i)):void 0:r?this.processPlainText(e):void 0},this.processPlainText=e=>{this.raw.insertTextData(e)},this.processFiles=e=>{e={html:document.createDocumentFragment(),nodes:[],files:e},this.plugin.call(C,e),this.applyNodes(e.nodes)}}deserialize(e){var t=[];if(0===e.childNodes.length){if(X(r=e)&&r.nodeType===Y.TEXT_NODE){var r=e.textContent||"";t.push({text:r})}else{const r={nodes:t,html:e};this.plugin.call(C,r)}return t}for(const o of Array.from(e.childNodes)){var n=this.deserialize(o);n.length&&t.push(...n)}const i={nodes:t,html:e};return this.plugin.call(C,i),i.nodes}applyNodes(e){e={nodes:e},this.plugin.call(S,e),this.logger.info("Editor Will Apply:",e.nodes);try{this.raw.insertFragment(e.nodes)}catch(t){this.logger.error("Editor InsertFragment Error:",t,e.nodes)}}}class Q{constructor(e){this.editor=e,this.copyModule=void 0,this.pasteModule=void 0,this.copyModule=new R(e),this.pasteModule=new Z(e),e.event.on(b.COPY,this.copyModule.onCopy),e.event.on(b.CUT,this.copyModule.onCut),e.event.on(b.PASTE,this.pasteModule.onPaste)}destroy(){this.editor.event.off(b.COPY,this.copyModule.onCopy),this.editor.event.off(b.CUT,this.copyModule.onCut),this.editor.event.off(b.PASTE,this.pasteModule.onPaste)}copyNode(e){this.copyModule.copy(e)}}class ${constructor(e){this.editor=e,this.commands={},this.register=(e,t)=>{this.commands[e]=t},this.exec=(e,t)=>this.commands[e]&&this.commands[e](t),this.destroy=()=>{this.commands={}}}get(){return this.commands}}class ee extends O{delete(e){d.i.delete(this.raw,{at:e})}}class te{constructor(){this.listeners={}}on(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:V;this.addEventListener(e,t,r,!1)}once(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:V;this.addEventListener(e,t,r,!0)}addEventListener(e,t,r,n){var i=this.listeners[e]||[];i.some((e=>e.listener===t))||i.push({listener:t,priority:r,once:n}),i.sort(((e,t)=>e.priority-t.priority)),this.listeners[e]=i}off(e,t){var r=this.listeners[e];r&&(r=r.filter((e=>e.listener!==t)),this.listeners[e]=r)}trigger(e,t){var r=this.listeners[e];if(!r)return!1;const n={key:e,stopped:!1,prevented:!1,stop:()=>{n.stopped=!0},prevent:()=>{n.prevented=!0}};for(const i of r)if(i.listener(t,n),i.once&&this.off(e,i.listener),n.stopped)break;return n.prevented}clear(){this.listeners={}}}class re{constructor(e,t){this.editor=e,this.bus=t,this.onMouseDown=e=>{this.editor.state.set(G,!0),this.bus.trigger(p.GLOBAL_MOUSE_DOWN,e)},this.onMouseUp=e=>{this.editor.state.set(G,!1),this.bus.trigger(p.GLOBAL_MOUSE_UP,e)},document.addEventListener(p.GLOBAL_MOUSE_DOWN,this.onMouseDown),document.addEventListener(p.GLOBAL_MOUSE_UP,this.onMouseUp)}destroy(){document.removeEventListener(p.GLOBAL_MOUSE_UP,this.onMouseUp),document.removeEventListener(p.GLOBAL_MOUSE_DOWN,this.onMouseDown)}}class ne{constructor(e){this.editor=e,this.bus=void 0,this.nativeEvent=void 0,this.initEditorEvent=()=>{var e=this.editor.raw;const t=e.apply;e.apply=e=>{"set_selection"===e.type?this.editor.event.trigger(b.SELECTION_CHANGE,{previous:e.properties,current:e.newProperties}):this.editor.event.trigger(b.CONTENT_CHANGE,{change:e}),t(e)}},this.on=(e,t,r)=>this.bus.on(e,t,r),this.once=(e,t,r)=>this.bus.once(e,t,r),this.off=(e,t)=>this.bus.off(e,t),this.trigger=(e,t)=>this.bus.trigger(e,t),this.destroy=()=>{this.bus.clear(),this.nativeEvent.destroy()},this.bus=new te,this.nativeEvent=new re(e,this.bus),this.initEditorEvent()}}const ie=-1,oe=0,se=1,ae=2;class le{constructor(e){this.level=e}set(e){this.level=e}debug(e){if(this.level<=ie){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console.log("DEBUG -",e,...r)}}info(e){if(this.level<=oe){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console.log("Log -",e,...r)}}warning(e){if(this.level<=se){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console.warn("Warning -",e,...r)}}error(e){if(this.level<=ae){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console.error("Error -",e,...r)}}trace(e){if(this.level<=ae){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console.trace("Trace -",e,...r)}}}var ce=r(1);const de=e=>{var{className:t,selectable:r=!0}=e;return Object(ce.jsx)("div",{contentEditable:!1,className:t,style:{userSelect:r?void 0:"none"},children:e.children})};class he{constructor(e){var t=this;this.editor=e,this.blocks=void 0,this.leaves=void 0,this.current=void 0,this.pluginMap=void 0,this.register=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const s of r){var i=s.key,o=t.pluginMap[i];o&&o.destroy&&o.destroy(),t.pluginMap[i]=s}},this.apply=()=>{var e=Object.values(this.pluginMap);const t=[],r=[],n=[];return e.sort(((e,t)=>(t.priority||V)-(e.priority||V))),e.forEach((e=>{e.type===k?(t.push(e),e.WITH_LEAF_PLUGINS&&r.push(...e.WITH_LEAF_PLUGINS)):e.type===N&&r.push(e),e.onCommand&&this.editor.command.register(e.key,e.onCommand),e.onDecorate&&n.push(e)})),this.blocks=t,this.leaves=r,this.current=e,{renderBlock:e=>{var r=e,n=t,i={props:r,style:{},stop:!1,plain:!1,classList:[],element:r.element,children:r.children};for(const t of n)if(t.match(r)&&t.render){i.children=Object(ce.jsxs)(l.a.Fragment,{children:[r.children,Object(ce.jsx)(de,{children:t.render(i)})]});break}for(let t=n.length-1;0<=t;t--){var o=n[t];if(o.match(r)&&o.renderLine&&(i.children=o.renderLine(i)),i.stop)break;if(i.plain)return i.children}return Object(ce.jsx)("div",{...r.attributes,className:i.classList.join(" "),style:i.style,children:i.children})},renderLeaf:e=>{var t=e,n=(e=r,{props:t,style:{},element:t.text,leaf:t.leaf,classList:[],children:t.children});for(const r of e)r.match(t)&&r.render&&(n.children=r.render(n));return Object(ce.jsx)("span",{...t.attributes,className:n.classList.join(" "),style:n.style,children:n.children})},decorate:e=>{var t,r=e,i=(e=n,[]);for(const n of e)n.onDecorate&&(t=n.onDecorate(r))&&i.push(...t);return i}}},this.reset=()=>{Object.values(this.pluginMap).forEach((e=>e.destroy&&e.destroy())),this.pluginMap={}},this.destroy=()=>{this.reset()},this.pluginMap={},this.current=[],this.blocks=[],this.leaves=[]}call(e,t,r){for(const n of r===k?this.blocks:r===N?this.leaves:this.current)try{n[e]&&Object(m.c)(n[e])&&n[e](t)}catch(e){this.editor.logger.warning("Plugin ".concat(n," Exec Error"),e)}return t}}function ue(e){const{at:t,key:r,above:n}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};var i,o=d.a.above(e,{match:t=>d.a.isBlock(e,t)&&(!r||g(t,r)),at:t,mode:n?"highest":"lowest"});return o?([o,i]=o,{block:o,path:i}):null}const pe=(e,r)=>{try{return u.b.findPath(e,r)}catch(t){for(var n=[{path:[],node:e}];n.length;){var i=n.pop();if(i&&i.node&&Array.isArray(i.node.children))for(var[o,s]of i.node.children.entries()){if(s===r)return[...i.path,o];n.push({path:[...i.path,o],node:s})}}return null}},be=(e,t)=>{for(var r=[...d.a.path(e,t)];r.length;){var n=d.a.node(e,r);if(n&&d.a.isBlock(e,n[0]))return r;r.pop()}return null},me=(e,t,r)=>r<=0||!(r=(t=[...d.a.path(e,t)].slice(0,-r)).length&&d.a.node(e,t))||!r[0]?null:{node:r[0],path:r[1]},ve=(e,t,r,n)=>{var[t,...i]=t.split(".");if(!(e=ue(e,{at:n,key:t})))return!1;let o=e.block[t];for(let s=0,a=i.length;s<a;++s){if(!Object(m.f)(o))return!1;o=o[i[s]]}return!!Object(m.b)(r)||o===r};function ge(e){return!(e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e.selection)||d.g.isCollapsed(e)}function je(e){e=e.key;for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return-1<r.indexOf(e)}const fe=(e,t)=>(t=d.a.start(e,t),ge(e,e.selection)&&d.f.equals(t,e.selection.anchor)),xe=(e,t)=>!!j(e,t)&&(e=t.children[0])&&f(e);function we(e,t,r){t=1<arguments.length&&void 0!==t?t:"last",r=2<arguments.length?r:void 0;var{at:n,wrapKey:i,itemKey:o}=r,i=r.wrapNode||ue(e,{at:n,key:i});r=r.itemNode||ue(e,{at:n,key:o});if(i&&r&&i.block.children.length)return e=i.block.children,"last"===t?e[e.length-1]===r.block:"first"===t?e[0]===r.block:e[0]===r.block||e[e.length-1]===r.block}const ye=(e,t,r,n)=>{var i,o;return!(!(n=n||e.selection)||(o=(o=d.a.node(e,n))&&o[0],i=(n=w(e,n))&&n.node,!(j(e,o)&&j(e,i)?o[r]&&i[t]:(n=(o=n&&w(e,n.path))&&o.node,j(e,i)&&j(e,n)&&i[r]&&n[t]))))};class Oe extends class extends class{constructor(e){this.editor=e,this.raw=void 0,this.raw=e.raw}isBlock(e){return!!e&&j(this.raw,e)}isText(e){return!!e&&f(e)}isTextBlock(e){return!!this.isBlock(e)&&xe(this.raw,e)}isBlockNode(e){return Object.keys(e).some((e=>this.editor.schema.block.has(e)))}isWrapNode(e){return Object.keys(e).some((e=>this.editor.schema.wrap.has(e)))}isPairNode(e){return Object.keys(e).some((e=>this.editor.schema.pair.has(e)))}isVoidNode(e){return Object.keys(e).some((e=>this.editor.schema.void.has(e)))}isInstanceNode(e){return e===this.raw||Object.keys(e).some((e=>this.editor.schema.instance.has(e)))}isMatchAboveBlockNode(e,t){if(t=t||this.raw.selection)for(var r=[...d.a.path(this.raw,t)];r.length;){var n;if(!(n=d.a.node(this.raw,r)))return!1;var[n]=n;if(this.isInstanceNode(n))return!1;if(d.a.isBlock(this.raw,n)&&n[e])return!0;r.pop()}return!1}}{getNodeTuple(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;try{return 0===r?(t=d.a.node(this.raw,e))&&t[0]?{node:t[0],path:t[1]}:null:me(this.raw,e,r)}catch(e){return this.editor.logger.error("GetNodeTuple Error",e),null}}getClosestBlockTuple(e){for(var t=[...d.a.path(this.raw,e)];t.length;){var r=this.getNodeTuple(t,0);if(!r)return null;if(this.isInstanceNode(r.node))return null;if(r&&this.isBlock(r.node))return r;t.pop()}return null}getClosestMatchBlockTuple(e,t){if(t=t||this.raw.selection)for(var r=[...d.a.path(this.raw,t)];r.length;){var n;if(!(n=d.a.node(this.raw,r)))return null;var[n,i]=n;if(this.isInstanceNode(n))return null;if(d.a.isBlock(this.raw,n)&&n[e])return{node:n,path:i};r.pop()}return null}}{}function ke(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};let n=r.node;const{at:i,key:o}=r;n||(r=x(e,{at:i,match:t=>j(e,t)&&(!o||g(t,o))}))&&r.node&&(n=r.node),n&&d.i.unsetNodes(e,t,{match:e=>e===n,at:i})}function Ne(e,t){const{at:r,node:n}=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};n?d.i.setNodes(e,t,{match:e=>e===n,split:!0,at:r}):d.i.setNodes(e,t,{match:f,split:!0,at:r})}function Ee(e,t){const{at:r,node:n}=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};n?d.i.unsetNodes(e,t,{match:e=>e===n,at:r}):d.i.unsetNodes(e,t,{match:f,split:!0,at:r})}function Ce(e,t,r){const n=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).at;d.a.withoutNormalizing(e,(()=>{Me(e,t,{at:n}),d.i.wrapNodes(e,r,{match:f,at:n})}))}const Me=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};let n=r.node;const{at:i,key:o}=r;n||(r=x(e,{at:i,match:t=>j(e,t)&&(!o||g(t,o))}))&&r.node&&(n=r.node),n&&d.i.setNodes(e,t,{match:e=>e===n,at:i})},De=(e,t)=>{const{at:r,wrapKey:n,pairKey:i}=t,o=x(e,{match:e=>g(e,n),at:r}),s=x(e,{match:e=>g(e,i),at:r});if(o&&s){const t=y(o.node,[n]);d.a.withoutNormalizing(e,(()=>{d.i.setNodes(e,t,{at:s.path}),d.i.unsetNodes(e,[i],{at:s.path}),d.i.unwrapNodes(e,{match:(e,t)=>d.e.equals(t,o.path),split:!0,at:s.path})}))}};class Se{constructor(){this.wrap=new Map,this.pair=new Map,this.void=new Set,this.block=new Set,this.inline=new Set,this.instance=new Set}normalize(e,t){try{d.a.withoutNormalizing(e,(()=>{this.normalizeEmptyEditor(e,t[0]),this.normalizeBlockNode(e,t)}))}catch(e){console.error("Normalize Error: ",e)}}normalizeBlockNode(e,t){var[t,r]=t;j(e,t)&&(this.normalizeWrapNode(e,t,r),this.normalizePairNode(e,t,r),this.normalizeInstanceNode(e,t,r))}normalizeWrapNode(e,t,r){for(const n of Object.keys(t))if(this.wrap.has(n)){const i=this.wrap.get(n);(t.children||[]).forEach(((o,s)=>{if(j(e,o)&&!o[i]){o=[...r,s];{var a=e;const{wrapNode:r,pairPath:s,wrapKey:l,pairKey:c}={wrapKey:n,pairKey:i,wrapNode:t,pairPath:o},h=y(r,[l]);d.a.withoutNormalizing(a,(()=>{d.i.setNodes(a,h,{at:s}),d.i.unsetNodes(a,[c],{at:s}),d.i.unwrapNodes(a,{split:!0,at:s})}))}}}))}}normalizePairNode(e,t,r){for(const o of Object.keys(t)){var n,i;this.pair.has(o)&&(n=this.pair.get(o),(i=(i=d.a.parent(e,r))&&i[0])&&j(e,i)&&i[n]||ke(e,[o],{node:t}))}}normalizeInstanceNode(e,t,r){for(const n of Object.keys(t))this.instance.has(n)&&(t.children||[]).forEach(((t,n)=>{f(t)&&(t=[...r,n],d.i.wrapNodes(e,{children:[]},{at:t}))}))}normalizeEmptyEditor(e,t){t===e&&0===e.children.length&&d.i.insertNodes(e,{children:[{text:""}]},{at:[0],select:!0})}}class Le extends Se{constructor(e,t){for(var[r,n]of(super(),this.editor=void 0,this.raw=void 0,this.raw=e,this.editor=t,Object.entries(e)))n.void&&(this.void.add(r),this.block.add(r)),n.block&&this.block.add(r),n.wrap&&(this.block.add(n.wrap),this.wrap.set(n.wrap,r),this.pair.set(r,n.wrap)),n.instance&&this.instance.add(r)}with(e){const{isVoid:t,normalizeNode:r,isInline:n,deleteBackward:i}=e;return e.isInline=e=>{for(const t of Object.keys(e))if(this.inline.has(t))return!0;return n(e)},e.isVoid=e=>{for(const t of Object.keys(e))if(this.void.has(t))return!0;return t(e)},e.normalizeNode=t=>{var[n]=t;this.normalizeEmptyEditor(e,n),j(e,n)&&(this.normalize(e,t),this.editor.plugin)&&this.editor.plugin.call(M,t,k),r(t)},e.deleteBackward=t=>{var r,n=e.selection;if(n&&d.g.isCollapsed(n)&&((r=me(e,n.anchor.path,2))&&j(e,r.node))){var{node:r,path:o}=r;for(const t of Object.keys(r))if(this.instance.has(t)){var s=d.a.start(e,o);if(d.f.equals(n.anchor,s))return}}i(t)},e}}class Be{constructor(e){this.editor=e,this.raw=void 0,this.raw=this.editor.raw}get(){var e=this.raw.selection;return e?{anchor:e.anchor,focus:e.focus,isCollapsed:d.g.isCollapsed(e),isBackward:d.g.isBackward(e)}:null}set(e){e?d.i.select(this.raw,e):this.raw.selection&&this.raw.apply({type:"set_selection",properties:this.raw.selection,newProperties:null})}getFocusPath(){var e=this.raw.selection;return e?e.focus.path:null}focus(){u.b.focus(this.raw)}isFocused(){return u.b.isFocused(this.raw)}move(e){d.i.move(this.raw,{unit:"character",distance:e})}}class Te{constructor(e){this.editor=e,this.raw=void 0,this._state=void 0,this.destroy=()=>{this._state={}},this._state={},this.raw=e.raw}get(e){return!!this._state[e]}set(e,t){this._state[e]=t}apply(e){this.raw.apply(e)}setContent(e){this.editor.track.clear(),this.raw.children=e,this.editor.selection.set(d.a.start(this.raw,[])),this.editor.selection.focus()}}class Ae{constructor(e){this.editor=e,this.raw=void 0,this.isBatching=void 0,this.batchFlat=void 0,this.raw=e.raw,this.batchFlat=[],this.isBatching=!1,this.editor.options.history&&this.editor.event.on(b.CONTENT_CHANGE,this.onApply)}destroy(){this.batchFlat=[],this.editor.event.off(b.CONTENT_CHANGE,this.onApply)}onApply(e){this.isBatching&&this.batchFlat.push(e.change)}startup(){this.isBatching=!0}shutdown(){this.isBatching=!1,0!==this.batchFlat.length&&(this.raw.history.undos.push([...this.batchFlat]),this.batchFlat=[])}batch(e){this.editor.options.history&&(this.isBatching=!0,d.a.withoutNormalizing(this.raw,(()=>{h.a.withoutSaving(this.raw,e)})),this.isBatching=!1,0!==this.batchFlat.length)&&(this.raw.history.undos.push([...this.batchFlat]),this.batchFlat=[])}undo(){this.editor.options.history&&this.raw.undo()}redo(){this.editor.options.history&&this.raw.redo()}canUndo(){return 0<this.raw.history.undos.length}canRedo(){return 0<this.raw.history.redos.length}clear(){this.editor.options.history&&(this.raw.history.undos.length=0,this.raw.history.redos.length=0)}}const Pe=[{children:[{text:""}]}],_e={history:!0};class Ie{constructor(e,t){this.raw=void 0,this.options=void 0,this.do=void 0,this.event=void 0,this.state=void 0,this.track=void 0,this.schema=void 0,this.reflex=void 0,this.logger=void 0,this.command=void 0,this.clipboard=void 0,this.selection=void 0,this.plugin=void 0;var r=Object(u.g)(Object(d.j)());e=new Le(e,this);this.options={..._e,...t},this.raw=e.with(this.options.history?Object(h.b)(r):r),this.schema=e,this.logger=new le(ae),this.reflex=new Oe(this),this.do=new ee(this),this.state=new Te(this),this.event=new ne(this),this.clipboard=new Q(this),this.track=new Ae(this),this.selection=new Be(this),this.command=new $(this),this.plugin=new he(this)}destroy(){this.command.destroy(),this.clipboard.destroy(),this.plugin.destroy(),this.track.destroy(),this.state.destroy(),this.event.destroy()}}const ze=e=>{const{editor:t,children:r}=e,n=Object(a.useRef)(!0);return Object(u.f)(),Object(a.useEffect)((()=>{const e=()=>{n.current=!0};return t.event.on(b.CONTENT_CHANGE,e,1),()=>{t.event.off(b.CONTENT_CHANGE,e)}}),[t]),Object(a.useEffect)((()=>{n.current&&Promise.resolve().then((()=>{t.event.trigger(b.PAINT,{})})),n.current=!1})),r};class Ke extends l.a.PureComponent{constructor(e){super(e),this.onKeyDown=e=>{e.nativeEvent.isComposing||this.props.editor.event.trigger(b.KEY_DOWN,e)},this.onKeyPress=e=>{this.props.editor.event.trigger(b.KEY_PRESS,e)},this.onMouseDown=e=>{this.props.editor.event.trigger(b.MOUSE_DOWN,e)},this.onMouseUp=e=>{this.props.editor.event.trigger(b.MOUSE_UP,e)},this.onCopy=e=>{this.props.editor.event.trigger(b.COPY,e)},this.onCut=e=>{this.props.editor.event.trigger(b.CUT,e)},this.onPaste=e=>{this.props.editor.event.trigger(b.PASTE,e)},this.onFocus=e=>{this.props.editor.event.trigger(b.FOCUS,e)},this.onBlur=e=>{this.props.editor.event.trigger(b.BLUR,e)},e.editor.state.set(q,!!e.readonly),this.state={renderModule:this.props.editor.plugin.apply()}}componentDidUpdate(e){e.readonly!==this.props.readonly&&(this.props.editor.state.set(q,!!this.props.readonly),this.setState({renderModule:this.props.editor.plugin.apply()})),e.editor!==this.props.editor&&(e.editor.destroy(),this.props.editor.logger.warning("Editor\u5b9e\u4f8b\u91cd\u5efa \u8bf7\u68c0\u67e5\u7f16\u8f91\u5668\u72b6\u6001"))}render(){return Object(ce.jsx)(u.c,{editor:this.props.editor.raw,value:this.props.init||this.props.editor.options.init||Pe,onChange:this.props.onChange,children:Object(ce.jsx)(ze,{editor:this.props.editor,children:Object(ce.jsx)(u.a,{decorate:this.state.renderModule.decorate,renderElement:this.state.renderModule.renderBlock,renderLeaf:this.state.renderModule.renderLeaf,readOnly:this.props.readonly,placeholder:this.props.placeholder,onKeyDown:this.onKeyDown,onKeyPress:this.onKeyPress,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onCopy:this.onCopy,onCut:this.onCut,onPaste:this.onPaste,onFocus:this.onFocus,onBlur:this.onBlur})})})}}r(213);class Fe{constructor(){this.key=void 0,this.type=void 0,this.priority=void 0,this.onCommand=void 0}}class Ue extends Fe{constructor(){super(...arguments),this.type=k,this.WITH_LEAF_PLUGINS=void 0}}class Ve extends Fe{constructor(){super(...arguments),this.type=N}}const He="paragraph";class Re extends Ue{constructor(e){super(),this.editor=e,this.key=He,this.priority=111,this.onCommand=e=>{var t=this.editor,r=e.element;e=e.path;r&&e&&j(t.raw,r)&&(r=y(r),ke(t.raw,Object.keys(r),{at:e}))}}destroy(){}match(){return!0}renderLine(e){return Object(ce.jsx)("div",{className:"doc-line","data-paragraph":!0,children:e.children})}}var We=r(364);const Ge="heading",qe=["p","div"],Ye=(e,t)=>(e=>X(e)&&e.nodeType===Y.ELEMENT_NODE)(e)&&e.tagName.toLocaleLowerCase()===t.toLocaleLowerCase();class Xe extends Ue{constructor(e){super(),this.editor=e,this.key="clipboard"}destroy(){}match(){return!1}deserialize(e){var t,{nodes:r,html:n}=e;r.every(f)&&(t=n,qe.some((e=>Ye(t,e))))&&(e.nodes=[{children:r}])}willApplyPasteNodes(e){for(var t=[...e.nodes];t.length;){var r=t.shift();r&&(r&&r[Ge]&&(r[Ge]={...r[Ge],id:Object(We.b)(6)}),r.children&&t.push(...r.children),r.children)&&!r.children.length&&r.children.push({text:""})}}}r(214);const Je=(e,t,r)=>{var n=[];for(const c of t)if(f(c)){var i,o,s={children:[c]};for([i,o]of Object.entries(r))s[i]=o;n.push(s)}else{if(xe(e.raw,c))for(var[a,l]of Object.entries(r))c[a]=l;n.push(c)}return n};class Ze extends Ue{constructor(e){super(),this.editor=e,this.key=Ge,this.onCommand=e=>{var t=this.key,r=this.editor;Object(m.f)(e)&&e.path&&(ve(r.raw,"".concat(Ge,".type"),e.extraKey)?ke(r.raw,[Ge],{at:e.path}):Me(r.raw,{[t]:{type:e.extraKey,id:Object(We.b)(8)}},{at:e.path}))},this.onKeyDown=(e,t)=>{const r=this.editor;var n,i,o=r.raw.selection;if(je(e,T,A)&&ge(r.raw,o))return(i=ue(r.raw))?(({block:i,path:n}=i),i[Ge]&&v(i)?(e.key===T&&fe(r.raw,n)&&(ke(r.raw,[Ge],{at:n}),e.preventDefault()),e.key===A&&((e,t)=>(t=d.a.end(e,t),ge(e,e.selection)&&d.f.equals(t,e.selection.anchor)))(r.raw,n)&&(i=y(i,[Ge]),(e=>(e=ue(e))&&2<=e.path.length)(r.raw)?(d.i.insertNodes(r.raw,{...i,children:[{text:" "}]},{at:o.focus,select:!1}),d.i.move(r.raw,{distance:1}),Promise.resolve().then((()=>r.raw.deleteForward("character")))):d.i.insertNodes(r.raw,{...i,children:[{text:""}]}),e.preventDefault()),e.key===A&&fe(r.raw,n)&&(r.raw.insertNode({children:[{text:""}]}),d.i.move(r.raw,{distance:1}),e.preventDefault()),t.stop()):void 0):t.stop()},this.editor.event.on(b.KEY_DOWN,this.onKeyDown)}destroy(){this.editor.event.off(b.KEY_DOWN,this.onKeyDown)}match(e){return!!e.element[Ge]}renderLine(e){var t=e.props.element[Ge];if(!t)return e.children;var r=t.id;switch(t.type){case"h1":return Object(ce.jsx)("h1",{className:"doc-heading",id:r,children:e.children});case"h2":return Object(ce.jsx)("h2",{className:"doc-heading",id:r,children:e.children});case"h3":return Object(ce.jsx)("h3",{className:"doc-heading doc-heading-h3",id:r,children:e.children});default:return e.children}}serialize(e){var t,r=e.node[Ge];r&&(t=r.id,r=r.type,(r=document.createElement(r)).id=t,r.setAttribute("data-type",Ge),r.appendChild(e.html),e.html=r)}deserialize(e){var{nodes:t,html:r}=e;if(J(r)&&(r=r.tagName.toLocaleLowerCase()).startsWith("h")&&2===r.length){let n=Number(r.replace("h",""));(n<=0||3<n)&&(n=3),e.nodes=Je(this.editor,t,{heading:{type:"h".concat(n),id:Object(We.a)()}})}}}const Qe="bold";class $e extends Ve{constructor(e){super(),this.editor=e,this.key=Qe,this.onCommand=e=>{(e=e.marks)&&e[this.key]?Ee(this.editor.raw,[this.key]):Ne(this.editor.raw,{[this.key]:!0})}}destroy(){}match(e){return!!e.leaf[Qe]}serialize(e){var{node:t,html:r}=e;t[Qe]&&((t=document.createElement("strong")).appendChild(r),e.html=t)}deserialize(e){var{nodes:t,html:r}=e;J(r)&&(Ye(r,"strong")||Ye(r,"b")||"bold"===r.style.fontWeight)&&(e.nodes=((e,t)=>{for(var r=[...e];r.length;){var n=r.shift();if(n)if(f(n))for(var[i,o]of Object.entries(t))n[i]=o;else{var s=n.children||[];r.unshift(...s)}}return e})(t,{bold:!0}))}render(e){return Object(ce.jsx)("strong",{children:e.children})}}r(215);const et="quote-block",tt="quote-block-item";class rt extends Ue{constructor(e){super(),this.editor=e,this.key=et,this.onCommand=e=>{var t=this.editor;Object(m.f)(e)&&e.path&&(t.reflex.isMatchAboveBlockNode(et,e.path)?De(t.raw,{at:e.path,wrapKey:et,pairKey:tt}):Ce(t.raw,{"quote-block":!0},{"quote-block-item":!0},{at:e.path}))},this.onKeyDown=(e,t)=>{var r=this.editor;if(je(e,T,A)&&ge(r.raw,r.raw.selection)&&ye(r.raw,et,tt)){var n=ue(r.raw,{key:et}),i=ue(r.raw,{key:tt});if(i&&n)return fe(r.raw,i.path)&&we(r.raw,"or",{wrapNode:n,itemNode:i})&&(De(r.raw,{wrapKey:et,pairKey:tt}),e.preventDefault()),t.stop()}},this.editor.event.on(b.KEY_DOWN,this.onKeyDown)}destroy(){this.editor.event.off(b.KEY_DOWN,this.onKeyDown)}match(e){return!!e.element[et]}renderLine(e){return Object(ce.jsx)("blockquote",{className:"doc-quote-block",children:e.children})}serialize(e){var t;e.node[et]&&((t=document.createElement("blockquote")).setAttribute("data-type",et),t.appendChild(e.html),e.html=t)}deserialize(e){var{nodes:t,html:r}=e;J(r)&&Ye(r,"blockquote")&&(r=Je(this.editor,t,{"quote-block-item":!0}),e.nodes=[{children:r,"quote-block":!0}])}}function nt(e){if(Object(m.b)(e))throw new Error("assert value is empty");return e}r(216),r(217);let it=null;class ot{constructor(e){this.id=void 0,this.container=void 0,this.node=void 0,this.onBeforeCloseFn=void 0,this.mount=e=>{this.node&&c.a.render(e,this.node)},this.onBeforeDestroy=e=>{this.onBeforeCloseFn=e,document.addEventListener(ot.BIND_EVENT_NAME,this.destroy)},this.destroy=()=>{this.onBeforeCloseFn(),document.removeEventListener(ot.BIND_EVENT_NAME,this.destroy),this.node&&this.container&&(c.a.unmountComponentAtNode(this.node),this.container.removeChild(this.node),document.body.removeChild(this.container)),it===this&&(it=null),this.container=this.node=null};var{mutex:e=!0}=e||{};this.id=Object(We.b)(),this.container=document.createElement("div"),this.container.id=this.id,this.container.className="popup-container",this.node=document.createElement("div"),this.node.onmousedown=e=>e.stopPropagation(),this.container.appendChild(this.node),this.node.className="popup-container-node",document.body.appendChild(this.container),e&&(it&&it.destroy(),it=this),this.onBeforeCloseFn=()=>null}}ot.BIND_EVENT_NAME="mousedown";var st=r(400),at=r(172),lt=r(406),ct=r(73),dt=r(71);const ht=e=>{var[t]=Object(dt.a)(),r=Object(m.b)(e.top)?0:e.top+30,n=Object(m.b)(e.left)?0:e.left-150,i=e.top||e.left?"absolute":void 0;return Object(ce.jsx)("div",{className:"hyper-link-menu",style:{left:n,top:r,position:i},children:Object(ce.jsxs)(st.a,{initialValues:e.config,form:t,size:"small",labelCol:{span:7,offset:0},wrapperCol:{span:17,offset:0},labelAlign:"left",onSubmit:t=>e.onConfirm&&e.onConfirm(t),children:[Object(ce.jsx)(st.a.Item,{label:"\u94fe\u63a5\u5730\u5740",field:"href",children:Object(ce.jsx)(at.a,{placeholder:"Enter href"})}),Object(ce.jsxs)(st.a.Item,{className:"hyper-link-menu-row",wrapperCol:{span:24,offset:0},children:[Object(ce.jsx)(st.a.Item,{label:"\u65b0\u9875\u9762\u6253\u5f00",field:"blank",children:Object(ce.jsx)(lt.a,{defaultChecked:e.config.blank})}),Object(ce.jsxs)(st.a.Item,{className:"hyper-link-menu-submit",children:[Object(ce.jsx)(ct.a,{size:"mini",htmlType:"submit",type:"primary",children:"\u786e\u5b9a"}),Object(ce.jsx)(ct.a,{size:"mini",type:"primary",status:"danger",onClick:e.onCancel,children:"\u5220\u9664"})]})]})]})})};var ut=r(44);const pt="link",bt=e=>{const t=e.config,r=e.editor,[n,i]=Object(a.useState)(!1),o=t=>{i(!1);var n=pe(r.raw,e.element);n&&Ne(r.raw,{link:t},{at:n})},s=()=>{i(!1);var t=pe(r.raw,e.element);t&&Ee(r.raw,[pt],{at:t})};return Object(ce.jsx)(ut.b,{popup:()=>Object(ce.jsx)(ht,{config:t,onConfirm:o,onCancel:s}),position:"bottom",trigger:"click",popupVisible:n,onVisibleChange:e=>{(e&&ge(r.raw)||!e)&&i(e)},children:Object(ce.jsx)("span",{className:"hyper-link",onClick:e=>{e.preventDefault()},children:e.children})})};class mt extends Ve{constructor(e,t){super(),this.editor=e,this.readonly=t,this.key=pt,this.popupModel=null,this.onCommand=e=>{const t=this.key,r=this.editor;if(e&&e.position&&e.marks&&!this.popupModel){const n=e.position,i={...e.marks[pt]||{href:"",blank:!0}};return new Promise((e=>{const o=new ot;(this.popupModel=o).onBeforeDestroy((()=>{this.popupModel=null,e()})),o.mount(Object(ce.jsx)(ht,{config:i,left:n.left,top:n.top,onConfirm:e=>{i.href=e.href,i.blank=e.blank,Ne(r.raw,{[t]:i}),o.destroy()},onCancel:()=>{Ee(r.raw,[t]),o.destroy()}}))})).catch((()=>{}))}this.popupModel&&(this.popupModel.destroy(),this.popupModel=null)}}destroy(){}match(e){return!!e.leaf[pt]}render(e){var t=nt(e.props.leaf[pt]);return this.readonly?Object(ce.jsx)("a",{className:"hyper-link",href:t.href,target:t.blank?"_blank":void 0,children:e.children}):Object(ce.jsx)(bt,{config:t,element:e.element,editor:this.editor,children:e.children})}}const vt="under-line";class gt extends Ve{constructor(e){super(),this.editor=e,this.key=vt,this.onCommand=e=>{var t=this.key,r=this.editor;(e=e.marks)&&e[t]?Ee(r.raw,[t]):Ne(r.raw,{[t]:!0})}}destroy(){}match(e){return!!e.leaf[vt]}render(e){return Object(ce.jsx)("u",{children:e.children})}}const jt="strike-through";class ft extends Ve{constructor(e){super(),this.editor=e,this.key=jt,this.onCommand=e=>{var t=this.key,r=this.editor;(e=e.marks)&&e[t]?Ee(r.raw,[t]):Ne(r.raw,{[t]:!0})}}destroy(){}match(e){return!!e.leaf[jt]}render(e){return Object(ce.jsx)("del",{children:e.children})}}const xt="italic";class wt extends Ve{constructor(e){super(),this.editor=e,this.key=xt,this.onCommand=e=>{var t=this.key,r=this.editor;(e=e.marks)&&e[t]?Ee(r.raw,[t]):Ne(r.raw,{[t]:!0})}}destroy(){}match(e){return!!e.leaf[xt]}render(e){return Object(ce.jsx)("em",{children:e.children})}}r(314);const yt="inline-code";class Ot extends Ve{constructor(e){super(),this.editor=e,this.key=yt,this.onCommand=e=>{var t=this.key,r=this.editor;(e=e.marks)&&e[t]?Ee(r.raw,[t]):Ne(r.raw,{[t]:!0})}}destroy(){}match(e){return!!e.leaf[yt]}render(e){return Object(ce.jsx)("code",{className:"slate-inline-code",children:e.children})}}function kt(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e.selection;ge(e,r)&&(r=ue(e,{key:Ct}))&&(({block:r,path:t}=r),Dt(e,r,t))}r(315);const Nt="ordered-list",Et="ordered-list-item",Ct=Nt,Mt=Et,Dt=(e,t,r)=>{const n=[],i={};if(g(t,Ct)){let o=-1;t.children.forEach(((t,s)=>{if(j(e,t)&&(t=t[Mt])){const{level:a,start:l}=t,c=(a>o&&(i[a]=0),o=a,i[a]=(i[a]||0)+1,i[a]);c!==l&&n.push((()=>{Me(e,{[Mt]:{level:a,start:c}},{at:[...r,s]})}))}})),d.a.withoutNormalizing(e,(()=>{n.forEach((e=>e()))}))}},St=e=>{var t;ge(e,e.selection)&&(t=ue(e,{at:e.selection}))&&(t=function(e){const{at:t,key:r,above:n}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};var i,o=d.a.next(e,{match:t=>d.a.isBlock(e,t)&&(!r||g(t,r)),at:t,mode:n?"highest":"lowest"});return o?([o,i]=o,{block:o,path:i}):null}(e,{at:t.path,key:Ct}))&&Dt(e,t.block,t.path)};class Lt extends Ue{constructor(e){super(),this.editor=e,this.key=Nt,this.onCommand=e=>{var t=this.editor;Object(m.f)(e)&&e.path&&(t.reflex.isMatchAboveBlockNode(Nt,e.path)?(De(t.raw,{at:e.path,wrapKey:Nt,pairKey:Et}),St(t.raw)):Ce(t.raw,{"ordered-list":!0},{"ordered-list-item":{start:1,level:1}},{at:e.path}))},this.onKeyDown=(e,t)=>{var r=this.editor;if(je(e,T,A,_)&&ge(r.raw,r.raw.selection)&&ye(r.raw,Nt,Et)){var n=ue(r.raw,{key:Nt}),i=ue(r.raw,{key:Et});if(i&&n){var{level:o,start:s}=nt(i.block[Et]);if(e.key===_)o<3&&Me(r.raw,{"ordered-list-item":{start:s,level:o+1}},{node:i.block}),kt(r.raw),e.preventDefault();else{if(fe(r.raw,i.path)){if(1<o)return Me(r.raw,{"ordered-list-item":{start:s,level:o-1}},{node:i.block}),kt(r.raw),e.preventDefault(),t.stop();if(we(r.raw,"or",{wrapNode:n,itemNode:i}))return De(r.raw,{wrapKey:Nt,pairKey:Et}),St(r.raw),e.preventDefault(),t.stop();if(je(e,T))return r.raw.deleteBackward("block"),kt(r.raw),e.preventDefault(),t.stop()}e.key===A&&(d.i.splitNodes(r.raw,{always:!0}),kt(r.raw),e.preventDefault())}return t.stop()}}},this.editor.event.on(b.KEY_DOWN,this.onKeyDown)}destroy(){this.editor.event.off(b.KEY_DOWN,this.onKeyDown)}match(e){return g(e.element,Nt)||g(e.element,Et)}renderLine(e){var t;return g(e.element,Nt)?Object(ce.jsx)("ol",{className:"doc-ordered-list",children:e.children}):(t=nt(e.element[Et]),Object(ce.jsx)("li",{className:"doc-ordered-item ordered-li-".concat(t.level),value:t.start,children:e.children}))}}r(316);const Bt="unordered-list",Tt="unordered-list-item";class At extends Ue{constructor(e){super(),this.editor=e,this.key=Bt,this.onCommand=e=>{var t=this.editor;Object(m.f)(e)&&e.path&&(t.reflex.isMatchAboveBlockNode(Bt,e.path)?De(t.raw,{at:e.path,wrapKey:Bt,pairKey:Tt}):Ce(t.raw,{"unordered-list":!0},{"unordered-list-item":{level:1}},{at:e.path}))},this.onKeyDown=(e,t)=>{var r=this.editor;if(je(e,T,A,_)&&ge(r.raw,r.raw.selection)&&ye(r.raw,Bt,Tt)){var n,i=ue(r.raw,{key:Bt}),o=ue(r.raw,{key:Tt});if(o&&i)return n=nt(o.block[Tt]).level,e.key===_?(n<3&&Me(r.raw,{"unordered-list-item":{level:n+1}},{node:o.block}),e.preventDefault()):fe(r.raw,o.path)&&(1<n?(Me(r.raw,{"unordered-list-item":{level:n-1}},{node:o.block}),e.preventDefault()):we(r.raw,"or",{wrapNode:i,itemNode:o})&&(De(r.raw,{wrapKey:Bt,pairKey:Tt}),e.preventDefault())),t.stop()}},this.editor.event.on(b.KEY_DOWN,this.onKeyDown)}destroy(){this.editor.event.off(b.KEY_DOWN,this.onKeyDown)}match(e){return g(e.element,Bt)||g(e.element,Tt)}renderLine(e){var t;return g(e.element,Bt)?Object(ce.jsx)("ul",{className:"doc-unordered-list",children:e.children}):(t=nt(e.element[Tt]),Object(ce.jsx)("li",{className:"doc-unordered-item unordered-li-".concat(t.level),children:e.children}))}}r(317);const Pt=()=>{var e=Object(u.e)(),t=Object(u.d)();return Object(ce.jsx)("div",{className:"dividing-line-container",children:Object(ce.jsx)("div",{className:Object(s.a)("dividing-line",t&&e&&"selected")})})},_t="dividing-line";class It extends Ue{constructor(e){super(),this.editor=e,this.key=_t,this.onCommand=()=>{var e=this.key,t=this.editor;d.i.insertNodes(t.raw,{[e]:!0,children:[{text:""}]}),d.i.insertNodes(t.raw,{children:[{text:""}]})}}destroy(){}match(e){return g(e.element,_t)}render(){return Object(ce.jsx)(Pt,{})}}r(318);const zt="align";class Kt extends Ue{constructor(e){super(),this.editor=e,this.key=zt,this.onCommand=e=>{Object(m.f)(e)&&!ve(this.editor.raw,zt,e.extraKey)&&Me(this.editor.raw,{[this.key]:e.extraKey})}}destroy(){}match(e){return!!e.element[zt]}renderLine(e){var t=e.props.element[zt];return t&&"left"!==t&&e.classList.push("align-"+t),e.children}}r(319);var Ft=r(365),Ut=r(366);const Vt=e=>{const t=Object(a.useRef)(e);var r=Object(a.useRef)();return t.current=e,r.current||(r.current=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.current.apply(this,r)}),r.current},Ht="highlight-block",Rt=[{background:"var(--arcoblue-3)",border:"var(--arcoblue-6)"},{background:"var(--green-3)",border:"var(--green-6)"},{background:"var(--orange-3)",border:"var(--orange-6)"},{background:"var(--red-3)",border:"var(--red-6)"},{background:"var(--purple-3)",border:"var(--purple-6)"},{background:"var(--gray-3)",border:"var(--gray-6)"},{background:"var(--magenta-3)",border:"var(--magenta-6)"},{background:"var(--pinkpurple-3)",border:"var(--pinkpurple-6)"},{background:"var(--orangered-3)",border:"var(--orangered-6)"},{background:"var(--cyan-3)",border:"var(--cyan-6)"},{background:"var(--lime-3)",border:"var(--lime-6)"},{background:"var(--gold-3)",border:"var(--gold-6)"}],Wt=e=>{const{editor:t,element:r,config:n,readonly:i}=e,o=Vt((e=>{var n=u.b.findPath(t.raw,r);Me(t.raw,{"highlight-block":Rt[e]},{at:n,key:Ht})})),s=Object(a.useMemo)((()=>Object(ce.jsx)("div",{className:"highlight-block-selector",children:Rt.map(((e,t)=>Object(ce.jsx)("div",{className:"selector-item",onClick:()=>o(t),style:{borderColor:"rgba(".concat(e.border,", 0.7)"),backgroundColor:"rgba(".concat(e.background,", 0.3)")}},t)))})),[o]),l=Object(ce.jsx)("div",{onClick:e=>e.stopPropagation(),onMouseDown:e=>e.preventDefault(),children:Object(ce.jsx)(ut.b,{trigger:"click",popup:()=>s,popupAlign:{bottom:10},children:Object(ce.jsx)(ct.a,{type:"text",icon:Object(ce.jsx)(Ut.a,{}),size:"small",children:"\u4e3b\u9898"})})});return e=Object(ce.jsx)("div",{className:"doc-highlight-block",style:{borderColor:"rgba(".concat(n.border,", 0.7)"),backgroundColor:"rgba(".concat(n.background,", 0.3)")},children:e.children}),i?e:Object(ce.jsx)(ut.b,{position:"top",popup:()=>l,popupAlign:{top:3},className:"hl-block-toolbar",children:e})};class Gt extends Ue{constructor(e,t){super(),this.editor=e,this.readonly=t,this.reflex=void 0,this.key=Ht,this.onCommand=e=>{e=e.path;var t=this.editor;(e=e&&be(t.raw,e))&&(d.i.delete(t.raw,{at:e,unit:"block"}),d.i.insertNodes(t.raw,{"highlight-block":{border:Rt[0].border,background:Rt[0].background},children:[{children:[{text:""}]}]},{at:e,select:!0}))},this.reflex=e.reflex}destroy(){}match(e){return!!e.element[Ht]}serialize(e){var t,r,{node:n,html:i}=e;this.reflex.isBlock(n)&&n[Ht]&&(r=(n=n[Ht]).border||"",n=n.background||"",r=Ft.a.exec(t=/rgb\((.+)\)/,r),t=Ft.a.exec(t,n),r=(n=window.getComputedStyle(document.body)).getPropertyValue(r),n=n.getPropertyValue(t),(t=document.createElement("div")).setAttribute("data-hl-block","true"),t.classList.add("callout-container"),t.style.border="1px solid rgb(".concat(r,")"),t.style.background="rgb(".concat(n,")"),t.setAttribute("data-emoji-id","balloon"),(r=document.createElement("div")).classList.add("callout-block"),t.appendChild(r),r.appendChild(i),e.html=t)}deserialize(e){var t,r,{nodes:n,html:i}=e;J(i)&&i.classList.contains("callout-block")&&(t=i.style.borderColor,i=i.style.backgroundColor,r=/rgb\((.+)\)/,t=t&&Ft.a.exec(r,t),r=i&&Ft.a.exec(r,i),t)&&r&&(e.nodes=[{"highlight-block":{border:t,background:r},children:n}])}renderLine(e){var t=nt(e.props.element[Ht]);return Object(ce.jsx)(Wt,{editor:this.editor,element:e.element,config:t,readonly:this.readonly,children:e.children})}}r(320);var qt=r(402);const Yt=["var(--color-white)","var(--color-black)","rgb(var(--red-6))","rgb(var(--blue-6))","rgb(var(--green-6))","rgb(var(--orange-6))","rgb(var(--purple-6))","rgb(var(--magenta-6))","rgb(var(--pinkpurple-6))"],Xt=e=>{var t=e.top+50,r=e.left-180;let n=e.config;const i=Vt(((t,r)=>{n={...n,[t]:r},e.onChange(n)}));var o=Vt((()=>{e.onChange({}),n={}})),s=Object(a.useMemo)((()=>(e,t)=>Object(ce.jsx)("div",{className:"font-base-picker",children:e.map(((e,r)=>Object(ce.jsx)("div",{className:"picker-item",onClick:()=>i(t,e),style:{backgroundColor:e}},r)))})),[i]);return Object(ce.jsxs)("div",{className:"font-base-menu",style:{left:r,top:t},children:[Object(ce.jsx)("div",{className:"menu-line",children:Object(ce.jsxs)("div",{children:[Object(ce.jsx)("span",{className:"label",style:{marginRight:8},children:"\u5b57\u53f7"}),Object(ce.jsx)(qt.a,{size:"mini",defaultValue:e.config.fontSize||14,mode:"button",min:10,onChange:e=>i("fontSize",e)})]})}),Object(ce.jsxs)("div",{className:"menu-line",children:[Object(ce.jsx)("span",{className:"label",children:"\u989c\u8272"}),s(Yt,"color")]}),Object(ce.jsxs)("div",{className:"menu-line",children:[Object(ce.jsx)("span",{className:"label",children:"\u80cc\u666f"}),s(Yt,"background")]}),Object(ce.jsx)("div",{className:"menu-line reset-default",children:Object(ce.jsx)(ct.a,{type:"outline",size:"mini",onClick:o,children:"\u6062\u590d\u9ed8\u8ba4"})})]})},Jt="font-base";class Zt extends Ve{constructor(e){super(),this.editor=e,this.key=Jt,this.popupModel=null,this.onCommand=e=>{if(e&&e.position&&e.marks&&!this.popupModel){const t=e.marks[Jt]||{},r=e.position;return new Promise((e=>{var n=new ot;(this.popupModel=n).onBeforeDestroy((()=>{this.popupModel=null,e()})),n.mount(Object(ce.jsx)(Xt,{config:t,left:r.left,top:r.top,onChange:e=>{Ne(this.editor.raw,{[this.key]:e})}}))})).catch((()=>{}))}this.popupModel&&(this.popupModel.destroy(),this.popupModel=null)}}destroy(){}match(e){return!!e.leaf[Jt]}render(e){var t=nt(e.props.leaf[Jt]);return e.style={...e.style,...t},e.children}}r(321);const Qt=e=>{var t=e.top+30,r=e.left-100;return Object(ce.jsx)("div",{className:"line-height-menu",style:{left:r,top:t},children:Object(ce.jsx)("div",{className:"menu-line",children:Object(ce.jsxs)("div",{children:[Object(ce.jsx)("span",{className:"label",children:"\u884c\u9ad8"}),Object(ce.jsx)(qt.a,{size:"mini",mode:"button",defaultValue:e.config||1.8,step:.1,precision:1,min:.5,onChange:e.onChange})]})})})},$t="line-height";class er extends Ue{constructor(e){super(),this.editor=e,this.key=$t,this.popupModel=null,this.onCommand=e=>{const t=this.key,r=this.editor;if(e&&e.position&&!this.popupModel){let i=1.8;var n=ue(r.raw,{key:$t});n&&(i=nt(n.block["line-height"]));const o=e.position;return new Promise((e=>{var n=new ot;(this.popupModel=n).onBeforeDestroy((()=>{this.popupModel=null,e()})),n.mount(Object(ce.jsx)(Qt,{config:i,left:o.left,top:o.top,onChange:e=>{Me(r.raw,{[t]:e})}}))})).catch((()=>{}))}this.popupModel&&(this.popupModel.destroy(),this.popupModel=null)}}destroy(){}match(e){return!!e.element[$t]}renderLine(e){var t=nt(e.props.element[$t]);return Object(ce.jsx)("div",{style:{lineHeight:t},children:e.children})}}r(322),r(323);const tr=e=>{const t=Object(u.e)();return Object(ce.jsx)("div",{className:Object(s.a)(e.className,!e.readonly&&t&&"doc-block-selected"),children:l.a.Children.map(e.children,(e=>{var r;return l.a.isValidElement(e)?(r=e.props,l.a.cloneElement(e,{...r,selected:t})):e}))})};var rr=r(407);const nr=1,ir=2,or=3,sr="image";r(324);const ar=(pn=r(397)).a.Preview,lr=e=>{const[t,r]=Object(a.useState)(""),n=Object(a.useRef)(null),i=e.element.uuid,o=!e.disable&&(e.readonly||e.selected);var l=t=>{var r=t.target,o=n.current;const s=e.element[sr];if(t.stopPropagation(),t.preventDefault(),r instanceof HTMLDivElement&&r.dataset.type&&o&&i&&s){const n=t.clientX,i=t.clientY,a=o.offsetWidth,l=o.offsetHeight,c=a/l,d=r.dataset.type,h=pe(e.editor.raw,e.element);if(h){const t=t=>{var r=t.clientX,o=(t=t.clientY,r-n),u=t-i;let p=a,b=l;switch(d){case"lt":p-=o,b-=u;break;case"rt":p+=o,b-=u;break;case"lb":p-=o,b+=u;break;case"rb":p+=o,b+=u}p/b>c?b=p/c:p=b*c,Me(e.editor.raw,{[sr]:{...s,width:Math.max(p,50),height:Math.max(b,50)}},{at:h,key:sr})},r=()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",t),document.addEventListener("mouseup",r)}}};return Object(ce.jsxs)(ce.Fragment,{children:[t&&Object(ce.jsx)(ar,{src:t,visible:!!t,onVisibleChange:e=>!e&&r("")}),!e.readonly&&Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)("div",{className:Object(s.a)(o&&"doc-image-resider"),"data-type":"lt",onMouseDown:l}),Object(ce.jsx)("div",{className:Object(s.a)(o&&"doc-image-resider"),"data-type":"rt",onMouseDown:l}),Object(ce.jsx)("div",{className:Object(s.a)(o&&"doc-image-resider"),"data-type":"lb",onMouseDown:l}),Object(ce.jsx)("div",{className:Object(s.a)(o&&"doc-image-resider"),"data-type":"rb",onMouseDown:l})]}),Object(ce.jsx)("div",{ref:n,onClick:async()=>{var t;o&&(t=e.src,r(t||""))},className:Object(s.a)(o&&"doc-image-preview"),children:e.children})]})},cr=e=>{var t;return e.element.image?(t=e.element.image,Object(ce.jsx)(rr.a,{loading:t.status===nr,children:Object(ce.jsx)(tr,{readonly:e.readonly,className:"doc-image",children:Object(ce.jsx)(lr,{editor:e.editor,element:e.element,readonly:e.readonly,src:t.src,children:Object(ce.jsx)("img",{src:t.src,width:t.width,height:t.height})})})})):null},dr=e=>new Promise((t=>{setTimeout((()=>{var r=window.URL.createObjectURL(e);t({src:r,width:256,height:256})}),1e3)}));class hr extends Ue{constructor(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:dr;super(),this.editor=e,this.readonly=t,this.uploadHandler=r,this.key=sr,this.IMAGE_INPUT_DOM_ID="doc-image-upload-input",this.uploadImage=e=>{const t=this.editor;Array.from(e).forEach((e=>{var r=window.URL.createObjectURL(e),n=Object(We.b)(),i=this.editor.raw.selection;if(i&&d.g.isCollapsed(i)&&(i=i.anchor.path,i=be(t.raw,i))){const o=d.a.pathRef(t.raw,i);d.i.setNodes(this.editor.raw,{uuid:n,[sr]:{src:r,status:nr},children:[{text:""}]},{at:i}),this.uploadHandler(e).then((e=>{const r=o.unref();r&&h.a.withoutSaving(t.raw,(()=>{d.i.setNodes(t.raw,{[sr]:{src:e.src,status:ir,width:e.width,height:e.height}},{at:r})}))})).catch((()=>{const e=o.unref();e&&h.a.withoutSaving(t.raw,(()=>{d.i.setNodes(t.raw,{[sr]:{src:void 0,status:or}},{at:e})}))}))}}))},this.onCommand=e=>{const t=this.editor;let r=document.getElementById(this.IMAGE_INPUT_DOM_ID);r||((r=document.createElement("input")).setAttribute("type","file"),r.setAttribute("class",this.IMAGE_INPUT_DOM_ID),r.setAttribute("accept","image/png, image/jpeg, image/svg+xml"),document.body.append(r)),r.onchange=r=>{var n,i;r=r.target.files;n=t,i=null==e?void 0:e.path,u.b.focus(n.raw),i?(d.i.select(n.raw,i),d.i.collapse(n.raw,{edge:"end"})):d.i.collapse(n.raw,{edge:"focus"}),r&&this.uploadImage(r),d.i.insertNodes(t.raw,{children:[{text:""}]})},r.click()}}destroy(){}match(e){return g(e.element,sr)}render(e){return Object(ce.jsx)(cr,{editor:this.editor,element:e.element,readonly:this.readonly})}}r(325);var ur=r(399);const pr="code-block",br="code-block-type";var mr=r(130),vr=r.n(mr);r(326),r(327),r(328);const gr="Plain Text",jr=[gr,"JavaScript","Java"],fr=e=>"string"==typeof e?e.length:"string"==typeof e.content?e.content.length:0,xr=e=>(null==(e=e["code-block-config"])?void 0:e.language)||gr,wr=(e,t,r,n)=>{var i=[],o=[];for(const u of e.children){if(!f(u))return o;i.push(u.text)}let s=0,a=0;for(const u of((e,t)=>{if(t===gr)return[];var r=[];let n=0;for(const o of vr.a.tokenize(e,vr.a.languages[t.toLowerCase()])){var i=n+(i=fr(o));"string"!=typeof o&&r.push({type:o.type,start:n,end:i}),n=i}return r})(i.join(""),r)){for(var l=u.start;s<i.length&&l>=a+i[s].length;)a+=i[s].length,s++;let e=l-a,r=u.end-u.start;for(;s<i.length&&0<r;){var c=i[s],d=[...t,s],h=Math.min(r,c.length-e);o.push({anchor:{path:d,offset:e},focus:{path:d,offset:e+h},[n]:u.type}),0<(r-=h)&&(a+=c.length,e=0,s++)}}return o};class yr extends Ve{constructor(){super(...arguments),this.key=br}destroy(){}match(e){return!!e.leaf[br]}render(e){return e.classList.push("token",e.leaf[br]||""),e.children}}class Or extends Ue{constructor(e,t){super(),this.editor=e,this.readonly=t,this.raw=void 0,this.key=pr,this.onCommand=e=>{(e=(e=e.path)&&be(this.raw,e))&&(d.i.delete(this.raw,{at:e,unit:"block"}),d.i.insertNodes(this.raw,{"code-block":!0,"code-block-config":{language:gr},children:[{children:[{text:""}]}]},{at:e,select:!0}))},this.onLanguageChange=(e,t)=>{e=u.b.findPath(this.raw,e),Me(this.raw,{"code-block-config":{language:t}},{at:e,key:pr})},this.raw=e.raw,this.WITH_LEAF_PLUGINS=[new yr]}destroy(){}match(e){return!!e.element[pr]}renderLine(e){var t=xr(e.element);return Object(ce.jsxs)("div",{className:"code-block",children:[Object(ce.jsx)("div",{contentEditable:!1,children:Object(ce.jsx)(ur.a,{size:"mini",style:{width:160},showSearch:!0,defaultValue:t,disabled:this.readonly,onChange:t=>this.onLanguageChange(e.element,t),children:jr.map((e=>Object(ce.jsx)(ur.a.Option,{value:e,children:e},e)))})}),e.children]})}onDecorate(e){var t,[e,r]=e,n=[],i=w(this.raw,r);return j(this.raw,e)&&i&&i.node[pr]&&(t=e.children[0],f(t))&&(t=xr(i.node),n.push(...wr(e,r,t,br))),n}}class kr extends Ue{constructor(e){super(),this.editor=e,this.key="indent",this.priority=99,this.onKeyDown=e=>{je(e,_)&&ge(this.editor.raw,this.editor.raw.selection)&&(d.i.insertText(this.editor.raw,"\t"),e.preventDefault(),e.stopPropagation())},this.editor.event.on(b.KEY_DOWN,this.onKeyDown)}destroy(){this.editor.event.off(b.KEY_DOWN,this.onKeyDown)}match(){return!1}}r(329);var Nr=r(173),Er=r(367),Cr=r(368);const Mr="flow-chart";var Dr=r(132),Sr=r(77);let Lr=null;const Br=async()=>{var e;return Lr?Promise.resolve(Lr):(e=await Promise.all([Promise.all([r.e(0),r.e(8),r.e(2)]).then(r.bind(null,507)),r.e(7).then(r.t.bind(null,503,7))]),Lr=e[0].DiagramEditor)};let Tr=null;const Ar=async()=>{var e;return Tr?Promise.resolve(Tr):(e=await Promise.all([Promise.all([r.e(0),r.e(3)]).then(r.bind(null,504))]),Tr=e[0].DiagramViewer)};r(330);const Pr=pn.a.Preview,_r=e=>{const[t,r]=Object(a.useState)(""),n=!e.disable&&(e.readonly||e.selected);return Object(ce.jsxs)(ce.Fragment,{children:[t&&Object(ce.jsx)(Pr,{src:t,visible:!!t,onVisibleChange:e=>!e&&r("")}),Object(ce.jsx)("div",{onClick:async()=>{var t;n&&(t=await e.src(),r(t||""))},className:Object(s.a)(n&&"flow-chart-preview"),children:e.children})]})},Ir=e=>{const t=Object(a.useRef)(null),[r,n]=Object(a.useState)(!0),[i,o]=Object(a.useState)(!1);Object(a.useEffect)((()=>{if(e.config.content){const r=e.config.content;(async()=>{i=r,e=(i=new(await Ar())(Object(m.h)(i)?Object(Sr.a)(i):i)).renderSVG(null,1,1),i.destroy();var e,i=await e;const o=t.current;o&&i&&(o.childNodes.forEach((e=>o.removeChild(e))),o.appendChild(i),n(!1))})()}else n(!1)}),[e.config.content,e.readonly]);const l=Object(ce.jsxs)("div",{onClick:e=>e.stopPropagation(),onMouseDown:e=>e.preventDefault(),children:[Object(ce.jsx)(ct.a,{type:"text",icon:Object(ce.jsx)(Er.a,{}),size:"small",loading:i,onClick:()=>{o(!0),(async(e,t,r)=>{var n=await Br();const i=new n(document.body,(()=>i.exit())),o=await n.getLang("zh");return{start:()=>{i.start(o,t?Object(Sr.a)(t):null,r)}}})(0,e.config.content,(t=>{var r;(t=(e=>{if(!e)return null;try{return(new XMLSerializer).serializeToString(e)}catch(e){return console.log("XmlToString Error: ",e),null}})(t))&&(r=u.b.findPath(e.editor.raw,e.element),Me(e.editor.raw,{"flow-chart":{type:"xml",content:t}},{at:r,key:Mr}))})).then((e=>{e.start(),o(!1)}))},children:"\u7f16\u8f91"}),Object(ce.jsx)(ct.a,{type:"text",icon:Object(ce.jsx)(Cr.a,{}),size:"small",onClick:()=>(async e=>{(e=(await Ar()).xmlToSvg(Object(Sr.a)(e),null))&&(e=await Object(Dr.a)(e))&&e()})(e.config.content),children:"\u4e0b\u8f7d"})]});var c=Object(ce.jsx)("div",{className:"flow-chart-container",children:e.config.content?Object(ce.jsx)("div",{ref:t}):Object(ce.jsx)(Nr.a,{description:"\u7a7a\u767d\u56fe\u5f62"})});return Object(ce.jsx)(tr,{readonly:e.readonly,children:Object(ce.jsx)(_r,{readonly:e.readonly,src:()=>(async e=>(e=(await Ar()).xmlToSvg(Object(Sr.a)(e),"#fff"))&&Object(Dr.b)(e))(e.config.content),disable:!e.config.content,children:Object(ce.jsx)("div",{className:Object(s.a)("doc-flow-chart"),children:Object(ce.jsxs)(rr.a,{loading:r,children:[Object(ce.jsxs)("div",{className:"flow-chart-title",children:[Object(ce.jsx)(Ut.a,{}),Object(ce.jsx)("span",{children:"\u6d41\u7a0b\u56fe"})]}),e.readonly?c:Object(ce.jsx)(ut.b,{popup:()=>l,position:"top",popupAlign:{top:5},className:"flow-chart-toolbar",children:c})]})})})})};class zr extends Ue{constructor(e,t){super(),this.editor=e,this.readonly=t,this.key=Mr,this.onCommand=()=>{var e=Object(We.b)();Me(this.editor.raw,{uuid:e,"flow-chart":{type:"xml",content:""},children:[{text:""}]})}}destroy(){}match(e){return g(e.element,Mr)}render(e){var t=e.element[Mr];return t?Object(ce.jsx)(Ir,{element:e.element,readonly:this.readonly,config:t,editor:this.editor}):e.children}}r(331);var Kr=r(408);const Fr={wait:100,leading:!1,trailing:!0},Ur=(e,t)=>{let r,n=null,i=[];const o=(t=Object.assign({...Fr},Object(m.e)(t)?{wait:t}:t)).wait,s=t.leading,a=t.trailing,l=()=>{n&&clearTimeout(n),n=null},c=()=>{e.apply(r,i),l()};function d(){r=this;for(var e=arguments.length,t=new Array(e),d=0;d<e;d++)t[d]=arguments[d];i=t,!s&&a?(l(),n=setTimeout(c,o)):s&&!a?(null===n&&c(),l(),n=setTimeout(l,o)):s&&a&&(null===n&&c(),l(),n=setTimeout(c,o))}return d.flush=()=>{c(),n=setTimeout(l,o)},d.cancel=l,d};var Vr=r(369),Hr=r(396),Rr=r(409);const Wr=e=>{const t=Object(a.useRef)(null),[r,n]=Object(a.useState)(!0),i=Object(a.useMemo)((()=>e.element.children.map((e=>(e.children||[]).map((e=>f(e)?e.text:"")))).join("\n")),[e.element]),o=Object(a.useMemo)((()=>Ur((e=>{var r=t.current;if(r)try{var i=Object(Vr.a)({React:l.a,Button:ct.a,console:console,Space:Kr.a}),o=Object(Hr.a)("<div>"+e+"</div>");const t=Object(Rr.a)(o,i);c.a.render(Object(ce.jsx)((()=>(Object(a.useEffect)((()=>{n(!1)}),[]),t)),{}),r)}catch(e){console.log("Render Component Error",e)}}),300)),[]);return Object(a.useEffect)((()=>o(i)),[i,o]),Object(ce.jsxs)("div",{className:"react-live-container",children:[Object(ce.jsx)(de,{selectable:!0,children:Object(ce.jsx)(rr.a,{loading:r,className:"react-live-preview",children:Object(ce.jsx)("div",{ref:t})})}),Object(ce.jsx)("div",{className:"react-live-code",children:e.children})]})},Gr="react-live",qr="react-live-type";class Yr extends Ve{constructor(){super(...arguments),this.key=qr}destroy(){}match(e){return!!e.leaf[qr]}render(e){return e.classList.push("token",e.leaf[qr]||""),e.children}}class Xr extends Ue{constructor(e){super(),this.editor=e,this.key=Gr,this.raw=void 0,this.onCommand=e=>{e=e.path;var t=this.editor;(e=e&&be(t.raw,e))&&(d.i.delete(t.raw,{at:e,unit:"block"}),d.i.insertNodes(t.raw,{"react-live":!0,children:[{children:[{text:"<Button type='primary'>Primary</Button>"}]}]},{at:e,select:!0}))},this.raw=e.raw,this.WITH_LEAF_PLUGINS=[new Yr]}destroy(){}match(e){return!!e.element[Gr]}renderLine(e){return Object(ce.jsx)(Wr,{element:e.element,editor:this.editor,children:e.children})}onDecorate(e){var[e,t]=e,r=[],n=w(this.editor.raw,t);return j(this.raw,e)&&n&&n.node[Gr]&&(n=e.children[0],f(n))&&r.push(...wr(e,t,"JavaScript",qr)),r}}r(338);const Jr="table",Zr="table-row",Qr="table-cell",$r="table-col-widths",en="cell-col-span",tn="cell-row-span",rn=100,nn=e=>{e.preventDefault(),e.stopPropagation()},on=e=>{const t=e.state;var{signalMenu:r,bannerMenu:n}=Object(a.useMemo)((()=>{var r=[],n=[];for(const s of e.plugins){var i=s.renderSignal(t),o=s.renderBanner(t);i&&r.push(i),o&&n.push(o)}return{signalMenu:r,bannerMenu:n}}),[t,e.plugins]);return Object(ce.jsxs)("div",{className:"doc-trigger-menu",onMouseDown:nn,children:[0<r.length&&Object(ce.jsx)("div",{className:"doc-trigger-signal-menu",children:r.map(((e,t)=>Object(ce.jsx)(l.a.Fragment,{children:e},t)))}),0<n.length&&Object(ce.jsx)("div",{className:"doc-trigger-banner-menu",children:n.map(((e,t)=>Object(ce.jsx)(l.a.Fragment,{children:e},t)))})]})},sn=e=>{const[t,r]=Object(a.useState)(!1),[n,i]=Object(a.useState)(!1),o=()=>{r(!1),i(!1)},c=Object(a.useMemo)((()=>{let t=[];try{t=u.b.findPath(e.editor.raw,e.element)}catch(t){e.editor.logger.warning("ToolBar FindPath Error",t)}return t}),[e.editor,e.element]),h=Object(a.useMemo)((()=>{let t=!1,r=!1,n=!1,i=!1;var s=e.editor.raw,a=c,l=e=>{e[pr]&&(t=!0),e[Gr]&&(r=!0),e[Ht]&&(n=!0),e[Qr]&&(i=!0)};if(!(a.length<=1)){let e=a.length-1,t=d.a.parent(s,a);for(;t[0]&&e--;)l(t[0]),t=d.a.parent(s,t[1])}return{path:c,editor:e.editor,element:e.element,status:{isBlock:e.editor.reflex.isBlockNode(e.element),isTextBlock:xe(e.editor.raw,e.element),isEmptyLine:(a=e.element,!(1!==Object.keys(a).length||!Object(m.a)(a.children)||1!==a.children.length||""!==a.children[0].text)),isInCodeBlock:t,isInReactLive:r,isInHighLightBlock:n,isNextLine:!1,isInTableBlock:i},close:o}}),[c,e.editor,e.element]),p=Object(a.useMemo)((()=>{let t=null;for(const n of e.plugins){var r=n.renderIcon(h);if(r){t=r;break}}return t}),[e.plugins,h]),b=()=>{u.b.focus(e.editor.raw),d.i.select(e.editor.raw,c),o()};return p?Object(ce.jsx)(ut.b,{popupVisible:t,onVisibleChange:r,popup:()=>Object(ce.jsx)(ut.b,{className:"doc-toolbar-trigger",popup:()=>Object(ce.jsx)(on,{state:h,plugins:e.plugins}),position:"left",popupVisible:n,onVisibleChange:i,children:Object(ce.jsx)("div",{className:"doc-icon-background",children:Object(ce.jsx)("span",{className:"doc-icon-container",onMouseDown:e=>e.preventDefault(),onClick:b,children:p&&p.element})})}),position:"left",mouseLeaveDelay:300,mouseEnterDelay:300,autoFitPosition:!1,...p.config,children:Object(ce.jsx)("div",{"data-doc-toolbar":!0,className:Object(s.a)(n&&"doc-line-hover"),children:e.children})}):Object(ce.jsx)(l.a.Fragment,{children:e.children})};var an=r(378);const ln=(e,t)=>{const{editor:r,element:n}=e,[i,o]=t.split("."),s=u.b.findPath(r.raw,n);u.b.focus(r.raw),d.a.withoutNormalizing(r.raw,(()=>{var a,l;e.status.isNextLine?s.length&&(a=s.slice(0,-1),l=s[s.length-1]+1,a.push(l),d.i.insertNodes(r.raw,{children:[{text:""}]},{at:a,select:!0}),Promise.resolve().then((()=>{var s=e.editor.raw.selection;s&&r.command.exec(i,{extraKey:o,path:s.focus.path,element:n,origin:t})}))):r.command.exec(i,{extraKey:o,path:s,element:n,origin:t})}))};var cn=r(61);const dn=(e,t)=>Object(ce.jsx)("div",{className:"toolbar-signal-menu",onClick:t,onMouseDown:nn,children:e}),hn=(e,t,r)=>Object(ce.jsxs)("div",{className:"toolbar-banner-menu",onClick:r,onMouseDown:nn,children:[Object(ce.jsx)("span",{className:"banner-menu-icon",children:e}),Object(ce.jsx)("span",{className:"banner-menu-name",children:t})]});mr={renderIcon:e=>e.element[pr]?{element:Object(ce.jsx)(an.a,{}),config:{position:"lt"}}:null,renderSignal:()=>null,renderBanner:e=>e.status.isBlock||!e.status.isEmptyLine?null:hn(Object(ce.jsx)(an.a,{}),"\u4ee3\u7801\u5757",(()=>{ln(e,pr),e.close()}))};var un=r(166),pn={renderIcon:e=>e.element[et]||e.element[Nt]||e.element[Bt]||e.status.isInCodeBlock||e.status.isInHighLightBlock||e.status.isInReactLive?null:{element:Object(ce.jsx)(un.a,{})},renderSignal:()=>null,renderBanner:()=>null};const bn=Object(ce.jsx)("svg",{className:"arco-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",children:Object(ce.jsx)("path",{d:"M64.128 810.666667h128a21.333333 21.333333 0 0 1 21.333333 21.333333v42.666667a21.333333 21.333333 0 0 1-21.333333 21.333333h-128a21.333333 21.333333 0 0 1-21.333333-21.333333v-42.666667a21.333333 21.333333 0 0 1 21.333333-21.333333z m384 0h128a21.333333 21.333333 0 0 1 21.333333 21.333333v42.666667a21.333333 21.333333 0 0 1-21.333333 21.333333h-128a21.333333 21.333333 0 0 1-21.333333-21.333333v-42.666667a21.333333 21.333333 0 0 1 21.333333-21.333333z m384 0h128a21.333333 21.333333 0 0 1 21.333333 21.333333v42.666667a21.333333 21.333333 0 0 1-21.333333 21.333333h-128a21.333333 21.333333 0 0 1-21.333333-21.333333v-42.666667a21.333333 21.333333 0 0 1 21.333333-21.333333z m-768-682.666667h128a21.333333 21.333333 0 0 1 21.333333 21.333333v42.666667a21.333333 21.333333 0 0 1-21.333333 21.333333h-128a21.333333 21.333333 0 0 1-21.333333-21.333333V149.333333a21.333333 21.333333 0 0 1 21.333333-21.333333z m384 0h128a21.333333 21.333333 0 0 1 21.333333 21.333333v42.666667a21.333333 21.333333 0 0 1-21.333333 21.333333h-128a21.333333 21.333333 0 0 1-21.333333-21.333333V149.333333a21.333333 21.333333 0 0 1 21.333333-21.333333z m384 0h128a21.333333 21.333333 0 0 1 21.333333 21.333333v42.666667a21.333333 21.333333 0 0 1-21.333333 21.333333h-128a21.333333 21.333333 0 0 1-21.333333-21.333333V149.333333a21.333333 21.333333 0 0 1 21.333333-21.333333zM64 469.333333h896a21.333333 21.333333 0 0 1 21.333333 21.333334v42.666666a21.333333 21.333333 0 0 1-21.333333 21.333334H64a21.333333 21.333333 0 0 1-21.333333-21.333334v-42.666666a21.333333 21.333333 0 0 1 21.333333-21.333334z"})});var mn={renderIcon:e=>e.element[_t]?{element:bn}:null,renderSignal:e=>e.status.isBlock?null:dn(bn,(()=>{ln(e,_t),e.close()})),renderBanner:()=>null},vn={renderIcon:e=>e.element[Mr]?{element:Object(ce.jsx)(Ut.a,{}),config:{position:"lt"}}:null,renderSignal:()=>null,renderBanner:e=>e.status.isBlock||!e.status.isEmptyLine?null:hn(Object(ce.jsx)(Ut.a,{}),"\u6d41\u7a0b\u56fe",(()=>{ln(e,Mr),e.close()}))},gn=r(370),jn=r(371),fn=r(372),xn={renderIcon:e=>{var t=e.element[Ge];if(t&&e.status.isTextBlock){if("h1"===t.type)return{element:Object(ce.jsx)(gn.a,{})};if("h2"===t.type)return{element:Object(ce.jsx)(jn.a,{})};if("h3"===t.type)return{element:Object(ce.jsx)(fn.a,{})}}return null},renderSignal:e=>{var t;return e.status.isBlock?null:(t=t=>()=>{ln(e,Ge+"."+t),e.close()},Object(ce.jsxs)(l.a.Fragment,{children:[dn(Object(ce.jsx)(gn.a,{}),t("h1")),dn(Object(ce.jsx)(jn.a,{}),t("h2")),dn(Object(ce.jsx)(fn.a,{}),t("h3"))]}))},renderBanner:()=>null};const wn=Object(ce.jsx)("svg",{className:"arco-icon",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 48 48",children:Object(ce.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42 6a2 2 0 012 2v24a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2h36zm1 33a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1v-2a1 1 0 011-1h38zM8 10h32v20H8V10z"})});var yn={renderIcon:e=>e.element[Ht]?{element:wn,config:{position:"lt"}}:null,renderSignal:()=>null,renderBanner:e=>e.status.isBlock||!e.status.isEmptyLine?null:hn(wn,"\u9ad8\u4eae\u5757",(()=>{ln(e,Ht),e.close()}))},On=r(376),kn={renderIcon:e=>e.element[sr]?{element:Object(ce.jsx)(On.a,{}),config:{position:"lt"}}:null,renderSignal:()=>null,renderBanner:e=>e.status.isBlock||!e.status.isEmptyLine?null:hn(Object(ce.jsx)(On.a,{}),"\u56fe\u7247",(()=>{ln(e,sr),e.close()}))},Nn=r(374),En=r(375),Cn={renderIcon:e=>e.element[Et]&&e.status.isTextBlock?{element:Object(ce.jsx)(Nn.a,{})}:e.element[Tt]&&e.status.isTextBlock?{element:Object(ce.jsx)(En.a,{})}:null,renderSignal:e=>{var t;return e.status.isBlock?null:(t=t=>()=>{ln(e,t),e.close()},Object(ce.jsxs)(l.a.Fragment,{children:[dn(Object(ce.jsx)(Nn.a,{}),t(Nt)),dn(Object(ce.jsx)(En.a,{}),t(Bt))]}))},renderBanner:()=>null},Mn=r(380),Dn=r(381),Sn=r(382),Ln=r(373),Bn={renderIcon:e=>e.element[tt]&&e.status.isTextBlock?{element:Object(ce.jsx)(Ln.a,{})}:null,renderSignal:e=>e.status.isBlock?null:dn(Object(ce.jsx)(Ln.a,{}),(()=>{ln(e,et),e.close()})),renderBanner:()=>null},Tn=r(379),An={renderIcon:e=>e.element[Gr]?{element:Object(ce.jsx)(Tn.a,{}),config:{position:"lt"}}:null,renderSignal:()=>null,renderBanner:e=>e.status.isBlock||!e.status.isEmptyLine||e.status.isInTableBlock?null:hn(Object(ce.jsx)(Tn.a,{}),"ReactLive",(()=>{ln(e,Gr),e.close()}))},Pn=(r(340),r(377));const _n=Array(6).fill(null),In=Array(6).fill(null),zn=e=>{const[t,r]=l.a.useState(-1),[n,i]=l.a.useState(-1);return Object(ce.jsx)("div",{className:"table-size-picker",onMouseLeave:()=>{r(-1),i(-1)},children:_n.map(((o,a)=>Object(ce.jsx)("div",{className:"table-size-picker-row",children:In.map(((o,l)=>Object(ce.jsx)("div",{className:Object(s.a)("table-size-picker-item",a<=t&&l<=n&&"active"),onMouseEnter:()=>{r(a),i(l)},onClick:()=>{e.onClick(t+1,n+1)}},l)))},a)))})};var Kn={renderIcon:e=>e.element[Jr]?{element:Object(ce.jsx)(Pn.a,{}),config:{position:"lt",style:{marginTop:-17,marginLeft:5}}}:null,renderSignal:()=>null,renderBanner:e=>{if(e.status.isBlock||!e.status.isEmptyLine||e.status.isInTableBlock)return null;var t,r,n;const i=(t,r)=>{0<t&&0<r&&ln(e,"".concat(Jr,".").concat(t,".").concat(r)),e.close()};return t=Object(ce.jsx)(Pn.a,{}),"\u8868\u683c[WIP]",r=()=>{ln(e,Jr),e.close()},n={popup:()=>Object(ce.jsx)(zn,{onClick:i})},Object(ce.jsx)(ut.b,{...n,position:"right",popupAlign:{right:10},children:Object(ce.jsxs)("div",{className:"toolbar-banner-menu flex-space-between",onClick:r,onMouseDown:nn,children:[Object(ce.jsxs)("div",{className:"toolbar-banner-menu-left",children:[Object(ce.jsx)("span",{className:"banner-menu-icon",children:t}),Object(ce.jsx)("span",{className:"banner-menu-name",children:"\u8868\u683c[WIP]"})]}),Object(ce.jsx)("div",{className:"toolbar-banner-menu-right",children:Object(ce.jsx)(cn.a,{})})]})})}};r(339);const Fn=Object(ce.jsx)("svg",{className:"arco-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",children:Object(ce.jsx)("path",{d:"M474.49999971 849.5V212.00000029H174.5c-22.5 0-37.50000029-15.00000029-37.50000029-37.50000029s15.00000029-37.50000029 37.50000029-37.50000029h675c22.5 0 37.50000029 15.00000029 37.50000029 37.50000029s-15.00000029 37.50000029-37.50000029 37.50000029h-299.99999971v637.49999971c0 22.5-15.00000029 37.50000029-37.50000029 37.50000029s-37.50000029-15.00000029-37.50000029-37.50000029z"})});var Un={renderIcon:()=>null,renderSignal:e=>e.status.isBlock?null:dn(Fn,(()=>{ln(e,He),e.close()})),renderBanner:()=>null};const Vn=[Un,xn,Bn,Cn,mn,kn,Kn,yn,mr,vn,An,pn],Hn=[Un,xn,Bn,Cn,mn,kn,Kn,yn,mr,vn,An,{renderIcon:()=>null,renderSignal:()=>null,renderBanner:e=>{if(e.status.isEmptyLine)return null;const t=()=>{e.editor.clipboard.copyNode([e.element]),e.close()},r=()=>{e.editor.selection.focus(),e.editor.selection.set(e.path),Promise.resolve().then((()=>{d.i.delete(e.editor.raw,{at:e.path,unit:"block"}),e.close()}))},n={...e,status:{...e.status,isBlock:!1,isEmptyLine:!0,isNextLine:!0}};return Object(ce.jsxs)(l.a.Fragment,{children:[hn(Object(ce.jsx)(Mn.a,{}),"\u590d\u5236",t),hn(Object(ce.jsx)(Dn.a,{}),"\u526a\u8d34",(()=>{t(),r(),e.close()})),hn(Object(ce.jsx)(Sn.a,{}),"\u5220\u9664",r),!e.status.isNextLine&&Object(ce.jsxs)(l.a.Fragment,{children:[Object(ce.jsx)("div",{className:"doc-trigger-menu-cut"}),Object(ce.jsx)(ut.b,{className:"doc-toolbar-trigger",popup:()=>Object(ce.jsx)(on,{state:n,plugins:Vn}),position:"right",popupAlign:{left:10,right:10},children:Object(ce.jsxs)("div",{className:"toolbar-banner-menu more-options",onMouseDown:nn,children:[Object(ce.jsxs)("div",{className:"toolbar-banner-menu-left",children:[Object(ce.jsx)("span",{className:"banner-menu-icon",children:Object(ce.jsx)(un.a,{})}),Object(ce.jsx)("span",{className:"banner-menu-name",children:"\u5728\u4e0b\u65b9\u6dfb\u52a0"})]}),Object(ce.jsx)("div",{className:"toolbar-banner-menu-right",children:Object(ce.jsx)(cn.a,{})})]})})]})]})}},pn];class Rn extends Ue{constructor(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Hn;super(),this.editor=e,this.readonly=t,this.plugins=r,this.key="doc-toolbar",this.priority=113}destroy(){}match(){return!0}renderLine(e){return this.readonly?e.children:Object(ce.jsx)(sn,{editor:this.editor,element:e.element,plugins:this.plugins,children:e.children})}}Un=r(171);var Wn=r(383);xn=Wn.a?"metaKey":"ctrlKey";const Gn={"1.":Nt,"-":Bt,"*":Bt,">":et,"#":"".concat(Ge,".h1"),"##":"".concat(Ge,".h2"),"###":"".concat(Ge,".h3"),"---":_t},qn={[t.B+"-"+xn]:Qe,[t.I+"-"+xn]:xt,[t.U+"-"+xn]:vt};Bn=class extends Ue{constructor(e){super(),this.editor=e,this.key="shortcut",this.priority=150,this.editor.event.on(b.KEY_DOWN,this.onKeyDown)}destroy(){this.editor.event.off(b.KEY_DOWN,this.onKeyDown)}match(){return!1}onKeyDown(e){var t=this.editor,r=t.selection.get();if(!r)return null;if(je(e,P)&&r.isCollapsed){if(!(i=ue(t.raw)))return null;var n=r.anchor,i=i.path,o=(n={anchor:n,focus:d.a.start(t.raw,i)},d.a.string(t.raw,n));if(!(o=Gn[o.trim()]))return null;d.i.select(t.raw,n),d.i.delete(t.raw);var[n,o]=o.split(".");t.command.exec(n,{extraKey:o,path:i}),e.preventDefault()}if(!r.isCollapsed)for(var[s,a]of Object.entries(qn)){var[s,...l]=s.split("-");if(s===String(e.keyCode)){l.every((t=>e[t]))&&(e.preventDefault(),t.command.exec(a,{marks:d.a.marks(t.raw)}));break}}}},Object(Un.a)(Bn.prototype,"onKeyDown",[function(e,t,r){const n=r.value;if(Object(m.c)(n))return{configurable:!0,get(){var e=n.bind(this);return Object.defineProperty(this,t,{value:e,configurable:!0,writable:!0,enumerable:!1}),e}};throw new TypeError("".concat(n," is not a function"))}],Object.getOwnPropertyDescriptor(Bn.prototype,"onKeyDown"),Bn.prototype);let Yn=Bn;r(342),r(343);const Xn={wait:100,leading:!0,trailing:!0},Jn={ref:{trs:[],widths:[],heights:[],element:{children:[]},size:{rows:-1,cols:-1},anchorCell:null,setSelection:()=>null},state:{selection:null}},Zn=l.a.createContext(Jn),Qn=()=>{var e=l.a.useContext(Zn);return{ref:e.ref,state:e.state}},$n=new WeakMap,ei=new WeakMap,ti=e=>{var t,r;const n=e.context,{ref:i,state:o}=Qn(),{rowIndex:l,colIndex:c}=(b={rowIndex:null,colIndex:null},(t=n.element)&&t[Qr]&&(r=(r=ei.get(t))&&$n.get(r),t=$n.get(t),b.rowIndex=Object(m.d)(r)?null:r,b.colIndex=Object(m.d)(t)?null:t),b),u=null!=(r=n.element[en])?r:1,p=null!=(t=n.element[tn])?t:1;var b=Object(a.useMemo)((()=>{var e,t,r,n=o.selection;return!(!n||Object(m.d)(l)||Object(m.d)(c))&&(({start:n,end:t}=n),[n,e]=n,[t,r]=t,l>=n)&&l<=t&&c>=e&&c<=r}),[c,l,o.selection]);return 0!==u&&0!==p?Object(ce.jsxs)("td",{className:Object(s.a)("table-block-cell",b&&"is-selected"),...n.props.attributes,onMouseEnter:t=>{var r,n,o,s,a,d,h,b;e.editor.state.get(G)&&!e.readonly&&i.anchorCell&&!Object(m.d)(c)&&!Object(m.d)(l)&&p&&u&&([h,r,o,s]=i.anchorCell,b=l+p-1,n=c+u-1,o=h+o-1,s=r+s-1,a=Math.min(h,l,b,o),d=Math.min(r,c,n,s),h=Math.max(h,l,b,o),b=Math.max(r,c,n,s),i.setSelection({start:[a,d],end:[h,b]}),t.preventDefault(),t.stopPropagation())},onMouseDown:()=>{Object(m.d)(c)||Object(m.d)(l)||e.readonly||(i.anchorCell=[l,c,p,u])},colSpan:u,rowSpan:p,children:[e.children,!e.readonly&&Object(ce.jsx)("div",{contentEditable:!1,onMouseDown:t=>{t.stopPropagation(),document.body.style.cursor="col-resize";var r=pe(e.editor.raw,n.element),o=r&&me(e.editor.raw,r,1);const s=r&&me(e.editor.raw,r,2);if(o&&o.node[Zr]&&s&&s.node[Jr]&&!Object(m.d)(c)){const n=(r=c)+u-1;if(o=i.size.cols,!(n<0||n>o)){const o=i.widths,a=o[r]||rn,l=t.clientX,c=((e,t)=>{let r,n=[],i=0,o=null;const s=(t=Object.assign({...Xn},Object(m.e)(t)?{wait:t}:t)).wait,a=t.leading,l=t.trailing,c=()=>{o&&clearTimeout(o),o=null},d=()=>{i=Date.now(),e.apply(r,n),c()};function h(){r=this;for(var e=arguments.length,t=new Array(e),h=0;h<e;h++)t[h]=arguments[h];n=t;var u=Date.now();a&&l&&Object(m.d)(o)?(u-i>s&&d(),o=setTimeout(d,s)):!a&&l&&Object(m.d)(o)?o=setTimeout(d,s):a&&!l&&Object(m.d)(o)&&(d(),o=setTimeout(c,s))}return h.flush=()=>{d(),a&&!l&&(o=setTimeout(c,s))},h.cancel=c,h})((t=>{var r=t.clientX-l;if(0!=r){r=Math.max(a+r,rn);const i=[...o];i[n]=r,h.a.withoutSaving(e.editor.raw,(()=>{d.i.setNodes(e.editor.raw,{[$r]:i},{at:s.path})})),t.stopPropagation()}}),16),u=t=>{t=t.clientX-l,t=Math.max(a+t,rn);var r=[...o];r[n]=t,t={type:"set_node",path:s.path,properties:{[$r]:[...o]},newProperties:{[$r]:[...r]}};e.editor.raw.history.undos.push([t]),document.body.style.cursor="",document.removeEventListener(z,c),document.removeEventListener(I,u)};document.addEventListener(z,c),document.addEventListener(I,u)}}},className:"table-cell-resize"})]}):null},ri=e=>{const t=e.editor,{widths:r,element:n,size:i}=e.provider,[o,c]=Object(a.useState)((()=>Array(r.length).fill(!1))),h=Object(a.useRef)(-1),u=Object(ce.jsxs)("div",{onClick:e=>e.stopPropagation(),onMouseDown:e=>e.preventDefault(),children:[Object(ce.jsx)(ct.a,{type:"text",onClick:()=>{if(!(h.current<0)){const o=h.current+1,s=pe(t.raw,n);if(s){const a=[...r];a.splice(o,0,rn),t.track.batch((()=>{n.children.forEach(((e,r)=>{var n=s.concat([r,o]);r=((e,r)=>{var n=r,o=s.concat([e,n]),a=(n=0<=n&&d.a.node(t.raw,o),o=r+1,s.concat([e,o]));o=o<i.cols&&d.a.node(t.raw,a);if(!(n&&o&&n[0]&&o[0]))return 1;if(a=n[0],n=o[0],a=null!=(o=a[en])?o:1,n=null!=(o=n[en])?o:1,1===a||1===n)return 1;for(let i=r;0<=i;i--){var l=s.concat([e,i]),c=d.a.node(t.raw,l);if(c&&c[0]&&!((c=null!=(c=c[0][en])?c:1)<=1)){d.i.setNodes(t.raw,{[en]:c+1},{at:l});break}}return 0})(r,o-1);d.i.insertNodes(t.raw,{[Qr]:!0,[en]:r,children:[{children:[{text:""}]}]},{at:n})})),d.i.setNodes(e.editor.raw,{[$r]:a},{at:s})})),h.current=-1,c(Array(r.length).fill(!1))}}},icon:Object(ce.jsx)(un.a,{}),size:"small"}),Object(ce.jsx)(ct.a,{type:"text",onClick:()=>{if(!(h.current<0)){const o=h.current,s=pe(t.raw,n);if(s){const a=[...r];a.splice(o,1),t.track.batch((()=>{n.children.forEach(((e,r)=>{var n=s.concat([r,o]);{var a=r,l=(r=o,n);const e=d.a.node(t.raw,l);if(e&&e[0]&&1!==(l=null!=(l=e[0][en])?l:1)){if(0===l)for(let e=r-1;0<=e;e--){const r=s.concat([a,e]),n=d.a.node(t.raw,r);if(n&&n[0]){var c=null!=(c=n[0][en])?c:1;if(!(c<=1)){d.i.setNodes(t.raw,{[en]:c-1},{at:r});break}}}1<l&&((r+=1)>=i.cols||(r=s.concat([a,r]),d.i.setNodes(t.raw,{[en]:l-1,[tn]:1},{at:r})))}}d.i.delete(t.raw,{at:n})})),d.i.setNodes(e.editor.raw,{[$r]:a},{at:s})})),h.current=-1,c(Array(r.length).fill(!1))}}},icon:Object(ce.jsx)(Sn.a,{}),size:"small",disabled:1===r.length})]});return Object(ce.jsx)("div",{contentEditable:!1,className:Object(s.a)("col-op-toolbar",(e.isFocusIn||o.some(Boolean))&&"active"),onClick:e=>e.stopPropagation(),onMouseDown:e=>e.preventDefault(),children:r.map(((t,r)=>Object(ce.jsx)(l.a.Fragment,{children:Object(ce.jsx)(ut.b,{popupVisible:o[r],onVisibleChange:e=>{c((t=>(e||(h.current=-1),(t=[...t])[r]=e,t)))},className:"table-toolbar-trigger",popup:()=>u,popupAlign:{top:3},trigger:"click",position:"top",children:Object(ce.jsx)("div",{className:Object(s.a)("col-toolbar-block",h.current===r&&"active"),style:{width:r?t:t+1},onClick:()=>{return t=r,h.current=t,d.i.deselect(e.editor.raw),void e.provider.setSelection(null);var t}})})},r)))})},ni=Object(ce.jsx)("svg",{className:"arco-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",children:Object(ce.jsx)("path",{d:"M362.375529 613.556706a29.033412 29.033412 0 0 1-20.720941-8.613647l-0.963764-1.024a33.611294 33.611294 0 0 1-0.90353-45.116235l45.296941-47.706353h-224.677647V445.620706h224.195765l-44.393412-46.742588a33.611294 33.611294 0 0 1-0.903529-45.056l0.903529-1.084236a29.274353 29.274353 0 0 1 42.405647-1.084235l120.591059 126.976-119.145412 125.289412a28.912941 28.912941 0 0 1-21.684706 9.637647m340.931765 0a29.033412 29.033412 0 0 1-20.781176-8.613647L561.995294 478.027294l119.024941-125.289412a29.274353 29.274353 0 0 1 42.405647-1.084235l0.90353 1.084235a33.310118 33.310118 0 0 1 0.963764 44.754824l-45.357176 47.706353h224.256v65.897412h-224.075294l44.333176 46.742588a33.129412 33.129412 0 0 1 0.963765 44.634353l-0.963765 1.084235v0.481882a27.587765 27.587765 0 0 1-21.202823 9.517177m-579.102118 358.821647c-41.441882-3.553882-73.246118-39.152941-73.246117-83.727059V93.364706C50.898824 46.381176 86.136471 9.216 131.011765 9.216h267.986823c44.875294 0 80.112941 36.984471 80.112941 84.208941V177.694118h-62.644705V93.424941a19.456 19.456 0 0 0-4.818824-13.191529 18.672941 18.672941 0 0 0-12.528941-5.662118H130.951529a18.010353 18.010353 0 0 0-12.468705 5.541647 17.106824 17.106824 0 0 0-4.818824 12.769883v794.563764c0 11.685647 6.264471 18.251294 17.287529 18.251294h268.047059a18.010353 18.010353 0 0 0 12.468706-5.541647 17.106824 17.106824 0 0 0 4.818824-12.649411v-84.208942h62.223058v84.148706c0 47.224471-35.237647 84.208941-80.112941 84.208941H124.084706l0.12047 0.722824z m542.479059 0.481882c-44.815059 0-80.052706-36.984471-80.052706-84.208941v-84.208941h62.644706v84.208941c0 11.625412 6.264471 18.251294 17.287529 18.251294h268.649412a19.937882 19.937882 0 0 0 17.28753-18.251294V93.906824c0-11.625412-6.264471-18.251294-17.28753-18.251295h-268.528941a19.937882 19.937882 0 0 0-17.287529 18.251295V180.705882H586.691765V93.967059c0-47.224471 35.237647-84.208941 80.112941-84.208941h267.986823c44.875294 0 80.112941 36.984471 80.112942 84.208941v794.74447c0 47.224471-35.237647 84.208941-80.112942 84.208942h-268.167529z"})}),ii=Object(ce.jsxs)("svg",{className:"arco-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",children:[Object(ce.jsx)("path",{d:"M111.559111 981.105778c-42.496 0-75.889778-36.010667-75.889778-82.090667V816.924444h59.392v82.090667c0 11.377778 5.916444 17.806222 16.384 17.806222h254.577778a19.228444 19.228444 0 0 0 16.440889-17.806222V124.074667c0-11.377778-5.916444-17.749333-16.440889-17.749334H111.559111a19.228444 19.228444 0 0 0-16.384 17.749334V208.782222H35.783111V124.074667c0-46.023111 33.393778-82.090667 75.889778-82.090667h254.008889c42.552889 0 75.946667 36.067556 75.946666 82.090667v774.940444c0 46.08-33.393778 82.090667-75.946666 82.090667H111.559111z"}),Object(ce.jsx)("path",{d:"M146.261333 630.784a27.136 27.136 0 0 1-19.626666-8.362667L12.288 498.631111 125.155556 376.433778a27.306667 27.306667 0 0 1 40.163555-1.024l0.910222 1.024a32.995556 32.995556 0 0 1 0.910223 43.633778l-42.951112 46.535111h212.48v64.284444H124.302222l42.097778 45.568a32.995556 32.995556 0 0 1 0.853333 43.52l-0.910222 1.080889v0.398222a25.827556 25.827556 0 0 1-20.081778 9.329778M620.202667 980.650667c-39.253333-3.413333-69.404444-38.115556-69.404445-81.635556V123.619556c0-45.966222 33.336889-82.090667 75.832889-82.090667h254.065778c42.496 0 75.889778 36.067556 75.889778 82.090667v82.090666H897.137778V123.619556a19.342222 19.342222 0 0 0-4.551111-12.856889 17.464889 17.464889 0 0 0-11.832889-5.518223h-254.179556a16.952889 16.952889 0 0 0-16.384 17.806223v774.826666c0 11.377778 5.916444 17.749333 16.384 17.749334h254.065778a16.952889 16.952889 0 0 0 16.384-17.806223V815.786667h58.936889v82.147555c0 46.023111-33.393778 82.090667-75.889778 82.090667H620.088889l0.113778 0.682667z"}),Object(ce.jsx)("path",{d:"M845.937778 630.784a27.136 27.136 0 0 1-19.626667-8.362667l-0.910222-1.080889a33.450667 33.450667 0 0 1-0.853333-43.975111l42.951111-46.478222h-212.935111V467.057778h212.48l-42.097778-45.624889a33.450667 33.450667 0 0 1-0.853334-43.975111l0.910223-1.024a27.306667 27.306667 0 0 1 40.163555-1.024l114.289778 123.790222-112.981333 122.140444a27.022222 27.022222 0 0 1-20.48 9.443556"})]}),oi=e=>{const{editor:t,provider:r,sel:n}=e,{element:i,widths:o}=r,[s,l]=n.start,[c,h]=n.end;var{isMergeAble:e,isSplitAble:u}=Object(a.useMemo)((()=>{var e,r=pe(t.raw,i);return r&&(r=r.concat(s,l),r=d.a.node(t.raw,r))&&r[0]?(e=null!=(e=(r=r[0])[tn])?e:1,r=null!=(r=r[en])?r:1,s+e-1===c&&l+r-1===h?1!==e||1!==r?{isMergeAble:!1,isSplitAble:!0}:{isMergeAble:!1,isSplitAble:!1}:{isMergeAble:!0,isSplitAble:!1}):{isMergeAble:!1,isSplitAble:!1}}),[t,i,h,c,l,s]);const p=Object(ce.jsxs)("div",{onClick:e=>e.stopPropagation(),onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},children:[Object(ce.jsx)(ct.a,{type:"text",onClick:()=>{const e=pe(t.raw,i);e&&(r.setSelection(null),t.track.batch((()=>{var r=c-s+1,n=h-l+1,i=[];for(let u=s;u<=c;u++)for(let r=l;r<=h;r++)if(u!==s||r!==l){const n=e.concat(u,r),o=t.reflex.getNodeTuple(n,0);d.i.setNodes(t.raw,{[tn]:0,[en]:0},{at:n}),o&&o.node.children&&0!==o.node[tn]&&0!==o.node[en]&&(i.push(...o.node.children),o.node.children.forEach(((e,r)=>{d.i.delete(t.raw,{at:n.concat(r)})})))}const o=e.concat(s,l),a=(d.i.setNodes(t.raw,{[tn]:r,[en]:n},{at:o}),t.reflex.getNodeTuple(o,0));a&&a.node.children&&d.i.insertNodes(t.raw,i,{at:o.concat(a.node.children.length),select:!0})})))},icon:ni,size:"small",disabled:!e}),Object(ce.jsx)(ct.a,{type:"text",onClick:()=>{const e=pe(t.raw,i);e&&(r.setSelection(null),t.track.batch((()=>{for(let n=s;n<=c;n++)for(let i=l;i<=h;i++){var r=e.concat(n,i);d.i.setNodes(t.raw,{[tn]:1,[en]:1},{at:r})}})))},icon:ii,size:"small",disabled:!u})]});var{left:e,width:u}=Object(a.useMemo)((()=>{var e=n.start[1],t=n.end[1];return{left:o.slice(0,e).reduce(((e,t)=>e+t),0),width:o.slice(e,t+1).reduce(((e,t)=>e+t),0)}}),[n.end,n.start,o]);return Object(ce.jsx)(ut.b,{className:"table-toolbar-trigger",popupVisible:!0,popup:()=>p,position:"top",popupAlign:{top:-2},children:Object(ce.jsx)("div",{contentEditable:!1,className:"merge-toolbar-container",style:{width:u,left:e}})})},si=e=>{const{editor:t,heights:r,provider:n}=e,{element:i,size:o}=n,[c,h]=Object(a.useState)((()=>Array(r.length).fill(!1))),u=Object(a.useRef)(-1),p=Object(ce.jsxs)("div",{onClick:e=>e.stopPropagation(),onMouseDown:e=>e.preventDefault(),children:[Object(ce.jsx)(ct.a,{type:"text",onClick:()=>{if(!(u.current<0)){const n=pe(t.raw,i);if(n){const i=u.current;var e=u.current+1;const s=n.concat([e]);t.track.batch((()=>{var e=Array.from({length:o.cols},((e,r)=>{var s=i,a=n.concat([s,r]),l=(s=0<=s&&d.a.node(t.raw,a),a=i+1,n.concat([a,r]));a=a<o.rows&&d.a.node(t.raw,l);if(!(s&&a&&s[0]&&a[0]))return 1;if(l=s[0],s=a[0],l=null!=(a=l[tn])?a:1,s=null!=(a=s[tn])?a:1,1===l||1===s)return 1;for(let o=i;0<=o;o--){var c=n.concat([o,r]),h=d.a.node(t.raw,c);if(h&&h[0]&&!((h=null!=(h=h[0][tn])?h:1)<=1)){d.i.setNodes(t.raw,{[tn]:h+1},{at:c});break}}return 0}));d.i.insertNodes(t.raw,{[Zr]:!0,children:e.map((e=>({[Qr]:!0,[tn]:e,children:[{children:[{text:""}]}]})))},{at:s})})),u.current=-1,h(Array(r.length).fill(!1))}}},icon:Object(ce.jsx)(un.a,{}),size:"small"}),Object(ce.jsx)(ct.a,{type:"text",onClick:()=>{if(!(u.current<0)){const e=pe(t.raw,i);if(e){const n=u.current,i=e.concat([n]);t.track.batch((()=>{for(let c=0;c<o.cols;c++){var r=i.concat([c]);if(!(r=d.a.node(t.raw,r))||!r[0])return;if(1!==(r=null!=(r=r[0][tn])?r:1)){if(0===r)for(let r=n-1;0<=r;r--){var s=e.concat([r,c]),a=d.a.node(t.raw,s);if(a&&a[0]&&!((a=null!=(a=a[0][tn])?a:1)<=1)){d.i.setNodes(t.raw,{[tn]:a-1},{at:s});break}}if(1<r){var l=n+1;if(!(l>=o.rows)){const n=e.concat([l,c]);d.i.setNodes(t.raw,{[tn]:r-1,[en]:1},{at:n})}}}}d.i.delete(t.raw,{at:i})})),u.current=-1,h(Array(r.length).fill(!1))}}},icon:Object(ce.jsx)(Sn.a,{}),size:"small",disabled:1===r.length})]});return r.length?Object(ce.jsx)("div",{contentEditable:!1,className:Object(s.a)("row-op-toolbar",(e.isFocusIn||c.some(Boolean))&&"active"),onClick:e=>e.stopPropagation(),onMouseDown:e=>e.preventDefault(),children:r.map(((t,r)=>Object(ce.jsx)(l.a.Fragment,{children:Object(ce.jsx)(ut.b,{popupVisible:c[r],onVisibleChange:e=>{h((t=>(e||(u.current=-1),(t=[...t])[r]=e,t)))},className:"table-toolbar-trigger",popup:()=>p,popupAlign:{left:3},trigger:"click",position:"left",children:Object(ce.jsx)("div",{className:Object(s.a)("row-toolbar-block",u.current===r&&"active"),style:{height:r?t:t+2},onClick:()=>{return t=r,u.current=t,d.i.deselect(e.editor.raw),void e.provider.setSelection(null);var t}})})},r)))}):null},ai=e=>{const t=e.context;var r,n=Object(u.e)();const i=Object(a.useRef)(null),o=(r=t.element,{size:Object(a.useMemo)((()=>{const e=r;var t=e.children||[],n=e.children.length;let i=0;return t.forEach(((t,r)=>{ei.set(t,e),$n.set(t,r);var n=t.children||[];0===r&&(i=n.length),n.forEach(((e,r)=>{ei.set(e,t),$n.set(e,r)}))})),{rows:n,cols:i}}),[r])}).size,[s,c]=Object(a.useState)([]),[h,p]=Object(a.useState)(null),[b,m]=Object(a.useState)(!1);var v=Object(a.useMemo)((()=>{var e=t.element[$r];return e||(e=o.cols,Array(e).fill(rn))}),[t.element,o.cols]);const g=((e,t)=>{const r=Object(a.useMemo)((()=>({...Jn.ref})),[]);return Object.assign(r,e),{provider:Object(a.useMemo)((()=>({ref:r,state:t})),[t.selection])}})({size:o,widths:v,heights:s,element:t.element,setSelection:t=>{d.i.deselect(e.editor.raw),p(t)}},{selection:h}).provider,j=(Object(a.useEffect)((()=>{const t=i.current;if(t&&!e.readonly){var r=()=>{var e=t.querySelector("tbody");if(e){e=Array.from(e.children).filter((e=>e instanceof HTMLTableRowElement));const t=g.ref;t.trs.length=e.length,t.heights.length=e.length,e.forEach(((e,r)=>{var n;e&&(n=e.getBoundingClientRect().height,t.trs[r]=e,t.heights[r]=n)})),c([...t.heights])}};r();const e=((e,t)=>{var r=e.getBoundingClientRect();let n=r.width,i=r.height;if(window.ResizeObserver){const r=new ResizeObserver((e=>{var r,[e]=e;e&&(({width:e,height:r}=e.contentRect),e===n&&r===i||(t({width:n,height:i},{width:e,height:r}),n=e,i=r))}));return r.observe(e),()=>{r.disconnect()}}{e.style.position="relative";const r=document.createElement("iframe");return r.setAttribute("src","//about:blank"),r.setAttribute("frameborder","0"),r.setAttribute("contenteditable","false"),r.setAttribute("style",["position: absolute","top: 0","left: 0","right: 0","bottom: 0","opacity: 0","width: 100%","height: 100%","border: none","z-index: -999999","user-select: none","visibility: hidden","pointer-events: none","transform: translate(-999999px, -999999px)"].join(";")),r.onload=()=>{r.contentWindow&&(r.contentWindow.onresize=()=>{var{clientWidth:r,clientHeight:o}=e;r===n&&o===i||(t({width:n,height:i},{width:r,height:o}),n=r,i=o)})},e.appendChild(r),()=>{e.removeChild(r)}}})(t,r);return()=>{e()}}}),[g.ref,e.readonly]),Vt((e=>{var{previous:e,current:t}=e;!e&&t&&h&&(p(null),g.ref.anchorCell=null)})));return Object(a.useEffect)((()=>{e.onMount({onEditorSelectionChange:j});const t=()=>m(!1),r=()=>m(!0);return document.addEventListener(K,r),document.addEventListener(I,t),()=>{e.onUnMount({onEditorSelectionChange:j}),document.removeEventListener(K,r),document.removeEventListener(I,t)}}),[j,e.onMount,e.onUnMount]),Object(ce.jsxs)("div",{className:"table-block-wrapper",ref:i,children:[!e.readonly&&0<s.length&&Object(ce.jsx)(si,{isFocusIn:n||!!h,editor:e.editor,provider:{...g.ref},heights:s}),!e.readonly&&h&&!b&&Object(ce.jsx)(oi,{sel:h,editor:e.editor,provider:{...g.ref}}),Object(ce.jsxs)("div",{className:"table-block-scroll",children:[!e.readonly&&Object(ce.jsx)(ri,{isFocusIn:n||!!h,editor:e.editor,provider:{...g.ref}}),Object(ce.jsxs)("table",{className:"table-block",children:[Object(ce.jsxs)("colgroup",{contentEditable:!1,children:[v.map(((e,t)=>Object(ce.jsx)(l.a.Fragment,{children:Object(ce.jsx)("col",{style:{width:e}})},t))),0<v.length&&Object(ce.jsx)("col",{style:{width:"100%"}})]}),Object(ce.jsx)(Zn.Provider,{value:g,children:Object(ce.jsx)("tbody",{children:e.children})})]})]})]})},li=e=>{const t=e.context,r=Qn().ref,n=$n.get(t.element);return Object(ce.jsx)("tr",{className:"table-block-tr",...t.props.attributes,ref:e=>{Object(m.c)(t.props.attributes.ref)?t.props.attributes.ref(e):t.props.attributes.ref.current=e,Object(m.d)(n)||(r.trs[n]=e)},children:e.children})};class ci extends Ue{constructor(e,t){super(),this.editor=e,this.readonly=t,this.raw=void 0,this.key=Jr,this.views=void 0,this.onCommand=e=>{var{path:e,origin:t}=e;if(e=e&&be(this.raw,e)){var[,t,r]=(null==t?void 0:t.split("."))||[],n=Number(t)||2,i=Number(r)||2,o=[];for(let e=0;e<n;e++){var s=[];for(let e=0;e<i;e++)s.push({[Qr]:!0,children:[{children:[{text:""}]}]});o.push({[Zr]:!0,children:s})}d.i.delete(this.raw,{at:e,unit:"block"}),d.i.insertNodes(this.raw,{table:!0,[$r]:new Array(i).fill(rn),children:o},{at:e,select:!0}),d.i.select(this.raw,e.concat([0,0,0]))}},this.onTableMount=e=>{this.views.push(e)},this.onTableUnMount=e=>{-1!==(e=this.views.indexOf(e))&&this.views.splice(e,1)},this.onSelectionChange=e=>{this.views.forEach((t=>t.onEditorSelectionChange(e)))},this.views=[],this.raw=e.raw,e.event.on(b.SELECTION_CHANGE,this.onSelectionChange)}destroy(){this.views=[],this.editor.event.off(b.SELECTION_CHANGE,this.onSelectionChange)}match(e){return!!e.element[Jr]||!!e.element[Zr]||!!e.element[Qr]}renderLine(e){var t;return e.element[Jr]?Object(ce.jsx)(ai,{onMount:this.onTableMount,onUnMount:this.onTableUnMount,editor:this.editor,readonly:this.readonly,context:e,children:e.children}):(t=e.props,e.element[Zr]?(e.plain=!0,Object(ce.jsx)(li,{context:e,children:t.children})):e.element[Qr]?(e.plain=!0,Object(ce.jsx)(ti,{editor:this.editor,context:e,readonly:this.readonly,children:t.children})):e.children)}}r(344);var di=r(398);class hi{static pick(e,t){var r=new Set(Object(m.a)(t)?t:[t]),n={};for(const i in e)r.has(i)&&(n[i]=e[i]);return n}static omit(e,t){const r=new Set(Object(m.a)(t)?t:[t]);if(Object(m.f)(e)){var n={};for(const t in e)r.has(t)||(n[t]=e[t]);return n}return e.filter((e=>!r.has(e)))}static patch(e,t){var r=e instanceof Set?e:new Set(e),n=t instanceof Set?t:new Set(t),i=(e=[],[]),o=[];for(const s of n)r.has(s)||i.push(s);for(const s of r)n.has(s)||o.push(s);return e.push(...i,...o),{effects:e,added:i,removed:o}}static union(e,t){return[...e,...t]}static intersection(e,t){e=[...e];const r=t instanceof Set?t:new Set(t);return new Set([...e].filter((e=>r.has(e))))}}Cn=r(384),mn=r(385),kn=r(386),Kn=r(387),yn=r(388),mr=r(389),vn=r(390),An=r(391),pn=r(392),t=r(393),xn=r(394),Un=r(395);const ui=Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)(di.a.Item,{children:Object(ce.jsx)(Cn.a,{})},Qe),Object(ce.jsx)(di.a.Item,{children:Object(ce.jsx)(mn.a,{})},xt),Object(ce.jsx)(di.a.Item,{children:Object(ce.jsx)(kn.a,{})},vt),Object(ce.jsx)(di.a.Item,{children:Object(ce.jsx)(Kn.a,{})},jt),Object(ce.jsx)(di.a.Item,{children:Object(ce.jsx)(yn.a,{})},yt),Object(ce.jsx)(di.a.Item,{children:Object(ce.jsx)(mr.a,{})},pt),Object(ce.jsx)(di.a.Item,{children:Object(ce.jsx)(vn.a,{})},Jt),Object(ce.jsx)(di.a.Item,{children:Object(ce.jsx)(An.a,{})},$t),Object(ce.jsxs)(di.a.SubMenu,{title:Object(ce.jsx)(pn.a,{}),popup:!0,triggerProps:{trigger:"click",position:"bottom"},children:[Object(ce.jsx)(di.a.Item,{children:Object(ce.jsx)("div",{className:"align-menu-center",children:Object(ce.jsx)(pn.a,{})})},"".concat(zt,".left")),Object(ce.jsx)(di.a.Item,{children:Object(ce.jsx)("div",{className:"align-menu-center",children:Object(ce.jsx)(t.a,{})})},"".concat(zt,".center")),Object(ce.jsx)(di.a.Item,{children:Object(ce.jsx)("div",{className:"align-menu-center",children:Object(ce.jsx)(xn.a,{})})},"".concat(zt,".right")),Object(ce.jsx)(di.a.Item,{children:Object(ce.jsx)("div",{className:"align-menu-center",children:Object(ce.jsx)(Un.a,{})})},"".concat(zt,".justify"))]},zt)]}),pi=e=>(e=e.children,"object"==typeof document?c.a.createPortal(e,document.body):null),bi=[pt,Jt],mi=[...bi,$t],vi=e=>{const t=e.editor,r=Object(a.useRef)(!1),n=Object(a.useRef)(null),[i,o]=Object(a.useState)([]),s=Vt((e=>{var r=n.current;r&&(u.b.isFocused(t.raw)&&e?(o(hi.omit(Object.keys(d.a.marks(t.raw)||[]),bi)),(e=(e=window.getSelection())&&0<e.rangeCount?e.getRangeAt(0).getBoundingClientRect():null)&&(r.style.top="".concat(e.top+window.pageYOffset-40-10,"px"),r.style.left="".concat(e.left+window.pageXOffset-170+e.width/2,"px"))):((e=r).style.left="-1000px",e.style.top="-1000px"))})),l=(Object(a.useEffect)((()=>{const t=n.current;if(t&&!e.readonly){const e=()=>{r.current||(t.style.display="")},n=()=>{r.current||(t.style.display="none")},i=()=>{var e;r.current||(e=!!(e=window.getSelection())&&!e.isCollapsed,s(e))};return document.addEventListener(I,e),document.addEventListener(K,n),document.addEventListener(U,i),()=>{document.removeEventListener(I,e),document.removeEventListener(K,n),document.addEventListener(U,i)}}}),[t,s,e.readonly]),Vt(((s,a)=>{var l,c,h,u,[s,p]=s.split("."),b=d.a.marks(t.raw),m={left:0,top:0},v=n.current,g=(o((l=s,h=mi,g=-1<(c=i).indexOf(l),u=-1<h.indexOf(l),g?hi.omit(c,[l]):u?[...hi.omit(c,h),l]:[...c,l])),v&&(m.top=v.offsetTop+v.offsetHeight/2,m.left=v.offsetLeft+v.offsetWidth/2),e.editor.command.exec(s,{extraKey:p,event:a,position:m,marks:b}));g&&(r.current=!0,g.then((()=>r.current=!1)))})));var c=Object(a.useMemo)((()=>Object(ce.jsx)(di.a,{className:"menu-toolbar-container",onClickMenuItem:l,onMouseUp:e=>e.stopPropagation(),onMouseDown:nn,mode:"vertical",selectedKeys:i,children:ui})),[l,i]);return e.readonly?null:Object(ce.jsx)(pi,{children:Object(ce.jsx)("div",{ref:n,className:"hover-menu-container",children:c})})};r(345);var gi=r(401);const ji=gi.a.Link,fi=e=>{const t=Object(a.useRef)(null),[r,n]=Object(a.useState)([]),i=Object(a.useMemo)((()=>Ur((()=>{var t=(e=>{const t=[];let r=1/0;const n=new Set;return e.raw.children.forEach((e=>{var i=e[Ge];if(i&&e.children&&i.id&&i.type){let o=i.id;e=e.children.map((e=>e.text||"")).join("");let s=0;"h1"===i.type?s=0:"h2"===i.type?s=1:"h3"===i.type&&(s=2),n.has(o)&&(console.warn("Anchor id: ".concat(i.id," is duplicated")),o=Object(We.b)(6)),n.add(i.id),r=Math.min(r,s),t.push({id:o,title:e,level:s})}})),t.forEach((e=>{e.level=e.level-r})),t})(e.editor);n(t)}),300)),[e.editor]);return Object(a.useEffect)((()=>(i(),e.editor.event.on(b.CONTENT_CHANGE,i),()=>{e.editor.event.off(b.CONTENT_CHANGE,i)})),[i,e.editor]),r.length?Object(ce.jsx)("div",{className:Object(s.a)("doc-anchor",e.className),ref:t,children:Object(ce.jsx)(gi.a,{style:{width:e.width||200},affix:!1,onChange:e=>{var r,n=t.current;e=n&&document.querySelector('a[data-href="'.concat(e,'"]'));n&&e&&(r=n.getBoundingClientRect(),e=e.getBoundingClientRect(),r.top>e.top&&n.scrollBy({top:e.top-r.top,behavior:"smooth"}),r.bottom<e.bottom)&&n.scrollBy({top:e.bottom-r.bottom,behavior:"smooth"})},boundary:e.boundary,scrollContainer:e.scrollContainer,children:r.map((e=>Object(ce.jsx)(ji,{title:e.title,href:"#".concat(e.id),style:{marginLeft:10*e.level}},e.id)))})}):null},xi=[{children:[{text:"\u6587\u6863\u7f16\u8f91\u5668"}],heading:{id:"01f0de8f",type:"h1"},align:"center"},{children:[{text:"GitHub",link:{href:"https://github.com/WindrunnerMax/DocEditor",blank:!0}},{text:" \uff5c "},{text:"Editor DEMO",link:{href:"https://windrunnermax.github.io/DocEditor/",blank:!0}},{text:" \uff5c "},{text:"BLOG",link:{href:"https://github.com/WindrunnerMax/EveryDay/blob/master/Plugin/\u57fa\u4e8eslate\u6784\u5efa\u6587\u6863\u7f16\u8f91\u5668.md",blank:!0}}],align:"center"},{children:[{text:"\u57fa\u4e8e"},{text:"slate.js","inline-code":!0},{text:"\u6784\u5efa\u7684\u6587\u6863\u7f16\u8f91\u5668\uff0c\u6240\u6709\u529f\u80fd\u90fd\u662f\u57fa\u4e8e\u63d2\u4ef6\u5316\u5b9a\u4e49\u5b9e\u73b0\uff0c\u901a\u8fc7\u53f3\u4e0a\u89d2\u6309\u94ae\u5207\u6362\u7f16\u8f91\u6a21\u5f0f\u4e0e\u9884\u89c8\u6a21\u5f0f\uff0c\u6240\u89c1\u5373\u6240\u5f97\uff0c\u5f53\u524d\u9875\u9762\u4e5f\u5b9e\u73b0\u4e86\u4eae\u8272\u4e0e\u6697\u8272\u6a21\u5f0f\u7684\u9002\u914d\u3002"}]},{children:[{text:"\u884c\u5185\u7ed3\u6784"}],heading:{type:"h2",id:"83ddface"}},{children:[{text:"\u652f\u6301"},{text:"\u52a0\u7c97",bold:!0},{text:"\u3001"},{text:"\u659c\u4f53",italic:!0},{text:"\u3001"},{text:"\u4e0b\u5212\u7ebf","under-line":!0},{text:"\u3001"},{text:"\u5220\u9664\u7ebf","strike-through":!0},{text:"\u3001"},{text:"\u884c\u5185\u4ee3\u7801\u5757","inline-code":!0},{text:"\u3001"},{text:"\u8d85\u94fe\u63a5",link:{href:"https://github.com/WindrunnerMax/DocEditor",blank:!0}},{text:"\u3001"},{text:"\u5b57\u53f7","font-base":{fontSize:13}},{text:"\u3001"},{text:"\u989c\u8272","font-base":{color:"rgb(var(--green-6))"}},{text:"\u3001"},{text:"\u80cc\u666f","font-base":{color:"var(--color-white)",background:"rgb(var(--blue-6))"}},{text:"\u3002"}],align:"center"},{children:[{text:"\u6bb5\u843d\u7ed3\u6784"}],heading:{id:"4644b757",type:"h2"}},{children:[{text:"\u6807\u9898"}],heading:{type:"h3",id:"213e6703"}},{children:[{text:"\u652f\u6301"},{text:"h1~h3","inline-code":!0},{text:"\u7684\u4e09\u7ea7\u6807\u9898\uff0c\u5feb\u6377\u952e\u5524\u8d77 \u4e00\u7ea7\u6807\u9898"},{text:"# ","inline-code":!0},{text:"\u3001\u4e8c\u7ea7\u6807\u9898"},{text:"## ","inline-code":!0},{text:"\u3001\u4e09\u7ea7\u6807\u9898"},{text:"### ","inline-code":!0},{text:"\u3002"}]},{children:[{text:"\u884c\u9ad8"}],heading:{type:"h3",id:"5ab77ffb"}},{children:[{text:"\u652f\u6301\u72ec\u7acb\u8bbe\u7f6e\u884c\u9ad8\u3002"}],"line-height":2},{"line-height":2,children:[{text:"\u6587\u5b57\u5bf9\u9f50"}],heading:{type:"h3",id:"pi99bzVO"}},{"line-height":2,children:[{text:"\u652f\u6301\u884c\u7ea7\u522b\u7684\u6587\u5b57\u5bf9\u9f50\u3002"}],align:"left"},{"line-height":2,children:[{text:"\u7ec4\u5408\u7ed3\u6784"}],heading:{type:"h2",id:"QFwoE5fK"}},{children:[{text:"\u5f15\u7528\u5757"}],heading:{type:"h3",id:"8426a51b"}},{"quote-block":!0,children:[{children:[{text:"\u652f\u6301\u5f15\u7528\u5757\u3002"}],"quote-block-item":!0},{"unordered-list":!0,"quote-block-item":!0,children:[{children:[{text:"\u53ef\u4ee5\u5d4c\u5957\u5176\u4ed6\u683c\u5f0f\u3002"}],"unordered-list-item":{level:1}},{"unordered-list-item":{level:1},children:[{text:"\u652f\u6301\u5feb\u6377\u952e"},{text:"> ","inline-code":!0},{text:"\u3002"}]}]}]},{children:[{text:"\u65e0\u5e8f\u5217\u8868"}],heading:{type:"h3",id:"a764a9a0"}},{children:[{text:"\u652f\u6301"},{text:"3","inline-code":!0},{text:"\u7ea7\u65e0\u5e8f\u5217\u8868\uff0c\u5feb\u6377\u952e\u5524\u8d77\u65e0\u5e8f\u5217\u8868"},{text:"* ","inline-code":!0},{text:"\u3001"},{text:"- ","inline-code":!0},{text:"\uff0c\u4e0b\u4e00\u7ea7\u65e0\u5e8f\u5217\u8868"},{text:"tab","inline-code":!0},{text:"\u3002"}]},{"unordered-list":!0,children:[{children:[{text:"\u4e00\u7ea7\u65e0\u5e8f\u5217\u8868\u3002"}],"unordered-list-item":{level:1}},{"unordered-list-item":{level:2},children:[{text:"\u4e8c\u7ea7\u65e0\u5e8f\u5217\u8868\u3002"}]},{"unordered-list-item":{level:3},children:[{text:"\u4e09\u7ea7\u65e0\u5e8f\u5217\u8868\u3002"}]}]},{children:[{text:"\u6709\u5e8f\u5217\u8868"}],heading:{type:"h3",id:"400aa7e1"}},{children:[{text:"\u652f\u6301"},{text:"3","inline-code":!0},{text:"\u7ea7\u6709\u5e8f\u5217\u8868\uff0c\u6709\u5e8f\u5217\u8868\u5404\u7ea7\u5355\u72ec\u8ba1\u6570\uff0c\u5feb\u6377\u952e\u5524\u8d77\u6709\u5e8f\u5217\u8868"},{text:"1. ","inline-code":!0},{text:"\uff0c\u4e0b\u4e00\u7ea7\u6709\u5e8f\u5217\u8868"},{text:"tab","inline-code":!0},{text:"\u3002"}]},{"ordered-list":!0,children:[{children:[{text:"\u4e00\u7ea7\u6709\u5e8f\u5217\u8868\u3002"}],"ordered-list-item":{start:1,level:1}},{"ordered-list-item":{level:2,start:1},children:[{text:"\u4e8c\u7ea7\u6709\u5e8f\u5217\u8868\u3002"}]},{"ordered-list-item":{level:3,start:1},children:[{text:"\u4e09\u7ea7\u6709\u5e8f\u5217\u8868\u3002"}]}]},{children:[{text:"\u5d4c\u5165\u7ed3\u6784"}],heading:{type:"h2",id:"cfSqPoYb"}},{children:[{text:"\u56fe\u7247"}],heading:{type:"h3",id:"aab55qq1"}},{children:[{text:"\u652f\u6301\u56fe\u7247\u4e0a\u4f20\u3002"}]},{children:[{text:""}],image:{src:"./favicon.ico",status:2,width:256,height:256},uuid:"aab55qq1"},{heading:{type:"h3",id:"WkDzhLLI"},children:[{text:"\u6d41\u7a0b\u56fe"}]},{children:[{text:"\u652f\u6301\u6d41\u7a0b\u56fe\u5728\u7ebf\u7f16\u8f91\u3002"}]},{uuid:"c751cd0d5ea","flow-chart":{type:"xml",content:'<mxGraphModel dx="506" dy="742" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;sketch=0;" parent="1" source="2" target="3" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="2" value="Start" style="rounded=1;whiteSpace=wrap;html=1;sketch=0;glass=0;shadow=0;comic=1;" parent="1" vertex="1"><mxGeometry x="140" y="230" width="120" height="60" as="geometry"/></mxCell><mxCell id="3" value="End" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;glass=0;comic=1;" parent="1" vertex="1"><mxGeometry x="420" y="230" width="120" height="60" as="geometry"/></mxCell></root></mxGraphModel>'},children:[{text:""}]},{children:[{text:"\u5206\u5272\u7ebf"}],heading:{type:"h3",id:"5ab771ffb"}},{children:[{text:"\u652f\u6301\u5206\u5272\u7ebf\uff0c\u5feb\u6377\u952e"},{text:"--- ","inline-code":!0},{text:"\u3002"}]},{"dividing-line":!0,children:[{text:""}]},{children:[{text:"\u5757\u7ea7\u7ed3\u6784"}],heading:{type:"h2",id:"DEnfO0kv"}},{children:[{text:"\u9ad8\u4eae\u5757"}],heading:{type:"h3",id:"af869b51"}},{"highlight-block":{border:"var(--arcoblue-6)",background:"var(--arcoblue-3)"},children:[{children:[{text:"\ud83c\udf30 "},{text:"\u4e3e\u4e2a\u6817\u5b50",bold:!0}]},{children:[{text:"\u652f\u6301\u9ad8\u4eae\u5757 \u53ef\u4ee5\u7528\u4e8e\u63d0\u793a\u6587\u6863\u4e2d\u7684\u91cd\u8981\u5185\u5bb9\u3002"}]}]},{"highlight-block":{background:"var(--green-3)",border:"var(--green-6)"},children:[{children:[{text:"\ud83c\udfdd \u53ef\u4ee5\u4e3a\u9ad8\u4eae\u5757\u66f4\u6362\u4e3b\u9898\u3002"}]}]},{heading:{type:"h3",id:"LkpBjz4O"},children:[{text:"\u4ee3\u7801\u5757"}]},{"code-block":!0,"code-block-config":{language:"JavaScript"},children:[{children:[{text:"// \u652f\u6301\u4ee3\u7801\u5757\u9ad8\u4eae"}]},{children:[{text:"const a = 1;"}]},{children:[{text:"const b = 2;"}]}]},{heading:{type:"h3",id:"MjpVOY70"},children:[{text:"React\u5b9e\u65f6\u9884\u89c8"}]},{children:[{text:"\u652f\u6301React\u7ec4\u4ef6\u5b9e\u65f6\u7f16\u8f91\u53ca\u9884\u89c8\u3002"}]},{"react-live":!0,children:[{children:[{text:"<Space size='large'>"}]},{children:[{text:"  <Button type='primary'>Primary</Button>"}]},{children:[{text:"  <Button type='secondary'>Secondary</Button>"}]},{children:[{text:"  <Button type='dashed'>Dashed</Button>"}]},{children:[{text:"  <Button type='outline'>Outline</Button>"}]},{children:[{text:"  <Button type='text'>Text</Button>"}]},{children:[{text:"</Space>"}]}]},{children:[{text:"\u8868\u683c"}],heading:{type:"h3",id:"uhzr9fvh"}},{children:[{text:"\u8868\u683c\u529f\u80fd\u5904\u4e8e"},{text:"WIP","inline-code":!0},{text:"\u72b6\u6001\uff0c\u8fd8\u5b58\u5728\u5927\u91cf\u4ea4\u4e92\u4e0e"},{text:"BUG","inline-code":!0},{text:"\u9700\u8981\u5904\u7406\u3002"}]},{table:!0,"table-col-widths":[199,292,224],children:[{"table-row":!0,children:[{"table-cell":!0,children:[{children:[{text:"\u8868\u683c"}],align:"center"}]},{"table-cell":!0,children:[{children:[{text:"\u8868\u683c\u53ef\u4ee5\u627f\u8f7d\u590d\u6742\u5185\u5bb9"}],align:"center"}],"cell-row-span":1,"cell-col-span":2},{"table-cell":!0,"cell-col-span":0,children:[{children:[{text:""}]}],"cell-row-span":0}]},{"table-row":!0,children:[{"table-cell":!0,children:[{children:[{"unordered-list-item":{level:1},children:[{text:"\u5bbd\u5ea6\u8c03\u6574"}]},{"unordered-list-item":{level:1},children:[{text:"\u5355\u5143\u683c\u5408\u5e76"}]}],"unordered-list":!0}]},{"table-cell":!0,children:[{children:[{text:"Blog"}],heading:{type:"h3",id:"qBjahwuG"}},{children:[{"quote-block-item":!0,children:[{text:"\u52e4\u5b66\u5982\u6625\u8d77\u4e4b\u82d7\uff0c\u4e0d\u89c1\u5176\u589e\uff0c\u65e5\u6709\u6240\u957f\uff1b"}]},{"quote-block-item":!0,children:[{text:"\u8f8d\u5b66\u5982\u78e8\u5200\u4e4b\u77f3\uff0c\u4e0d\u89c1\u5176\u635f\uff0c\u65e5\u6709\u6240\u4e8f\u3002"}]}],"quote-block":!0},{"code-block":!0,"code-block-config":{language:"JavaScript"},children:[{children:[{text:'console.log("Hi~");'}]},{children:[{text:'console.log("Hello World");'}]}]}],"cell-row-span":2,"cell-col-span":1},{"table-cell":!0,"cell-col-span":1,children:[{"highlight-block":{background:"var(--purple-3)",border:"var(--purple-6)"},children:[{children:[{text:"\u91cd\u70b9\u4fe1\u606f"}],align:"center"}]}],"cell-row-span":1}]},{"table-row":!0,children:[{"table-cell":!0,"cell-row-span":1,children:[{children:[{"unordered-list-item":{level:1},children:[{text:"\u590d\u6742\u683c\u5f0f\u5d4c\u5957"}]},{"unordered-list-item":{level:1},children:[{text:"\u5355\u5143\u683c\u9009\u533a\u64cd\u4f5c"}]},{"unordered-list-item":{level:1},children:[{text:"\u884c\u5217\u64cd\u4f5c\u5de5\u5177\u680f"}]},{children:[{text:"\u6a21\u5757\u5316\u7ec4\u4ef6\u9002\u914d"}],"unordered-list-item":{level:1}}],"unordered-list":!0}]},{"table-cell":!0,"cell-row-span":0,children:[{children:[{text:""}]}],"cell-col-span":0},{"table-cell":!0,"cell-row-span":1,children:[{children:[{"ordered-list-item":{start:1,level:1},children:[{text:"\u6709\u5e8f\u5217\u8868"}]},{"ordered-list-item":{level:2,start:1},children:[{text:"\u5c42\u7ea7\u8c03\u6574"}]}],"ordered-list":!0},{children:[{"unordered-list-item":{level:1},children:[{text:"\u65e0\u5e8f\u5217\u8868"}]},{children:[{text:"\u5c42\u7ea7\u8c03\u6574"}],"unordered-list-item":{level:2}}],"unordered-list":!0}],"cell-col-span":1}]}]},{children:[{text:"\u5feb\u6377\u529f\u80fd"}],heading:{type:"h2",id:"8b4f0218"}},{heading:{type:"h3",id:"614d6a4c"},children:[{text:"\u5feb\u6377\u952e"}]},{children:[{text:"\u652f\u6301\u5feb\u6377\u952e: "}]},{"unordered-list":!0,children:[{children:[{text:"\u4e00\u7ea7\u6807\u9898"},{text:"# ","inline-code":!0},{text:"\u3001\u4e8c\u7ea7\u6807\u9898"},{text:"## ","inline-code":!0},{text:"\u3001\u4e09\u7ea7\u6807\u9898"},{text:"### ","inline-code":!0},{text:"\u3002"}],"unordered-list-item":{level:1}},{"unordered-list":!0,children:[{"unordered-list-item":{level:1},children:[{text:"\u5f15\u7528\u5757"},{text:"> ","inline-code":!0},{text:"\u3002"}]}]},{"unordered-list-item":{level:1},children:[{text:"\u591a\u7ea7\u65e0\u5e8f\u5217\u8868"},{text:"* ","inline-code":!0},{text:"\u3001"},{text:"- ","inline-code":!0},{text:"\uff0c\u4e0b\u7ea7\u65e0\u5e8f\u5217\u8868"},{text:"tab","inline-code":!0},{text:"\u3002"}]},{"unordered-list-item":{level:1},children:[{text:"\u591a\u7ea7\u6709\u5e8f\u5217\u8868"},{text:"1. ","inline-code":!0},{text:"\uff0c\u4e0b\u7ea7\u6709\u5e8f\u5217\u8868"},{text:"tab","inline-code":!0},{text:"\u3002"}]},{"unordered-list-item":{level:1},children:[{text:"\u5206\u5272\u7ebf"},{text:"--- ","inline-code":!0},{text:"\u3002"}]},{"unordered-list-item":{level:1},children:[{text:"\u64a4\u9500"},{text:"Ctrl + Z","inline-code":!0},{text:"\uff0c\u524d\u8fdb"},{text:"Ctrl + Shift + Z","inline-code":!0},{text:"\u3002"}]},{"unordered-list-item":{level:1},children:[{text:"\u7f29\u8fdb"},{text:"Tab","inline-code":!0},{text:"\u3002"}]}]},{children:[{text:"\u5de5\u5177\u680f"}],heading:{type:"h3",id:"0f8a5d9e"}},{children:[{text:"Hover","inline-code":!0},{text:"\u5230\u884c\u53ef\u4ee5\u5524\u8d77\u6587\u6863\u5de5\u5177\u680f\uff0c\u9009\u4e2d\u6587\u5b57\u540e\u53ef\u4ee5\u5f39\u51fa\u6d6e\u52a8\u5de5\u5177\u680f\u3002"}]},{children:[{text:"\u5176\u4ed6"}],heading:{type:"h2",id:"3e92c207"}},{children:[{text:"\u540e\u7eed\u652f\u6301\u5b8c\u5584\u4e2d..."}]}],wi={[sr]:{void:!0,block:!0},"dividing-line":{void:!0,block:!0},"flow-chart":{void:!0,block:!0},"quote-block-item":{wrap:et},"ordered-list-item":{wrap:Nt},"unordered-list-item":{wrap:Bt},"highlight-block":{block:!0,instance:!0},"code-block":{block:!0,instance:!0},"react-live":{block:!0,instance:!0},[Zr]:{wrap:Jr},[Qr]:{wrap:Zr,instance:!0}},yi=e=>{const t=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=Object(a.useMemo)((()=>{return[e,r]=[...t],new Ie(e,r);var e,r}),[]);return Object(a.useEffect)((()=>()=>{n.destroy()}),[]),n}(wi,{init:xi}),r=(Object(a.useMemo)((()=>{window.editor=t,window.Transforms=d.i,window.Editor=d.a,t.logger.set(ie),t.plugin.register(new Re(t),new Xe(t),new Ze(t),new $e(t),new rt(t),new mt(t,e.readonly),new gt(t),new ft(t),new wt(t),new Ot(t),new Lt(t),new At(t),new It(t),new Kt(t),new Gt(t,e.readonly),new Zt(t),new er(t),new hr(t,e.readonly),new Or(t,e.readonly),new kr(t),new zr(t,e.readonly),new Xr(t),new Rn(t,e.readonly),new Yn(t),new ci(t,e.readonly))}),[t,e.readonly]),Object(a.useMemo)((()=>Ur((()=>{console.log("Text changes",t.raw.children)}),500)),[t.raw]));return Object(a.useEffect)((()=>(t.event.on(b.CONTENT_CHANGE,r),()=>{t.event.off(b.CONTENT_CHANGE,r)})),[t.event,r]),Object(ce.jsxs)(l.a.Fragment,{children:[Object(ce.jsx)(vi,{readonly:e.readonly,editor:t}),Object(ce.jsx)(Ke,{editor:t,readonly:e.readonly,placeholder:"Enter text ..."}),!Wn.b&&c.a.createPortal(Object(ce.jsx)(fi,{editor:t,boundary:60}),document.body)]})};Bn=r(356),Cn=r(357),mn=r(358);var Oi=r(359);const ki="theme-index",Ni=window.matchMedia("(prefers-color-scheme: dark)"),Ei=[Object(ce.jsx)(Bn.a,{}),Object(ce.jsx)(Cn.a,{}),Object(ce.jsx)(mn.a,{})],Ci=e=>{e.matches?document.body.setAttribute("arco-theme","dark"):document.body.removeAttribute("arco-theme")},Mi=()=>{const[e,t]=Object(a.useState)(Oi.a.local.get(ki)||0);return Object(a.useEffect)((()=>{switch(e){case 0:Ni.matches?document.body.setAttribute("arco-theme","dark"):document.body.removeAttribute("arco-theme"),Ni.onchange=Ci;break;case 1:Ni.onchange=null,document.body.removeAttribute("arco-theme");break;case 2:Ni.onchange=null,document.body.setAttribute("arco-theme","dark")}}),[e]),Object(ce.jsx)("div",{onClick:()=>{var r=(e+1)%Ei.length;t(r),Oi.a.local.set(ki,r)},children:Ei[e]})},Di=()=>{const[e,t]=Object(a.useState)(!1);return Object(ce.jsxs)("div",{className:"doc-editor-container",children:[Object(ce.jsxs)("div",{className:"header",children:[Object(ce.jsx)("span",{className:"left",children:"Slogan"}),Object(ce.jsxs)("div",{className:"right",children:[Object(ce.jsx)("div",{onClick:()=>t(!e),children:e?Object(ce.jsx)(n.a,{}):Object(ce.jsx)(i.a,{})}),Object(ce.jsx)(Mi,{}),Object(ce.jsx)("a",{className:"github",target:"_blank",href:"https://github.com/WindrunnerMax/DocEditor",children:Object(ce.jsx)(o.a,{})})]})]}),Object(ce.jsx)("div",{className:"gap"}),Object(ce.jsx)("div",{className:Object(s.a)("editor",e&&"render"),children:Object(ce.jsx)("div",{className:"slate-editor",children:Object(ce.jsx)(yi,{readonly:e})})})]})};c.a.render(Object(ce.jsx)(Di,{}),document.getElementById("root"))}},[[346,5,6]]]);