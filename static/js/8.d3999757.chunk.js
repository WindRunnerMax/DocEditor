(this["webpackJsonpdoc-editor-react"]=this["webpackJsonpdoc-editor-react"]||[]).push([[8],{505:function(e,t,i){"use strict";i.r(t),i.d(t,"DiagramEditor",(function(){return M}));t=i(76);var n=i(440),l=(i(441),i(408)),o="data:image/gif;base64,R0lGODlhDAAMAIAAAP///0RERCH5BAAAAAAALAAAAAAMAAwAAAIdjI8Hy23w2JtR1bQiVDlIvnVIt3llqKFm4yRuUAAAOw==",r=i(415),a=i(426),s=i(418),d=i(414);function h(e){this.editorUi=e,this.actions=new Object,this.init()}function c(e,t,i,n,o){l.G.call(this),this.label=e,this.funct=this.createFunction(t),this.enabled=null==i||i,this.iconCls=n,this.shortcut=o,this.visible=!0}function u(e,t,i,n,o){return n=n&&o?'viewBox="0 0 '.concat(n," ").concat(o,'"'):"",o=unescape(encodeURIComponent("".concat('<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="').concat(e,'px" height="').concat(t,'px" ').concat(n,' version="1.1">').concat(i,"</svg>"))),new l.S("data:image/svg+xml;base64,".concat(btoa(o)),e,t)}h.prototype.init=function(){function e(){return c.prototype.isEnabled.apply(this,arguments)&&n.isEnabled()}var t=this.editorUi,i=t.editor,n=i.graph;function o(e){n.escape(),null!=(e=n.deleteCells(n.getDeletableCells(n.getSelectionCells()),e))&&n.setSelectionCells(e)}this.addAction("undo",(function(){t.undo()}),null,"sprite-undo",d.c.CTRL_KEY+"+Z"),this.addAction("redo",(function(){t.redo()}),null,"sprite-redo",l.k.IS_WIN?d.c.CTRL_KEY+"+Y":d.c.CTRL_KEY+"+Shift+Z"),this.addAction("cut",(function(){l.l.cut(n)}),null,"sprite-cut",d.c.CTRL_KEY+"+X"),this.addAction("copy",(function(){try{l.l.copy(n)}catch(e){t.handleError(e)}}),null,"sprite-copy",d.c.CTRL_KEY+"+C"),this.addAction("paste",(function(){n.isEnabled()&&!n.isCellLocked(n.getDefaultParent())&&l.l.paste(n)}),!1,"sprite-paste",d.c.CTRL_KEY+"+V"),this.addAction("pasteHere",(function(){if(n.isEnabled()&&!n.isCellLocked(n.getDefaultParent())){n.getModel().beginUpdate();try{var e=l.l.paste(n);if(null!=e){for(var t=!0,i=0;i<e.length&&t;i++)t=t&&n.model.isEdge(e[i]);var o,r,a,s=n.view.translate,d=n.view.scale,h=s.x,c=s.y,u=null;null!=(u=null!=(u=1==e.length&&t&&null!=(o=n.getCellGeometry(e[0]))?o.getTerminalPoint(!0):u)?u:n.getBoundingBoxFromGeometry(e,t))&&(r=Math.round(n.snap(n.popupMenuHandler.triggerX/d-h)),a=Math.round(n.snap(n.popupMenuHandler.triggerY/d-c)),n.cellsMoved(e,r-u.x,a-u.y))}}finally{n.getModel().endUpdate()}}})),this.addAction("copySize",(function(){var e=n.getSelectionCell();n.isEnabled()&&null!=e&&n.getModel().isVertex(e)&&null!=(e=n.getCellGeometry(e))&&(t.copiedSize=new l.mb(e.x,e.y,e.width,e.height))}),null,null,"Alt+Shift+X"),this.addAction("pasteSize",(function(){if(n.isEnabled()&&!n.isSelectionEmpty()&&null!=t.copiedSize){n.getModel().beginUpdate();try{for(var e,i=n.getSelectionCells(),l=0;l<i.length;l++)n.getModel().isVertex(i[l])&&null!=(e=n.getCellGeometry(i[l]))&&((e=e.clone()).width=t.copiedSize.width,e.height=t.copiedSize.height,n.getModel().setGeometry(i[l],e))}finally{n.getModel().endUpdate()}}}),null,null,"Alt+Shift+V"),this.addAction("delete",(function(e){o(null!=e&&l.E.isShiftDown(e))}),null,null,"Delete"),this.addAction("deleteAll",(function(){o(!0)}),null,null,d.c.CTRL_KEY+"+Delete"),this.addAction("duplicate",(function(){try{n.setSelectionCells(n.duplicateCells())}catch(e){t.handleError(e)}}),null,null,d.c.CTRL_KEY+"+D"),this.put("turn",new c(l.ob.get("turn")+" / "+l.ob.get("reverse"),(function(e){n.turnShapes(n.getSelectionCells(),null!=e&&l.E.isShiftDown(e))}),null,null,d.c.CTRL_KEY+"+R")),this.addAction("selectVertices",(function(){n.selectVertices(null,!0)}),null,null,d.c.CTRL_KEY+"+Shift+I"),this.addAction("selectEdges",(function(){n.selectEdges()}),null,null,d.c.CTRL_KEY+"+Shift+E"),this.addAction("selectAll",(function(){n.selectAll(null,!0)}),null,null,d.c.CTRL_KEY+"+A"),this.addAction("selectNone",(function(){n.clearSelection()}),null,null,d.c.CTRL_KEY+"+Shift+A"),this.addAction("lockUnlock",(function(){if(!n.isSelectionEmpty()){n.getModel().beginUpdate();try{var e=n.isCellMovable(n.getSelectionCell())?1:0;n.toggleCellStyles(l.t.STYLE_MOVABLE,e),n.toggleCellStyles(l.t.STYLE_RESIZABLE,e),n.toggleCellStyles(l.t.STYLE_ROTATABLE,e),n.toggleCellStyles(l.t.STYLE_DELETABLE,e),n.toggleCellStyles(l.t.STYLE_EDITABLE,e),n.toggleCellStyles("connectable",e)}finally{n.getModel().endUpdate()}}}),null,null,d.c.CTRL_KEY+"+L"),this.addAction("home",(function(){n.home()}),null,null,"Shift+Home"),this.addAction("exitGroup",(function(){n.exitGroup()}),null,null,d.c.CTRL_KEY+"+Shift+Home"),this.addAction("enterGroup",(function(){n.enterGroup()}),null,null,d.c.CTRL_KEY+"+Shift+End"),this.addAction("collapse",(function(){n.foldCells(!0)}),null,null,d.c.CTRL_KEY+"+Home"),this.addAction("expand",(function(){n.foldCells(!1)}),null,null,d.c.CTRL_KEY+"+End"),this.addAction("toFront",(function(){n.orderCells(!1)}),null,null,d.c.CTRL_KEY+"+Shift+F"),this.addAction("toBack",(function(){n.orderCells(!0)}),null,null,d.c.CTRL_KEY+"+Shift+B"),this.addAction("group",(function(){1==n.getSelectionCount()?n.setCellStyles("container","1"):n.setSelectionCell(n.groupCells(null,0))}),null,null,d.c.CTRL_KEY+"+G"),this.addAction("ungroup",(function(){1==n.getSelectionCount()&&0==n.getModel().getChildCount(n.getSelectionCell())?n.setCellStyles("container","0"):n.setSelectionCells(n.ungroupCells())}),null,null,d.c.CTRL_KEY+"+Shift+U"),this.addAction("removeFromGroup",(function(){n.removeCellsFromParent()})),this.addAction("edit",(function(){n.isEnabled()&&n.startEditingAtCell()}),null,null,"F2/Enter"),this.addAction("autosize",(function(){var e=n.getSelectionCells();if(null!=e){n.getModel().beginUpdate();try{for(var t=0;t<e.length;t++){var i,l,o=e[t];n.getModel().getChildCount(o)?n.updateGroupBounds([o],20):(i=n.view.getState(o),l=n.getCellGeometry(o),n.getModel().isVertex(o)&&null!=i&&null!=i.text&&null!=l&&n.isWrapping(o)?((l=l.clone()).height=i.text.boundingBox.height/n.view.scale,n.getModel().setGeometry(o,l)):n.updateCellSize(o))}}finally{n.getModel().endUpdate()}}}),null,null,d.c.CTRL_KEY+"+Shift+Y"),this.addAction("formattedText",(function(){var e=n.getView().getState(n.getSelectionCell());if(null!=e){n.stopEditing();var i="1"==e.style.html?null:"1";n.getModel().beginUpdate();try{for(var o=n.getSelectionCells(),r=0;r<o.length;r++){var a,s,d,h=n.getView().getState(o[r]);null!=h&&("1"==(a=l.Cb.getValue(h.style,"html","0"))&&null==i?(d=n.convertValueToString(h.cell),"0"!=l.Cb.getValue(h.style,"nl2Br","1")&&(d=d.replace(/\n/g,"").replace(/<br\s*.?>/g,"\n")),(s=document.createElement("div")).innerHTML=n.sanitizeHtml(d),d=l.Cb.extractTextWithWhitespace(s.childNodes),n.cellLabelChanged(h.cell,d),n.setCellStyles("html",i,[o[r]])):"0"==a&&"1"==i&&(d=l.Cb.htmlEntities(n.convertValueToString(h.cell),!1),"0"!=l.Cb.getValue(h.style,"nl2Br","1")&&(d=d.replace(/\n/g,"<br/>")),n.cellLabelChanged(h.cell,n.sanitizeHtml(d)),n.setCellStyles("html",i,[o[r]])))}t.fireEvent(new l.F("styleChanged","keys",["html"],"values",[null!=i?i:"0"],"cells",o))}finally{n.getModel().endUpdate()}}})),this.addAction("wordWrap",(function(){var e=n.getView().getState(n.getSelectionCell()),t="wrap";n.stopEditing(),null!=e&&"wrap"==e.style[l.t.STYLE_WHITE_SPACE]&&(t=null),n.setCellStyles(l.t.STYLE_WHITE_SPACE,t)})),this.addAction("rotation",(function(){var e="0",i=(null!=(i=n.getView().getState(n.getSelectionCell()))&&(e=i.style[l.t.STYLE_ROTATION]||e),new s.b(t,e,l.ob.get("apply"),(function(e){null!=e&&0<e.length&&n.setCellStyles(l.t.STYLE_ROTATION,e)}),l.ob.get("enterValue")+" ("+l.ob.get("rotation")+" 0-360)"));t.showDialog(i.container,375,80,!0,!0),i.init()})),this.addAction("resetView",(function(){n.zoomTo(1),t.resetScrollbars()}),null,null,"Home"),this.addAction("zoomIn",(function(){n.isFastZoomEnabled()?n.lazyZoom(!0,!0,t.buttonZoomDelay):n.zoomIn()}),null,null,d.c.CTRL_KEY+" + (Numpad) / Alt+Mousewheel"),this.addAction("zoomOut",(function(){n.isFastZoomEnabled()?n.lazyZoom(!1,!0,t.buttonZoomDelay):n.zoomOut()}),null,null,d.c.CTRL_KEY+" - (Numpad) / Alt+Mousewheel"),this.addAction("fitWindow",(function(){var e=n.isSelectionEmpty()?n.getGraphBounds():n.getBoundingBox(n.getSelectionCells()),t=n.view.translate,i=n.view.scale,o=(i=(e.width/=i,e.height/=i,e.x=e.x/i-t.x,e.y=e.y/i-t.y,n.container.clientWidth-10),n.container.clientHeight-10),r=Math.floor(20*Math.min(i/e.width,o/e.height))/20;n.zoomTo(r),l.Cb.hasScrollbars(n.container)&&(n.container.scrollTop=(e.y+t.y)*r-Math.max((o-e.height*r)/2+5,0),n.container.scrollLeft=(e.x+t.x)*r-Math.max((i-e.width*r)/2+5,0))}),null,null,d.c.CTRL_KEY+"+Shift+H"),this.addAction("fitPage",l.Cb.bind(this,(function(){n.pageVisible||this.get("pageView").funct();var e=n.pageFormat,t=n.pageScale,i=n.container.clientWidth-10,o=n.container.clientHeight-10;i=Math.floor(20*Math.min(i/e.width/t,o/e.height/t))/20;n.zoomTo(i),l.Cb.hasScrollbars(n.container)&&(o=n.getPagePadding(),n.container.scrollTop=o.y*n.view.scale-1,n.container.scrollLeft=Math.min(o.x*n.view.scale,(n.container.scrollWidth-n.container.clientWidth)/2)-1)})),null,null,d.c.CTRL_KEY+"+J"),this.addAction("fitTwoPages",l.Cb.bind(this,(function(){n.pageVisible||this.get("pageView").funct();var e=n.pageFormat,t=n.pageScale,i=n.container.clientWidth-10,o=n.container.clientHeight-10;i=Math.floor(20*Math.min(i/(2*e.width)/t,o/e.height/t))/20;n.zoomTo(i),l.Cb.hasScrollbars(n.container)&&(o=n.getPagePadding(),n.container.scrollTop=Math.min(o.y,(n.container.scrollHeight-n.container.clientHeight)/2),n.container.scrollLeft=Math.min(o.x,(n.container.scrollWidth-n.container.clientWidth)/2))})),null,null,d.c.CTRL_KEY+"+Shift+J"),this.addAction("fitPageWidth",l.Cb.bind(this,(function(){n.pageVisible||this.get("pageView").funct();var e=n.pageFormat,t=n.pageScale,i=n.container.clientWidth-10;i=Math.floor(20*i/e.width/t)/20;n.zoomTo(i),l.Cb.hasScrollbars(n.container)&&(e=n.getPagePadding(),n.container.scrollLeft=Math.min(e.x*n.view.scale,(n.container.scrollWidth-n.container.clientWidth)/2))}))),this.put("customZoom",new c(l.ob.get("custom")+"...",l.Cb.bind(this,(function(){var e=new s.b(this.editorUi,parseInt(100*n.getView().getScale()),l.ob.get("apply"),l.Cb.bind(this,(function(e){e=parseInt(e),!isNaN(e)&&0<e&&n.zoomTo(e/100)})),l.ob.get("zoom")+" (%)");this.editorUi.showDialog(e.container,300,80,!0,!0),e.init()})),null,null,d.c.CTRL_KEY+"+0")),this.addAction("pageScale...",l.Cb.bind(this,(function(){var e=new s.b(this.editorUi,parseInt(100*n.pageScale),l.ob.get("apply"),l.Cb.bind(this,(function(e){e=parseInt(e);!isNaN(e)&&0<e&&((e=new a.a(t,null,null,null,e/100)).ignoreColor=!0,e.ignoreImage=!0,n.model.execute(e))})),l.ob.get("pageScale")+" (%)");this.editorUi.showDialog(e.container,300,80,!0,!0),e.init()})));var r=null,h=((r=this.addAction("grid",(function(){n.setGridEnabled(!n.isGridEnabled()),t.fireEvent(new l.F("gridEnabledChanged"))}),null,null,d.c.CTRL_KEY+"+Shift+G")).setToggleAction(!0),r.setSelectedCallback((function(){return n.isGridEnabled()})),r.setEnabled(!1),(r=this.addAction("guides",(function(){n.graphHandler.guidesEnabled=!n.graphHandler.guidesEnabled,t.fireEvent(new l.F("guidesEnabledChanged"))}))).setToggleAction(!0),r.setSelectedCallback((function(){return n.graphHandler.guidesEnabled})),r.setEnabled(!1),(r=this.addAction("tooltips",(function(){n.tooltipHandler.setEnabled(!n.tooltipHandler.isEnabled())}))).setToggleAction(!0),r.setSelectedCallback((function(){return n.tooltipHandler.isEnabled()})),(r=this.addAction("collapseExpand",(function(){var e=new a.a(t);e.ignoreColor=!0,e.ignoreImage=!0,e.foldingEnabled=!n.foldingEnabled,n.model.execute(e)}))).setToggleAction(!0),r.setSelectedCallback((function(){return n.foldingEnabled})),r.isEnabled=e,(r=this.addAction("scrollbars",(function(){t.setScrollbars(!t.hasScrollbars())}))).setToggleAction(!0),r.setSelectedCallback((function(){return n.scrollbars})),(r=this.addAction("pageView",l.Cb.bind(this,(function(){t.setPageVisible(!n.pageVisible)})))).setToggleAction(!0),r.setSelectedCallback((function(){return n.pageVisible})),(r=this.addAction("connectionArrows",(function(){n.connectionArrowsEnabled=!n.connectionArrowsEnabled,t.fireEvent(new l.F("connectionArrowsChanged"))}),null,null,"Alt+Shift+A")).setToggleAction(!0),r.setSelectedCallback((function(){return n.connectionArrowsEnabled})),(r=this.addAction("connectionPoints",(function(){n.setConnectable(!n.connectionHandler.isEnabled()),t.fireEvent(new l.F("connectionPointsChanged"))}),null,null,"Alt+Shift+P")).setToggleAction(!0),r.setSelectedCallback((function(){return n.connectionHandler.isEnabled()})),(r=this.addAction("copyConnect",(function(){n.connectionHandler.setCreateTarget(!n.connectionHandler.isCreateTarget()),t.fireEvent(new l.F("copyConnectChanged"))}))).setToggleAction(!0),r.setSelectedCallback((function(){return n.connectionHandler.isCreateTarget()})),r.isEnabled=e,l.Cb.bind(this,(function(e,t,i,o){return this.addAction(e,(function(){if(null!=i&&n.cellEditor.isContentEditing())i();else{n.stopEditing(!1),n.getModel().beginUpdate();try{var e=n.getSelectionCells();n.toggleCellStyleFlags(l.t.STYLE_FONTSTYLE,t,e),(t&l.t.FONT_BOLD)==l.t.FONT_BOLD?n.updateLabelElements(n.getSelectionCells(),(function(e){e.style.fontWeight=null,"B"==e.nodeName&&n.replaceElement(e)})):(t&l.t.FONT_ITALIC)==l.t.FONT_ITALIC?n.updateLabelElements(n.getSelectionCells(),(function(e){e.style.fontStyle=null,"I"==e.nodeName&&n.replaceElement(e)})):(t&l.t.FONT_UNDERLINE)==l.t.FONT_UNDERLINE&&n.updateLabelElements(n.getSelectionCells(),(function(e){e.style.textDecoration=null,"U"==e.nodeName&&n.replaceElement(e)}));for(var o=0;o<e.length;o++)0==n.model.getChildCount(e[o])&&n.autoSizeCell(e[o],!1)}finally{n.getModel().endUpdate()}}}),null,null,o)})));h("bold",l.t.FONT_BOLD,(function(){document.execCommand("bold",!1,null)}),d.c.CTRL_KEY+"+B"),h("italic",l.t.FONT_ITALIC,(function(){document.execCommand("italic",!1,null)}),d.c.CTRL_KEY+"+I"),h("underline",l.t.FONT_UNDERLINE,(function(){document.execCommand("underline",!1,null)}),d.c.CTRL_KEY+"+U"),this.addAction("fontColor...",(function(){t.menus.pickColor(l.t.STYLE_FONTCOLOR,"forecolor","000000")})),this.addAction("strokeColor...",(function(){t.menus.pickColor(l.t.STYLE_STROKECOLOR)})),this.addAction("fillColor...",(function(){t.menus.pickColor(l.t.STYLE_FILLCOLOR)})),this.addAction("gradientColor...",(function(){t.menus.pickColor(l.t.STYLE_GRADIENTCOLOR)})),this.addAction("backgroundColor...",(function(){t.menus.pickColor(l.t.STYLE_LABEL_BACKGROUNDCOLOR,"backcolor")})),this.addAction("borderColor...",(function(){t.menus.pickColor(l.t.STYLE_LABEL_BORDERCOLOR)})),this.addAction("vertical",(function(){t.menus.toggleStyle(l.t.STYLE_HORIZONTAL,!0)})),this.addAction("shadow",(function(){t.menus.toggleStyle(l.t.STYLE_SHADOW)})),this.addAction("solid",(function(){n.getModel().beginUpdate();try{n.setCellStyles(l.t.STYLE_DASHED,null),n.setCellStyles(l.t.STYLE_DASH_PATTERN,null),t.fireEvent(new l.F("styleChanged","keys",[l.t.STYLE_DASHED,l.t.STYLE_DASH_PATTERN],"values",[null,null],"cells",n.getSelectionCells()))}finally{n.getModel().endUpdate()}})),this.addAction("dashed",(function(){n.getModel().beginUpdate();try{n.setCellStyles(l.t.STYLE_DASHED,"1"),n.setCellStyles(l.t.STYLE_DASH_PATTERN,null),t.fireEvent(new l.F("styleChanged","keys",[l.t.STYLE_DASHED,l.t.STYLE_DASH_PATTERN],"values",["1",null],"cells",n.getSelectionCells()))}finally{n.getModel().endUpdate()}})),this.addAction("dotted",(function(){n.getModel().beginUpdate();try{n.setCellStyles(l.t.STYLE_DASHED,"1"),n.setCellStyles(l.t.STYLE_DASH_PATTERN,"1 4"),t.fireEvent(new l.F("styleChanged","keys",[l.t.STYLE_DASHED,l.t.STYLE_DASH_PATTERN],"values",["1","1 4"],"cells",n.getSelectionCells()))}finally{n.getModel().endUpdate()}})),this.addAction("sharp",(function(){n.getModel().beginUpdate();try{n.setCellStyles(l.t.STYLE_ROUNDED,"0"),n.setCellStyles(l.t.STYLE_CURVED,"0"),t.fireEvent(new l.F("styleChanged","keys",[l.t.STYLE_ROUNDED,l.t.STYLE_CURVED],"values",["0","0"],"cells",n.getSelectionCells()))}finally{n.getModel().endUpdate()}})),this.addAction("rounded",(function(){n.getModel().beginUpdate();try{n.setCellStyles(l.t.STYLE_ROUNDED,"1"),n.setCellStyles(l.t.STYLE_CURVED,"0"),t.fireEvent(new l.F("styleChanged","keys",[l.t.STYLE_ROUNDED,l.t.STYLE_CURVED],"values",["1","0"],"cells",n.getSelectionCells()))}finally{n.getModel().endUpdate()}})),this.addAction("toggleRounded",(function(){if(!n.isSelectionEmpty()&&n.isEnabled()){n.getModel().beginUpdate();try{var e=n.getSelectionCells(),i=n.getCurrentCellStyle(e[0]),o="1"==l.Cb.getValue(i,l.t.STYLE_ROUNDED,"0")?"0":"1";n.setCellStyles(l.t.STYLE_ROUNDED,o),n.setCellStyles(l.t.STYLE_CURVED,null),t.fireEvent(new l.F("styleChanged","keys",[l.t.STYLE_ROUNDED,l.t.STYLE_CURVED],"values",[o,"0"],"cells",n.getSelectionCells()))}finally{n.getModel().endUpdate()}}})),this.addAction("curved",(function(){n.getModel().beginUpdate();try{n.setCellStyles(l.t.STYLE_ROUNDED,"0"),n.setCellStyles(l.t.STYLE_CURVED,"1"),t.fireEvent(new l.F("styleChanged","keys",[l.t.STYLE_ROUNDED,l.t.STYLE_CURVED],"values",["0","1"],"cells",n.getSelectionCells()))}finally{n.getModel().endUpdate()}})),this.addAction("collapsible",(function(){var e=n.view.getState(n.getSelectionCell()),i="1";null!=e&&null!=n.getFoldingImage(e)&&(i="0"),n.setCellStyles("collapsible",i),t.fireEvent(new l.F("styleChanged","keys",["collapsible"],"values",[i],"cells",n.getSelectionCells()))})),this.addAction("setAsDefaultStyle",(function(){n.isEnabled()&&!n.isSelectionEmpty()&&t.setDefaultStyle(n.getSelectionCell())}),null,null,d.c.CTRL_KEY+"+Shift+D"),this.addAction("clearDefaultStyle",(function(){n.isEnabled()&&t.clearDefaultStyle()}),null,null,d.c.CTRL_KEY+"+Shift+R"),this.addAction("addWaypoint",(function(){var e=n.getSelectionCell();if(null!=e&&n.getModel().isEdge(e)){var t=i.graph.selectionCellsHandler.getHandler(e);if(t instanceof l.A){for(var o=n.view.translate,r=n.view.scale,a=o.x,s=o.y,d=n.getModel().getParent(e),h=n.getCellGeometry(d);n.getModel().isVertex(d)&&null!=h;)a+=h.x,s+=h.y,d=n.getModel().getParent(d),h=n.getCellGeometry(d);o=Math.round(n.snap(n.popupMenuHandler.triggerX/r-a)),e=Math.round(n.snap(n.popupMenuHandler.triggerY/r-s)),t.addPointAt(t.state,o,e)}}})),this.addAction("removeWaypoint",(function(){var e=t.actions.get("removeWaypoint");null!=e.handler&&e.handler.removePoint(e.handler.state,e.index)})),this.addAction("clearWaypoints",(function(){var e=n.getSelectionCells();if(null!=e){e=n.addAllEdges(e),n.getModel().beginUpdate();try{for(var t=0;t<e.length;t++){var i,l=e[t];n.getModel().isEdge(l)&&null!=(i=n.getCellGeometry(l))&&((i=i.clone()).points=null,n.getModel().setGeometry(l,i))}}finally{n.getModel().endUpdate()}}}),null,null,"Alt+Shift+C"),r=this.addAction("subscript",l.Cb.bind(this,(function(){n.cellEditor.isContentEditing()&&document.execCommand("subscript",!1,null)})),null,null,d.c.CTRL_KEY+"+,"),r=this.addAction("superscript",l.Cb.bind(this,(function(){n.cellEditor.isContentEditing()&&document.execCommand("superscript",!1,null)})),null,null,d.c.CTRL_KEY+"+."),r=this.addAction("indent",l.Cb.bind(this,(function(){n.cellEditor.isContentEditing()&&document.execCommand("indent",!1,null)})),null,null,"Shift+Tab"),(r=this.addAction("layers",l.Cb.bind(this,(function(){null==this.layersWindow?(this.layersWindow=new s.c(t,document.body.offsetWidth-280,120,220,196),this.layersWindow.window.addListener("show",(function(){t.fireEvent(new l.F("layers"))})),this.layersWindow.window.addListener("hide",(function(){t.fireEvent(new l.F("layers"))})),this.layersWindow.window.setVisible(!0),t.fireEvent(new l.F("layers")),this.layersWindow.init()):this.layersWindow.window.setVisible(!this.layersWindow.window.isVisible())})),null,null,d.c.CTRL_KEY+"+Shift+L")).setToggleAction(!0),r.setSelectedCallback(l.Cb.bind(this,(function(){return null!=this.layersWindow&&this.layersWindow.window.isVisible()}))),(r=this.addAction("formatPanel",l.Cb.bind(this,(function(){t.toggleFormatPanel()})),null,null,d.c.CTRL_KEY+"+Shift+P")).setToggleAction(!0),r.setSelectedCallback(l.Cb.bind(this,(function(){return 0<t.formatWidth}))),(r=this.addAction("outline",l.Cb.bind(this,(function(){null==this.outlineWindow?(this.outlineWindow=new s.d(t,document.body.offsetWidth-260,100,180,180),this.outlineWindow.window.addListener("show",(function(){t.fireEvent(new l.F("outline"))})),this.outlineWindow.window.addListener("hide",(function(){t.fireEvent(new l.F("outline"))})),this.outlineWindow.window.setVisible(!0),t.fireEvent(new l.F("outline"))):this.outlineWindow.window.setVisible(!this.outlineWindow.window.isVisible())})),null,null,d.c.CTRL_KEY+"+Shift+O")).setToggleAction(!0),r.setSelectedCallback(l.Cb.bind(this,(function(){return null!=this.outlineWindow&&this.outlineWindow.window.isVisible()})))},h.prototype.addAction=function(e,t,i,n,o){var r="..."==e.substring(e.length-3)?(e=e.substring(0,e.length-3),l.ob.get(e)+"..."):l.ob.get(e);return this.put(e,new c(r,t,i,n,o))},h.prototype.put=function(e,t){return this.actions[e]=t},h.prototype.get=function(e){return this.actions[e]},l.Cb.extend(c,l.G),c.prototype.createFunction=function(e){return e},c.prototype.setEnabled=function(e){this.enabled!=e&&(this.enabled=e,this.fireEvent(new l.F("stateChanged")))},c.prototype.isEnabled=function(){return this.enabled},c.prototype.setToggleAction=function(e){this.toggleAction=e},c.prototype.setSelectedCallback=function(e){this.selectedCallback=e},c.prototype.isSelected=function(){return this.selectedCallback()};var p=i(410),g=i(469),A=i(443),m=i(409),b=u(18,28,'<path d="m 6 26 L 12 26 L 12 12 L 18 12 L 9 1 L 1 12 L 6 12 z" stroke="#fff" fill="'.concat(d.e.ARROW_FILL,'"/>')),y=u(26,18,'<path d="m 1 6 L 14 6 L 14 1 L 26 9 L 14 18 L 14 12 L 1 12 z" stroke="#fff" fill="'.concat(d.e.ARROW_FILL,'"/>')),f=u(18,26,'<path d="m 6 1 L 6 14 L 1 14 L 9 26 L 18 14 L 12 14 L 12 1 z" stroke="#fff" fill="'.concat(d.e.ARROW_FILL,'"/>')),w=u(28,18,'<path d="m 1 9 L 12 1 L 12 6 L 26 6 L 26 12 L 12 12 L 12 18 z" stroke="#fff" fill="'.concat(d.e.ARROW_FILL,'"/>')),E=new l.S(m.n,38,38),C=u(26,26,'<circle cx="13" cy="13" r="12" stroke="#fff" fill="'.concat(d.e.ARROW_FILL,'"/>'));function S(e,t){var i=this;this.editorUi=e,this.container=t,this.palettes=new Object,this.taglist=new Object,this.showTooltips=!0,this.graph=e.createTemporaryGraph(this.editorUi.editor.graph.getStylesheet()),this.graph.cellRenderer.minSvgStrokeWidth=this.minThumbStrokeWidth,this.graph.cellRenderer.antiAlias=this.thumbAntiAlias,this.graph.container.style.visibility="hidden",this.graph.foldingEnabled=!1,document.body.appendChild(this.graph.container),this.pointerUpHandler=l.Cb.bind(this,(function(){i.showTooltips=!0})),l.E.addListener(document,l.k.IS_POINTER?"pointerup":"mouseup",this.pointerUpHandler),this.pointerDownHandler=l.Cb.bind(this,(function(){i.showTooltips=!1,i.hideTooltip()})),l.E.addListener(document,l.k.IS_POINTER?"pointerdown":"mousedown",this.pointerDownHandler),this.pointerMoveHandler=l.Cb.bind(this,(function(e){for(var t=l.E.getSource(e);null!=t;){if(t==this.currentElt)return;t=t.parentNode}this.hideTooltip()})),l.E.addListener(document,l.k.IS_POINTER?"pointermove":"mousemove",this.pointerMoveHandler),this.pointerOutHandler=l.Cb.bind(this,(function(e){null==e.toElement&&null==e.relatedTarget&&this.hideTooltip()})),l.E.addListener(document,l.k.IS_POINTER?"pointerout":"mouseout",this.pointerOutHandler),l.E.addListener(t,"scroll",l.Cb.bind(this,(function(){this.showTooltips=!0,this.hideTooltip()}))),this.init()}S.prototype.triangleUp=b,S.prototype.triangleRight=y,S.prototype.triangleDown=f,S.prototype.triangleLeft=w,S.prototype.refreshTarget=E,S.prototype.roundDrop=C,S.prototype.init=function(){this.addSearchPalette(!0),this.addGeneralPalette(!0),this.addStencilPalette("flowchart",l.ob.get("flowchart"),Object(g.a)("flowchart.xml"),";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",null,null,null,null,null,!0),this.addMiscPalette(!1),this.addAdvancedPalette(!1),this.addBasicPalette(""),this.addStencilPalette("arrows",l.ob.get("arrows"),Object(g.a)("arrows.xml"),";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2"),this.addUmlPalette(!1),this.addBpmnPalette("",!1),this.addImagePalette("clipart",l.ob.get("clipart"),"","_128x128.png",["Earth_globe","Empty_Folder","Full_Folder","Gear","Lock","Software","Virus","Email","Database","Router_Icon","iPad","iMac","Laptop","MacBook","Monitor_Tower","Printer","Server_Tower","Workstation","Firewall_02","Wireless_Router_N","Credit_Card","Piggy_Bank","Graph","Safe","Shopping_Cart","Suit1","Suit2","Suit3","Pilot1","Worker1","Soldier1","Doctor1","Tech1","Security1","Telesales1"],null,{Wireless_Router_N:"wireless router switch wap wifi access point wlan",Router_Icon:"router switch"})},S.prototype.collapsedImage=m.f,S.prototype.expandedImage=m.h,S.prototype.searchImage=m.p,S.prototype.dragPreviewBorder="1px dashed black",S.prototype.enableTooltips=!0,S.prototype.tooltipBorder=16,S.prototype.tooltipDelay=300,S.prototype.dropTargetDelay=200,S.prototype.gearImage=A.a,S.prototype.thumbWidth=42,S.prototype.thumbHeight=42,S.prototype.minThumbStrokeWidth=1,S.prototype.thumbAntiAlias=!1,S.prototype.thumbPadding=5<=document.documentMode?2:3,S.prototype.thumbBorder=2,S.prototype.thumbPadding=5<=document.documentMode?0:1,S.prototype.thumbBorder=1,S.prototype.thumbWidth=32,S.prototype.thumbHeight=30,S.prototype.minThumbStrokeWidth=1.3,S.prototype.thumbAntiAlias=!0,S.prototype.sidebarTitleSize=9,S.prototype.sidebarTitles=!1,S.prototype.tooltipTitles=!0,S.prototype.maxTooltipWidth=400,S.prototype.maxTooltipHeight=400,S.prototype.addStencilsToIndex=!0,S.prototype.defaultImageWidth=80,S.prototype.defaultImageHeight=80,S.prototype.getTooltipOffset=function(){return new l.hb(0,0)},S.prototype.showTooltip=function(e,t,i,n,o,a){var s;this.enableTooltips&&this.showTooltips&&this.currentElt!=e&&(null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null),s=l.Cb.bind(this,(function(){null==this.tooltip&&(this.tooltip=document.createElement("div"),this.tooltip.className="geSidebarTooltip",this.tooltip.style.zIndex=l.jb.prototype.zIndex-1,document.body.appendChild(this.tooltip),this.graph2=new p.a(this.tooltip,null,null,this.editorUi.editor.graph.getStylesheet()),this.graph2.resetViewOnRootChange=!1,this.graph2.foldingEnabled=!1,this.graph2.gridEnabled=!1,this.graph2.autoScroll=!1,this.graph2.setTooltips(!1),this.graph2.setConnectable(!1),this.graph2.setEnabled(!1)),this.graph2.model.clear(),this.graph2.view.setTranslate(this.tooltipBorder,this.tooltipBorder),i>this.maxTooltipWidth||n>this.maxTooltipHeight?this.graph2.view.scale=Math.round(100*Math.min(this.maxTooltipWidth/i,this.maxTooltipHeight/n))/100:this.graph2.view.scale=1,this.tooltip.style.display="block",this.graph2.labelsVisible=null==a||a;var s=l.k.NO_FO,d=(s=(l.k.NO_FO=r.b.prototype.originalNoForeignObject,this.graph2.addCells(t),l.k.NO_FO=s,this.graph2.getGraphBounds())).width+2*this.tooltipBorder+4,h=s.height+2*this.tooltipBorder,c=(l.k.IS_QUIRKS?(h+=4,this.tooltip.style.overflow="hidden"):this.tooltip.style.overflow="visible",this.tooltip.style.width=d+"px",d),u=(this.tooltipTitles&&null!=o&&0<o.length?(null==this.tooltipTitle?(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.style.borderTop="1px solid gray",this.tooltipTitle.style.textAlign="center",this.tooltipTitle.style.width="100%",this.tooltipTitle.style.overflow="hidden",this.tooltipTitle.style.position="absolute",this.tooltipTitle.style.paddingTop="6px",this.tooltipTitle.style.bottom="6px",this.tooltip.appendChild(this.tooltipTitle)):this.tooltipTitle.innerHTML="",this.tooltipTitle.style.display="",l.Cb.write(this.tooltipTitle,o),c=Math.min(this.maxTooltipWidth,Math.max(d,this.tooltipTitle.scrollWidth+4)),h+=u=this.tooltipTitle.offsetHeight+10,this.tooltipTitle.style.marginTop=2-u+"px"):null!=this.tooltipTitle&&null!=this.tooltipTitle.parentNode&&(this.tooltipTitle.style.display="none"),d<c&&(this.tooltip.style.width=c+"px"),this.tooltip.style.height=h+"px",-Math.round(s.x-this.tooltipBorder)+(d<c?(c-d)/2:0)),g=(c=-Math.round(s.y-this.tooltipBorder),d=document.body,s=document.documentElement,this.getTooltipOffset());d=Math.max(d.clientHeight||0,s.clientHeight),s=this.container.clientWidth+this.editorUi.splitSize+3+this.editorUi.container.offsetLeft+g.x,d=Math.min(d-h-20,Math.max(0,this.editorUi.container.offsetTop+this.container.offsetTop+e.offsetTop-this.container.scrollTop-h/2+16))+g.y;0!=u||0!=c?this.graph2.view.canvas.setAttribute("transform","translate("+u+","+c+")"):this.graph2.view.canvas.removeAttribute("transform"),this.tooltip.style.position="absolute",this.tooltip.style.left=s+"px",this.tooltip.style.top=d+"px"})),null!=this.tooltip&&"none"!=this.tooltip.style.display?s():this.thread=window.setTimeout(s,this.tooltipDelay),this.currentElt=e)},S.prototype.hideTooltip=function(){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null),null!=this.tooltip&&(this.tooltip.style.display="none",this.currentElt=null)},S.prototype.addDataEntry=function(e,t,i,n,o){return this.addEntry(e,l.Cb.bind(this,(function(){return this.createVertexTemplateFromData(o,t,i,n)})))},S.prototype.addEntries=function(e){for(var t=0;t<e.length;t++)l.Cb.bind(this,(function(e){var t=e.data,i=null!=e.title?e.title:"";null!=e.tags&&(i+=" "+e.tags),null!=t&&0<i.length?this.addEntry(i,l.Cb.bind(this,(function(){t=this.editorUi.convertDataUri(t);var i="shape=image;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;";return"fixed"==e.aspect&&(i+="aspect=fixed;"),this.createVertexTemplate(i+"image="+t,e.w,e.h,"",e.title||"",!1,!1,!0)}))):null!=e.xml&&0<i.length&&this.addEntry(i,l.Cb.bind(this,(function(){var t=this.editorUi.stringToCells(p.a.decompress(e.xml));return this.createVertexTemplateFromCells(t,e.w,e.h,e.title||"",!0,!1,!0)})))}))(e[t])},S.prototype.addEntry=function(e,t){if(null!=this.taglist&&null!=e&&0<e.length)for(var i=e.toLowerCase().replace(/[\/\,\(\)]/g," ").split(" "),n=l.Cb.bind(this,(function(e){var i;null!=e&&1<e.length&&("object"!=typeof(i=this.taglist[e])&&(i={entries:[],dict:new l.w},this.taglist[e]=i),null==i.dict.get(t))&&(i.dict.put(t,t),i.entries.push(t))})),o=0;o<i.length;o++){n(i[o]);var r=i[o].replace(/\.*\d*$/,"");r!=i[o]&&n(r)}return t},S.prototype.searchEntries=function(e,t,i,n){if(null!=this.taglist&&null!=e){for(var o=e.toLowerCase().split(" "),r=new l.w,a=(i+1)*t,s=[],d=0,h=0;h<o.length;h++)if(0<o[h].length){var c=this.taglist[o[h]],u=new l.w;if(null!=c){for(var p=c.entries,g=(s=[],0);g<p.length;g++)if(c=p[g],0==d==(null==r.get(c))&&(u.put(c,c),s.push(c),h==o.length-1)&&s.length==a)return void n(s.slice(i*t,a),a,!0,o)}else s=[];r=u,d++}e=s.length,n(s.slice(i*t,(i+1)*t),e,!1,o)}else n([],null,null,o)},S.prototype.filterTags=function(e){if(null==e)return null;for(var t=e.split(" "),i=[],n={},l=0;l<t.length;l++)null==n[t[l]]&&(n[t[l]]="1",i.push(t[l]));return i.join(" ")},S.prototype.cloneCell=function(e,t){return e=e.clone(),null!=t&&(e.value=t),e},S.prototype.addSearchPalette=function(e){var t,i,n=document.createElement("div"),o=(n.style.visibility="hidden",this.container.appendChild(n),document.createElement("div")),a=(o.className="geSidebar",o.style.boxSizing="border-box",o.style.overflow="hidden",o.style.width="100%",o.style.padding="8px",o.style.paddingTop="14px",o.style.paddingBottom="0px",e||(o.style.display="none"),document.createElement("div")),s=(a.style.whiteSpace="nowrap",a.style.textOverflow="clip",a.style.paddingBottom="8px",a.style.cursor="default",document.createElement("input")),d=(s.setAttribute("placeholder",l.ob.get("searchShapes")),s.setAttribute("type","text"),s.style.fontSize="12px",s.style.overflow="hidden",s.style.boxSizing="border-box",s.style.border="solid 1px #d5d5d5",s.style.borderRadius="4px",s.style.width="100%",s.style.outline="none",s.style.padding="6px",s.style.paddingRight="20px",a.appendChild(s),document.createElement("img")),h=(d.setAttribute("src",S.prototype.searchImage),d.setAttribute("title",l.ob.get("search")),d.style.position="relative",d.style.left="-18px",l.k.IS_QUIRKS?(s.style.height="28px",d.style.top="-4px"):d.style.top="1px",d.style.background="url('"+this.editorUi.editor.transparentImage+"')",a.appendChild(d),o.appendChild(a),document.createElement("center")),c=l.Cb.button(l.ob.get("moreResults"),(function(){t()})),u=(c.style.display="none",c.style.lineHeight="normal",c.style.marginTop="4px",c.style.marginBottom="8px",h.style.paddingTop="4px",h.style.paddingBottom="4px",h.appendChild(c),o.appendChild(h),""),p=!1,g=!1,A=0,m=new Object,b=l.Cb.bind(this,(function(){p=!1,this.currentSearch=null;for(var e=o.firstChild;null!=e;){var t=e.nextSibling;e!=a&&e!=h&&e.parentNode.removeChild(e),e=t}}));l.E.addListener(d,"click",(function(){d.getAttribute("src")==r.a.prototype.closeImage&&(d.setAttribute("src",S.prototype.searchImage),d.setAttribute("title",l.ob.get("search")),c.style.display="none",s.value="",u="",b()),s.focus()})),t=l.Cb.bind(this,(function(){var e;i=4*Math.max(1,Math.floor(this.container.clientWidth/(this.thumbWidth+10))),this.hideTooltip(),""!=s.value?null!=h.parentNode&&(u!=s.value&&(b(),u=s.value,m=new Object,g=!1,A=0),p||g||(c.setAttribute("disabled","true"),c.style.display="",c.style.cursor="wait",c.innerHTML=l.ob.get("loading")+"...",p=!0,e=new Object,this.currentSearch=e,this.searchEntries(u,i,A,l.Cb.bind(this,(function(t,n,r,a){if(this.currentSearch==e){p=!1,A++,this.insertSearchHint(o,u,i,A,t=null!=t?t:[],n,r,a),0==t.length&&1==A&&(u=""),null!=h.parentNode&&h.parentNode.removeChild(h);for(var s=0;s<t.length;s++)try{var d=t[s]();null==m[d.innerHTML]&&(m[d.innerHTML]="1",o.appendChild(d))}catch(t){}r?(c.removeAttribute("disabled"),c.innerHTML=l.ob.get("moreResults")):(c.innerHTML=l.ob.get("reset"),c.style.display="none",g=!0),c.style.cursor="",o.appendChild(h)}})),l.Cb.bind(this,(function(){c.style.cursor=""}))))):(b(),s.value="",u="",m=new Object,c.style.display="none",g=!1,s.focus())})),l.E.addListener(s,"keydown",l.Cb.bind(this,(function(e){13==e.keyCode&&(t(),l.E.consume(e))}))),l.E.addListener(s,"keyup",l.Cb.bind(this,(function(){""==s.value?(d.setAttribute("src",S.prototype.searchImage),d.setAttribute("title",l.ob.get("search"))):(d.setAttribute("src",r.a.prototype.closeImage),d.setAttribute("title",l.ob.get("reset"))),""==s.value?(g=!0,c.style.display="none"):s.value!=u?(c.style.display="none",g=!1):p||(c.style.display=g?"none":"")}))),l.E.addListener(s,"mousedown",(function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0})),l.E.addListener(s,"selectstart",(function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0})),e=document.createElement("div");e.appendChild(o),this.container.appendChild(e),this.palettes.search=[n,e]},S.prototype.insertSearchHint=function(e,t,i,n,o){0==o.length&&1==n&&((o=document.createElement("div")).className="geTitle",o.style.cssText="background-color:transparent;border-color:transparent;color:gray;padding:6px 0px 0px 0px !important;margin:4px 8px 4px 8px;text-align:center;cursor:default !important",l.Cb.write(o,l.ob.get("noResultsFor",[t])),e.appendChild(o))},S.prototype.addGeneralPalette=function(e){var t="line lines connector connectors connection connections arrow arrows ";t=[this.createVertexTemplateEntry("rounded=0;whiteSpace=wrap;html=1;",120,60,"","Rectangle",null,null,"rect rectangle box"),this.createVertexTemplateEntry("rounded=1;whiteSpace=wrap;html=1;",120,60,"","Rounded Rectangle",null,null,"rounded rect rectangle box"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;",40,20,"Text","Text",null,null,"text textbox textarea label"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;",190,120,"<h1>Heading</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>","Textbox",null,null,"text textbox textarea"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",120,80,"","Ellipse",null,null,"oval ellipse state"),this.createVertexTemplateEntry("whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Square",null,null,"square"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Circle",null,null,"circle"),this.createVertexTemplateEntry("shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;",120,60,"","Process",null,null,"process task"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;",80,80,"","Diamond",null,null,"diamond rhombus if condition decision conditional question test"),this.createVertexTemplateEntry("shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;",120,60,"","Parallelogram"),this.createVertexTemplateEntry("shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;",120,80,"","Hexagon",null,null,"hexagon preparation"),this.createVertexTemplateEntry("triangle;whiteSpace=wrap;html=1;",60,80,"","Triangle",null,null,"triangle logic inverter buffer"),this.createVertexTemplateEntry("shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;",60,80,"","Cylinder",null,null,"cylinder data database"),this.createVertexTemplateEntry("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80,"","Cloud",null,null,"cloud network"),this.createVertexTemplateEntry("shape=document;whiteSpace=wrap;html=1;boundedLbl=1;",120,80,"","Document"),this.createVertexTemplateEntry("shape=internalStorage;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Internal Storage"),this.createVertexTemplateEntry("shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;",120,80,"","Cube"),this.createVertexTemplateEntry("shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Step"),this.createVertexTemplateEntry("shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;",120,60,"","Trapezoid"),this.createVertexTemplateEntry("shape=tape;whiteSpace=wrap;html=1;",120,100,"","Tape"),this.createVertexTemplateEntry("shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;",80,100,"","Note"),this.createVertexTemplateEntry("shape=card;whiteSpace=wrap;html=1;",80,100,"","Card"),this.createVertexTemplateEntry("shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;",120,80,"","Callout",null,null,"bubble chat thought speech message"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;",30,60,"Actor","Actor",!1,null,"user person human stickman"),this.createVertexTemplateEntry("shape=xor;whiteSpace=wrap;html=1;",60,80,"","Or",null,null,"logic or"),this.createVertexTemplateEntry("shape=or;whiteSpace=wrap;html=1;",60,80,"","And",null,null,"logic and"),this.createVertexTemplateEntry("shape=dataStorage;whiteSpace=wrap;html=1;",100,80,"","Data Storage"),this.addEntry("curve",l.Cb.bind(this,(function(){var e=new l.d("",new l.I(0,0,50,50),"curved=1;endArrow=classic;html=1;");return e.geometry.setTerminalPoint(new l.hb(0,50),!0),e.geometry.setTerminalPoint(new l.hb(50,0),!1),e.geometry.points=[new l.hb(50,50),new l.hb(0,0)],e.geometry.relative=!0,e.edge=!0,this.createEdgeTemplateFromCells([e],e.geometry.width,e.geometry.height,"Curve")}))),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;startArrow=classic;html=1;",50,50,"","Bidirectional Arrow",null,t+"bidirectional"),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;html=1;",50,50,"","Arrow",null,t+"directional directed"),this.createEdgeTemplateEntry("shape=link;html=1;",50,50,"","Link",null,t+"link"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;",50,50,"","Dashed Line",null,t+"dashed undirected no"),this.createEdgeTemplateEntry("endArrow=none;html=1;",50,50,"","Line",null,t+"simple undirected plain blank no"),this.createEdgeTemplateEntry("endArrow=classic;startArrow=classic;html=1;",50,50,"","Bidirectional Connector",null,t+"bidirectional"),this.createEdgeTemplateEntry("endArrow=classic;html=1;",50,50,"","Directional Connector",null,t+"directional directed")];this.addPaletteFunctions("general",l.ob.get("general"),null==e||e,t)},S.prototype.addBasicPalette=function(){this.addStencilPalette("basic",l.ob.get("basic"),Object(g.a)("basic.xml"),";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",null,null,null,null,[this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;right=0;top=0;bottom=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;left=0;fillColor=none;",120,60,"","Partial Rectangle")])},S.prototype.addMiscPalette=function(e){var t=this,i="line lines connector connectors connection connections arrow arrows ";i=[this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;",100,40,"Title","Title",null,null,"text heading title"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ul><li>Value 1</li><li>Value 2</li><li>Value 3</li></ul>","Unordered List"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ol><li>Value 1</li><li>Value 2</li><li>Value 3</li></ol>","Ordered List"),this.addDataEntry("table",180,120,"Table 1","7ZjJTsMwEIafJleUhZZybVgucAFewDTT2pLjiewpaXl6xolLVQFqWBJArZRKns2xv5H7y4myvFxdW1HJWyxAR9lllOUWkdpRucpB6yiNVRFlF1GaxvyL0qsPokkTjSthwVCXgrQteBJ6Ca2ndTha6+BwUlR+SOLRu6aSSl7mRcLDWiqC+0rMfLzmTbDPkbB0r569K2Z7hoaEMmBDzQy1FpVTzWRthlS6uBFrXNLmNRtrGpYHlmD14RYbV9jfNWAJZNecUquCZMiYtBhiCWohN2WBTSxc61i81m6J8SBAex9g1h0gL5mU0HcwI2EWXVi+ZVVYrB6EXQAFR4XKENjLJ6bhgm+utM5Ro0du0PgXEVYhqGG+qX1EIiyDYQOY10kbKKMpP4wpj09G0Yh3k7OdbG1+fLqlHI0jy432c4BwVIPr3MD0aw08/YH+nfbbP2N89rZ/324NMsq5xppNqYoCTFfG2V7G454Qjw4c8WoX7wDEx0fiO3/wAyA/O+pAbzqw3m3TELIwOZQTdPZrsnB+4IiHl4UkPiIfWheS5CgMfQvDZEBhSD5xY/7fZyjZf63u7dD0fKv++5B/QRwO5ia8h3mP6sDm9tNeE9v58vcC"),this.addDataEntry("table",180,120,"Table 2","7ZjBbqMwEIafhmuFISTptbTbS/eyrfbuBie2ZDzITEqyT79jMMlGWVTUBlqVSkTyjGeM+SbDLxPEab67t7yQPyETOojvgji1ANiM8l0qtA6iUGVBfBtEUUi/IPrRMcvq2bDgVhjskxA1CS9cb0XjaRwl7rV3lJIXboj82bluJOa0zVtGw0oqFI8FX7n5ih6CfCVyi4/qj3OFZK/AIFdGWJ+zAq15Uap6sSZCKp098D1ssb1Na7nobW4eKL/00Raqf02/f2FR7DoZ1C4P4F5ALtDuKaRSGUofsWw4hVKojWzTPLyQl41jc8g9IqWBp/p/wnF/wrRlVFz/EivkZtMH9jnMzELxxO1GoHcUoAwKe/dCNFpoa6V1ChpcTQwYdyOEwk9qsW5znwER8ha8B3NYtIaS3NBFmNLwKgkSepqUbHa06XLhFlMwJVr6J7g1BC+xEiX2LWD0tgLOLlC/2Vn9ftfDKGQXLaQxLvpYyHfXCIjpWkNFplRZJkxf2PGrsOcDsU46WV+2aT49690p5xHQzzvRx5NEf3j3j8B+8S0Rg0nE/rRMYyjGsrOVZl+0lRYfphjXnayTabEeXzFY2Ml+Pkn2Y0oGY9+aMbRmLEfUDHZ+EG+bafFFm4m9fiofrHvOD+Ut7eXEaH+AbnSfqK+nCX9A4SDz+DGxnjv51vgX"),this.addDataEntry("table title",180,120,"Table with Title 1","7ZhRb6MwDMc/Da8nAmPdvZbu9nJ7WfcFMnAhUohR4o12n34OpKumrmqlDXa6VqJS/Lcdkp8bWSFK82Z9Z2Vb32MJOkpvozS3iDSMmnUOWkdJrMooXURJEvMvSv4c8IreG7fSgqFTEpIh4UXqZxiUR/mkYVAdbXRQXS1bP6Tem85ranitC8HDrlYEy1YW3t/xTlhzJC0t1auX0piFAg1JZcCGpAK1lq1T/WyLPqJWuvwrN/hM2/dsrfmKs5dhMT5balUZHhe8Sz/lPOwCLMH6IIleChjuABsgu+GQTpVUh4ibgVZcg6rqbVoWROkGoXrP3YHlQWD7Oed0j/NBxLxkUlI/QEHSVKfQ3odZWmwfpa2AgtCi8qhuX5iGC9pKaZ2jRl8Tg8a/iLANTg2rbe4TEmETDBvAvE/aQ8nm/DCmPP6VRRnvJmdb7Gx+fLilHI0jy/8EPwdIRx04OrWAyecF3ATEoUzH6nn1DeW8GrecxvjoXTm/XClksiuNHZu1KkswpyJPj56Z65EQZ2eOeP0R7wTEry/E+4RkOuSzS1sYuy3MJmwLN+dygmY/1hZ+nzni6duCiC/Ip+4LQlwaw9iNQYgJO4PYv2j/p4dIHL9mj3ZqRr5l//uQf6A7nM1V+AjzEdsDm7svgr3vwwfDNw=="),this.addDataEntry("table title",180,150,"Table with Title 2","7Zhdb5swFIZ/DbcTHyVrbiFdb7Kbptq9Cw5YMj7IPi1kv37HYJK1FDWbQoOmSUSyz4dt3id+L/CitGrvNavL75Bz6UV3XpRqAOxHVZtyKb3QF7kXbbww9Onnhd8mskGX9WumucJzGsK+4YXJZ95HHtmT5H3U4EG6qClZbYfYZaOkxIrOuglo2JQC+a5mmc039CYUM8g07sRPG4p8CmSgkAnFtWvKQEpWG9GttukqSiHzLTvAMw77DLNkL1qeP0BjXLeGZkuLGde6p8V37qw2zaQoFI0zEsHumLiX5Bp5OylUF3Iq3XOoOOoDlTQix9JV3PZi+iUXRTm0xS7ITB8ojr0n3WngpH8fQzTCMEmAjoyCyQeeIVPFOTDGWuca6kemC44uUIOwUt29kBpHVYWUKUiwyBQouxFC7ZKS74feJ0CEaiDjhDku2okSJ/SQTKn/JfZiepuU5sFpTo8t15iCMqjpj2LX4Mxgww2eCzB8H+DBSewwfcQzugDOmxHO4KI8lbLVJ55/jMp/gwpI2r2EhqalyHOuztU8+vDS3MykcTzS+Ec3DP2Faz24U1+bGNpQqGLbd65mgNG+BvH7BZgLzupf8LO34JblZ6tP9LOvI5yX5bkcP1tdzc9uJ/1s4VrP52cTMK7gZ+v/fja3n60/0c8Cf8QzWvYl++s7tL6aoQXBpKMtXOz5HG2CxvyORtPTR4Uu9+qbwy8="),this.addDataEntry("crossfunctional cross-functional cross functional flowchart swimlane table",400,400,"Cross-Functional Flowchart","7ZhRb5swEMc/DY+bMCRt97jQpi+tVC2fwINbbMnYyD4C6aefjaHpBrTRlNCoTALJPp9t+P25O5kgTvL6XtOCPaoMRBDfBXGilULfyusEhAiikGdBfBtEUWjvIFqPjJJmNCyoBonHTIj8hB0VJXiL3dyYL+tSpsiVpM55LVSVMqrROxvci9bZMFq4JtKfzrRKGRfZA92rEjtr11tpVT1wCcYOhM5ViTKXry0G7RYb/uwWXDgDw9wCuSW2WTGOsClo6gYri8uvIGhheLN1s4KGtNSG7+AHGL+Os0JdUJm1nUJxiaDvdhZQt/EvJXHTvpTbjAq+lbadgnO1hhYSaIR6FHRjainfg8oB9d66VDxD5j0WoRcjZMC3DP8yUuMN25e5B91so5VuWMa4J+P3FJW2JtLXrOK5oNLJxZTmz/blqXhNp3mO5cpe9smS8OsyWNp5ie2TQ99ezl1joqRBTXmDAajBCgxejprHKBcNK7fvBPIz3hOSRCcQctET8olRA+8JmSopIW2j8GOD6Sji8TDxepT4C9yTE1+OEo/mQ5xcTYn8ahR5PB/k0c2UyK9HC8SbX/mnLBAnqAlD8XK+onDTE+/fw+TiQF9fTin4Nl/O0xYAEs6X9LR5n5Ae6S7xv1lr/yf+4cQ/pN75Ej/pH88/UZyQkRPzR6R+0j9Bz4f0xMm/f8adD+qzZn/bPfw5bMb++LH4Gw=="),this.createVertexTemplateEntry("text;html=1;strokeColor=#c0c0c0;fillColor=#ffffff;overflow=fill;rounded=0;",280,160,'<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr style="background-color:#A7C942;color:#ffffff;border:1px solid #98bf21;"><th align="left">Title 1</th><th align="left">Title 2</th><th align="left">Title 3</th></tr><tr style="border:1px solid #98bf21;"><td>Value 1</td><td>Value 2</td><td>Value 3</td></tr><tr style="background-color:#EAF2D3;border:1px solid #98bf21;"><td>Value 4</td><td>Value 5</td><td>Value 6</td></tr><tr style="border:1px solid #98bf21;"><td>Value 7</td><td>Value 8</td><td>Value 9</td></tr><tr style="background-color:#EAF2D3;border:1px solid #98bf21;"><td>Value 10</td><td>Value 11</td><td>Value 12</td></tr></table>',"HTML Table 1"),this.createVertexTemplateEntry("text;html=1;strokeColor=#c0c0c0;fillColor=none;overflow=fill;",180,140,'<table border="0" width="100%" height="100%" style="width:100%;height:100%;border-collapse:collapse;"><tr><td align="center">Value 1</td><td align="center">Value 2</td><td align="center">Value 3</td></tr><tr><td align="center">Value 4</td><td align="center">Value 5</td><td align="center">Value 6</td></tr><tr><td align="center">Value 7</td><td align="center">Value 8</td><td align="center">Value 9</td></tr></table>',"HTML Table 2"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;overflow=fill;",180,140,'<table border="1" width="100%" height="100%" style="width:100%;height:100%;border-collapse:collapse;"><tr><td align="center">Value 1</td><td align="center">Value 2</td><td align="center">Value 3</td></tr><tr><td align="center">Value 4</td><td align="center">Value 5</td><td align="center">Value 6</td></tr><tr><td align="center">Value 7</td><td align="center">Value 8</td><td align="center">Value 9</td></tr></table>',"HTML Table 3"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;overflow=fill;",160,140,'<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr><th align="center"><b>Title</b></th></tr><tr><td align="center">Section 1.1\nSection 1.2\nSection 1.3</td></tr><tr><td align="center">Section 2.1\nSection 2.2\nSection 2.3</td></tr></table>',"HTML Table 4"),this.addEntry("link hyperlink",l.Cb.bind(this,(function(){var e=new l.d("Link",new l.I(0,0,60,40),"text;html=1;strokeColor=none;fillColor=none;whiteSpace=wrap;align=center;verticalAlign=middle;fontColor=#0000EE;fontStyle=4;");return e.vertex=!0,this.graph.setLinkForCell(e,"https://www.draw.io"),this.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Link")}))),this.addEntry("timestamp date time text label",l.Cb.bind(this,(function(){var e=new l.d("%date{ddd mmm dd yyyy HH:MM:ss}%",new l.I(0,0,160,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return e.vertex=!0,this.graph.setAttributeForCell(e,"placeholders","1"),this.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Timestamp")}))),this.addEntry("variable placeholder metadata hello world text label",l.Cb.bind(this,(function(){var e=new l.d("%name% Text",new l.I(0,0,80,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return e.vertex=!0,this.graph.setAttributeForCell(e,"placeholders","1"),this.graph.setAttributeForCell(e,"name","Variable"),this.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Variable")}))),this.createVertexTemplateEntry("shape=ext;double=1;rounded=0;whiteSpace=wrap;html=1;",120,80,"","Double Rectangle",null,null,"rect rectangle box double"),this.createVertexTemplateEntry("shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;",120,80,"","Double Rounded Rectangle",null,null,"rounded rect rectangle box double"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;",100,60,"","Double Ellipse",null,null,"oval ellipse start end state double"),this.createVertexTemplateEntry("shape=ext;double=1;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Square",null,null,"double square"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Circle",null,null,"double circle"),this.createEdgeTemplateEntry("rounded=0;comic=1;strokeWidth=2;endArrow=blockThin;html=1;fontFamily=Comic Sans MS;fontStyle=1;",50,50,"","Comic Arrow"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;comic=1;strokeWidth=2;fontFamily=Comic Sans MS;fontStyle=1;",120,60,"RECTANGLE","Comic Rectangle",!0,null,"comic rectangle rect box text retro"),this.createVertexTemplateEntry("rhombus;html=1;align=center;whiteSpace=wrap;comic=1;strokeWidth=2;fontFamily=Comic Sans MS;fontStyle=1;",100,100,"DIAMOND","Comic Diamond",!0,null,"comic diamond rhombus if condition decision conditional question test retro"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;aspect=fixed;shape=isoRectangle;",150,90,"","Isometric Square",!0,null,"rectangle rect box iso isometric"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;aspect=fixed;shape=isoCube;backgroundOutline=1;",90,100,"","Isometric Cube",!0,null,"cube box iso isometric"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;",50,100,"","Isometric Edge 1"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;elbow=vertical;",50,100,"","Isometric Edge 2"),this.createVertexTemplateEntry("shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;",20,120,"","Curly Bracket"),this.createVertexTemplateEntry("line;strokeWidth=2;html=1;",160,10,"","Horizontal Line"),this.createVertexTemplateEntry("line;strokeWidth=2;direction=south;html=1;",10,160,"","Vertical Line"),this.createVertexTemplateEntry("line;strokeWidth=4;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",160,10,"","Horizontal Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("line;strokeWidth=4;direction=south;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",10,160,"","Vertical Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("shape=crossbar;whiteSpace=wrap;html=1;rounded=1;",120,20,"","Crossbar",!1,null,"crossbar distance measure dimension unit"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;imageAspect=1;aspect=fixed;image="+A.a,52,61,"","Image (Fixed Aspect)",!1,null,"fixed image icon symbol"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;imageAspect=0;image="+A.a,50,60,"","Image (Variable Aspect)",!1,null,"strechted image icon symbol"),this.createVertexTemplateEntry("icon;html=1;image="+A.a,60,60,"Icon","Icon",!1,null,"icon image symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;image="+A.a,140,60,"Label","Label 1",null,null,"label image icon symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;align=center;verticalAlign=bottom;spacingLeft=0;spacingBottom=4;imageAlign=center;imageVerticalAlign=top;image="+A.a,120,80,"Label","Label 2",null,null,"label image icon symbol"),this.addEntry("shape group container",(function(){var e=new l.d("Label",new l.I(0,0,160,70),"html=1;whiteSpace=wrap;container=1;recursiveResize=0;collapsible=0;"),i=(e.vertex=!0,new l.d("",new l.I(20,20,20,30),"triangle;html=1;whiteSpace=wrap;"));return i.vertex=!0,e.insert(i),t.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Shape Group")})),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;left=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=1;right=1;left=1;top=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createEdgeTemplateEntry("edgeStyle=segmentEdgeStyle;endArrow=classic;html=1;",50,50,"","Manual Line",null,i+"manual"),this.createEdgeTemplateEntry("shape=filledEdge;rounded=0;fixDash=1;endArrow=none;strokeWidth=10;fillColor=#ffffff;edgeStyle=orthogonalEdgeStyle;",60,40,"","Filled Edge"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=horizontal;endArrow=classic;html=1;",50,50,"","Horizontal Elbow",null,i+"elbow horizontal"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=vertical;endArrow=classic;html=1;",50,50,"","Vertical Elbow",null,i+"elbow vertical")];this.addPaletteFunctions("misc",l.ob.get("misc"),null==e||e,i)},S.prototype.addAdvancedPalette=function(e){this.addPaletteFunctions("advanced",l.ob.get("advanced"),null!=e&&e,this.createAdvancedShapes())},S.prototype.createAdvancedShapes=function(){var e=this,t=new l.d("List Item",new l.I(0,0,60,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return t.vertex=!0,[this.createVertexTemplateEntry("shape=tapeData;whiteSpace=wrap;html=1;perimeter=ellipsePerimeter;",80,80,"","Tape Data"),this.createVertexTemplateEntry("shape=manualInput;whiteSpace=wrap;html=1;",80,80,"","Manual Input"),this.createVertexTemplateEntry("shape=loopLimit;whiteSpace=wrap;html=1;",100,80,"","Loop Limit"),this.createVertexTemplateEntry("shape=offPageConnector;whiteSpace=wrap;html=1;",80,80,"","Off Page Connector"),this.createVertexTemplateEntry("shape=delay;whiteSpace=wrap;html=1;",80,40,"","Delay"),this.createVertexTemplateEntry("shape=display;whiteSpace=wrap;html=1;",80,40,"","Display"),this.createVertexTemplateEntry("shape=singleArrow;direction=west;whiteSpace=wrap;html=1;",100,60,"","Arrow Left"),this.createVertexTemplateEntry("shape=singleArrow;whiteSpace=wrap;html=1;",100,60,"","Arrow Right"),this.createVertexTemplateEntry("shape=singleArrow;direction=north;whiteSpace=wrap;html=1;",60,100,"","Arrow Up"),this.createVertexTemplateEntry("shape=singleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Arrow Down"),this.createVertexTemplateEntry("shape=doubleArrow;whiteSpace=wrap;html=1;",100,60,"","Double Arrow"),this.createVertexTemplateEntry("shape=doubleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Double Arrow Vertical",null,null,"double arrow"),this.createVertexTemplateEntry("shape=actor;whiteSpace=wrap;html=1;",40,60,"","User",null,null,"user person human"),this.createVertexTemplateEntry("shape=cross;whiteSpace=wrap;html=1;",80,80,"","Cross"),this.createVertexTemplateEntry("shape=corner;whiteSpace=wrap;html=1;",80,80,"","Corner"),this.createVertexTemplateEntry("shape=tee;whiteSpace=wrap;html=1;",80,80,"","Tee"),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"data store cylinder database"),this.createVertexTemplateEntry("shape=orEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Or",null,null,"or circle oval ellipse"),this.createVertexTemplateEntry("shape=sumEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Sum",null,null,"sum circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with horizontal divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;line=vertical;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with vertical divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=sortShape;perimeter=rhombusPerimeter;whiteSpace=wrap;html=1;",80,80,"","Sort",null,null,"sort"),this.createVertexTemplateEntry("shape=collate;whiteSpace=wrap;html=1;",80,80,"","Collate",null,null,"collate"),this.createVertexTemplateEntry("shape=switch;whiteSpace=wrap;html=1;",60,60,"","Switch",null,null,"switch router"),this.addEntry("process bar",(function(){return e.createVertexTemplateFromData("zZXRaoMwFIafJpcDjbNrb2233rRQ8AkyPdPQaCRJV+3T7yTG2rUVBoOtgpDzn/xJzncCIdGyateKNeVW5iBI9EqipZLS9KOqXYIQhAY8J9GKUBrgT+jbRDZ02aBhCmrzEwPtDZ9MHKBXdkpmoDWKCVN9VptO+Kw+8kqwGqMkK7nIN6yTB7uTNizbD1FSSsVPsjYMC1qFKHxwIZZSSIVxLZ1/nJNar5+oQPMT7IYCrqUta1ENzuqGaeOFTArBGs3f3Vmtoo2Se7ja1h00kSoHK4bBIKUNy3hdoPYU0mF91i9mT8EEL2ocZ3gKa00ayWujLZY4IfHKFonVDLsRGgXuQ90zBmWgneyTk3yT1iArMKrDKUeem9L3ajHrbSXwohxsQd/ggOleKM7ese048J2/fwuim1uQGmhQCW8vQMkacP3GCQgBFMftHEsr7cYYe95CnmKTPMFbYD8CQ++DGQy+/M5X4ku5wHYmdIktfvk9tecpavThqS3m/0YtnqIWPTy1cD77K2wYjo+Ay317I74A",296,100,"Process Bar")})),this.createVertexTemplateEntry("swimlane;",200,200,"Container","Container",null,null,"container swimlane lane pool group"),this.addEntry("list group erd table",(function(){var i=new l.d("List",new l.I(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return i.vertex=!0,i.insert(e.cloneCell(t,"Item 1")),i.insert(e.cloneCell(t,"Item 2")),i.insert(e.cloneCell(t,"Item 3")),e.createVertexTemplateFromCells([i],i.geometry.width,i.geometry.height,"List")})),this.addEntry("list item entry value group erd table",(function(){return e.createVertexTemplateFromCells([e.cloneCell(t,"List Item")],t.geometry.width,t.geometry.height,"List Item")}))]},S.prototype.addUmlPalette=function(e){var t=this,i=new l.d("+ field: type",new l.I(0,0,100,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;"),n=(i.vertex=!0,new l.d("",new l.I(0,0,40,8),"line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;")),o=(n.vertex=!0,"uml static class ");o=[this.createVertexTemplateEntry("html=1;",110,50,"Object","Object",null,null,o+"object instance"),this.createVertexTemplateEntry("html=1;",110,50,"&laquo;interface&raquo;<br><b>Name</b>","Interface",null,null,o+"interface object instance annotated annotation"),this.addEntry(o+"object instance",(function(){var e=new l.d("Classname",new l.I(0,0,160,90),"swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return e.vertex=!0,e.insert(i.clone()),e.insert(n.clone()),e.insert(t.cloneCell(i,"+ method(type): type")),t.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Class")})),this.addEntry(o+"section subsection",(function(){var e=new l.d("Classname",new l.I(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return e.vertex=!0,e.insert(i.clone()),e.insert(i.clone()),e.insert(i.clone()),t.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Class 2")})),this.addEntry(o+"item member method function variable field attribute label",(function(){return t.createVertexTemplateFromCells([t.cloneCell(i,"+ item: attribute")],i.geometry.width,i.geometry.height,"Item 1")})),this.addEntry(o+"item member method function variable field attribute label",(function(){var e=new l.d("item: attribute",new l.I(0,0,120,i.geometry.height),"label;fontStyle=0;strokeColor=none;fillColor=none;align=left;verticalAlign=top;overflow=hidden;spacingLeft=28;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;imageWidth=16;imageHeight=16;image="+t.gearImage);return e.vertex=!0,t.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Item 2")})),this.addEntry(o+"divider hline line separator",(function(){return t.createVertexTemplateFromCells([n.clone()],n.geometry.width,n.geometry.height,"Divider")})),this.addEntry(o+"spacer space gap separator",(function(){var e=new l.d("",new l.I(0,0,20,14),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=4;spacingRight=4;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;");return e.vertex=!0,t.createVertexTemplateFromCells([e.clone()],e.geometry.width,e.geometry.height,"Spacer")})),this.createVertexTemplateEntry("text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;",80,26,"Title","Title",null,null,o+"title label"),this.addEntry(o+"component",(function(){var e=new l.d("&laquo;Annotation&raquo;<br/><b>Component</b>",new l.I(0,0,180,90),"html=1;dropTarget=0;"),i=(e.vertex=!0,new l.d("",new l.I(1,0,20,20),"shape=component;jettyWidth=8;jettyHeight=4;"));return i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new l.hb(-27,7),e.insert(i),t.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Component")})),this.addEntry(o+"component",(function(){var e=new l.d('<p style="margin:0px;margin-top:6px;text-align:center;"><b>Component</b></p><hr/><p style="margin:0px;margin-left:8px;">+ Attribute1: Type<br/>+ Attribute2: Type</p>',new l.I(0,0,180,90),"align=left;overflow=fill;html=1;dropTarget=0;"),i=(e.vertex=!0,new l.d("",new l.I(1,0,20,20),"shape=component;jettyWidth=8;jettyHeight=4;"));return i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new l.hb(-24,4),e.insert(i),t.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Component with Attributes")})),this.createVertexTemplateEntry("verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;",180,120,"Block","Block",null,null,o+"block"),this.createVertexTemplateEntry("shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;",100,50,"Module","Module",null,null,o+"module component"),this.createVertexTemplateEntry("shape=folder;fontStyle=1;spacingTop=10;tabWidth=40;tabHeight=14;tabPosition=left;html=1;",70,50,"package","Package",null,null,o+"package"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;",160,90,'<p style="margin:0px;margin-top:4px;text-align:center;text-decoration:underline;"><b>Object:Type</b></p><hr/><p style="margin:0px;margin-left:8px;">field1 = value1<br/>field2 = value2<br>field3 = value3</p>',"Object",null,null,o+"object instance"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;html=1;",180,90,'<div style="box-sizing:border-box;width:100%;background:#e4e4e4;padding:2px;">Tablename</div><table style="width:100%;font-size:1em;" cellpadding="2" cellspacing="0"><tr><td>PK</td><td>uniqueId</td></tr><tr><td>FK1</td><td>foreignKey</td></tr><tr><td></td><td>fieldname</td></tr></table>',"Entity",null,null,"er entity table"),this.addEntry(o+"object instance",(function(){var e=new l.d('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><div style="height:2px;"></div>',new l.I(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return e.vertex=!0,t.createVertexTemplateFromCells([e.clone()],e.geometry.width,e.geometry.height,"Class 3")})),this.addEntry(o+"object instance",(function(){var e=new l.d('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><div style="height:2px;"></div><hr size="1"/><div style="height:2px;"></div>',new l.I(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return e.vertex=!0,t.createVertexTemplateFromCells([e.clone()],e.geometry.width,e.geometry.height,"Class 4")})),this.addEntry(o+"object instance",(function(){var e=new l.d('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ field: Type</p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ method(): Type</p>',new l.I(0,0,160,90),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return e.vertex=!0,t.createVertexTemplateFromCells([e.clone()],e.geometry.width,e.geometry.height,"Class 5")})),this.addEntry(o+"object instance",(function(){var e=new l.d('<p style="margin:0px;margin-top:4px;text-align:center;"><i>&lt;&lt;Interface&gt;&gt;</i><br/><b>Interface</b></p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ field1: Type<br/>+ field2: Type</p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ method1(Type): Type<br/>+ method2(Type, Type): Type</p>',new l.I(0,0,190,140),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return e.vertex=!0,t.createVertexTemplateFromCells([e.clone()],e.geometry.width,e.geometry.height,"Interface 2")})),this.createVertexTemplateEntry("shape=providedRequiredInterface;html=1;verticalLabelPosition=bottom;",20,20,"","Provided/Required Interface",null,null,"uml provided required interface lollipop notation"),this.createVertexTemplateEntry("shape=requiredInterface;html=1;verticalLabelPosition=bottom;",10,20,"","Required Interface",null,null,"uml required interface lollipop notation"),this.addEntry("uml lollipop notation provided required interface",(function(){return t.createVertexTemplateFromData("zVTBrptADPyavVYEkt4b0uQd3pMq5dD2uAUD27dgZJwE8vX1spsQlETtpVWRIjFjex3PmFVJWvc70m31hjlYlXxWSUqI7N/qPgVrVRyZXCUbFceR/FS8fRJdjNGo1QQN/0lB7AuO2h7AM57oeLCBIDw0Obj8SCVrJK6wxEbbV8RWyIWQP4F52Juzq9AHRqEqrm2IQpN/IsKTwAYb8MzWWBuO9B0hL2E2BGsqIQyxvJ9rzApD7QBrYBokhcBqNsf5UbrzsLzmXUu/oJET42jwGat5QYcHyiDkTDLKy03TiRrFfSx08m+FrrQtUkOZvZdbFKThmwMfVhf4fQ43/W3uZriiPPT+KKhjwnf4anKuQv//wsg+NPJ7/9d9Xf7eVykwbeeMOFWGYd/qzEVO8tHP/Suw4a2ujXV/+gXsEdhkOgSC8os44BQt0tggicZHeG1N2QiXibhAV48epRayEDd8MT7Ct06TUaXVWq027tCuhcx5VZjebeeaoDNn/WMcb/p+j0AM/dNr6InLl4Lgzylsk6OCgRWYsuI592gNZh5OhgmcblPv7+1l+ws=",40,10,"Lollipop Notation")})),this.createVertexTemplateEntry("shape=umlBoundary;whiteSpace=wrap;html=1;",100,80,"Boundary Object","Boundary Object",null,null,"uml boundary object"),this.createVertexTemplateEntry("ellipse;shape=umlEntity;whiteSpace=wrap;html=1;",80,80,"Entity Object","Entity Object",null,null,"uml entity object"),this.createVertexTemplateEntry("ellipse;shape=umlControl;whiteSpace=wrap;html=1;",70,80,"Control Object","Control Object",null,null,"uml control object"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;",30,60,"Actor","Actor",!1,null,"uml actor"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",140,70,"Use Case","Use Case",null,null,"uml use case usecase"),this.addEntry("uml activity state start",(function(){var e=new l.d("",new l.I(0,0,30,30),"ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;"),i=(e.vertex=!0,new l.d("",new l.I(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;"));return i.geometry.setTerminalPoint(new l.hb(15,90),!1),i.geometry.relative=!0,i.edge=!0,e.insertEdge(i,!0),t.createVertexTemplateFromCells([e,i],30,90,"Start")})),this.addEntry("uml activity state",(function(){var e=new l.d("Activity",new l.I(0,0,120,40),"rounded=1;whiteSpace=wrap;html=1;arcSize=40;fontColor=#000000;fillColor=#ffffc0;strokeColor=#ff0000;"),i=(e.vertex=!0,new l.d("",new l.I(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;"));return i.geometry.setTerminalPoint(new l.hb(60,100),!1),i.geometry.relative=!0,i.edge=!0,e.insertEdge(i,!0),t.createVertexTemplateFromCells([e,i],120,100,"Activity")})),this.addEntry("uml activity composite state",(function(){var e,i=new l.d("Composite State",new l.I(0,0,160,60),"swimlane;html=1;fontStyle=1;align=center;verticalAlign=middle;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=0;resizeLast=1;container=0;fontColor=#000000;collapsible=0;rounded=1;arcSize=30;strokeColor=#ff0000;fillColor=#ffffc0;swimlaneFillColor=#ffffc0;dropTarget=0;");return(e=((e=(i.vertex=!0,new l.d("Subtitle",new l.I(0,0,200,26),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;fontColor=#000000;"))).vertex=!0,i.insert(e),new l.d("",new l.I(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;"))).geometry.setTerminalPoint(new l.hb(80,120),!1),e.geometry.relative=!0,e.edge=!0,i.insertEdge(e,!0),t.createVertexTemplateFromCells([i,e],160,120,"Composite State")})),this.addEntry("uml activity condition",(function(){var e=new l.d("Condition",new l.I(0,0,80,40),"rhombus;whiteSpace=wrap;html=1;fillColor=#ffffc0;strokeColor=#ff0000;"),i=(e.vertex=!0,new l.d("no",new l.I(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;")),n=(i.geometry.setTerminalPoint(new l.hb(180,20),!1),i.geometry.relative=!0,i.geometry.x=-1,i.edge=!0,e.insertEdge(i,!0),new l.d("yes",new l.I(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;"));return n.geometry.setTerminalPoint(new l.hb(40,100),!1),n.geometry.relative=!0,n.geometry.x=-1,n.edge=!0,e.insertEdge(n,!0),t.createVertexTemplateFromCells([e,i,n],180,100,"Condition")})),this.addEntry("uml activity fork join",(function(){var e=new l.d("",new l.I(0,0,200,10),"shape=line;html=1;strokeWidth=6;strokeColor=#ff0000;"),i=(e.vertex=!0,new l.d("",new l.I(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;"));return i.geometry.setTerminalPoint(new l.hb(100,80),!1),i.geometry.relative=!0,i.edge=!0,e.insertEdge(i,!0),t.createVertexTemplateFromCells([e,i],200,80,"Fork/Join")})),this.createVertexTemplateEntry("ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;",30,30,"","End",null,null,"uml activity state end"),this.createVertexTemplateEntry("shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;",100,300,":Object","Lifeline",null,null,"uml sequence participant lifeline"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlActor;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;labelBackgroundColor=#ffffff;outlineConnect=0;",20,300,"","Actor Lifeline",null,null,"uml sequence participant lifeline actor"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlBoundary;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;labelBackgroundColor=#ffffff;outlineConnect=0;",50,300,"","Boundary Lifeline",null,null,"uml sequence participant lifeline boundary"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlEntity;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;labelBackgroundColor=#ffffff;outlineConnect=0;",40,300,"","Entity Lifeline",null,null,"uml sequence participant lifeline entity"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlControl;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;labelBackgroundColor=#ffffff;outlineConnect=0;",40,300,"","Control Lifeline",null,null,"uml sequence participant lifeline control"),this.createVertexTemplateEntry("shape=umlFrame;whiteSpace=wrap;html=1;",300,200,"frame","Frame",null,null,"uml sequence frame"),this.createVertexTemplateEntry("shape=umlDestroy;whiteSpace=wrap;html=1;strokeWidth=3;",30,30,"","Destruction",null,null,"uml sequence destruction destroy"),this.createVertexTemplateEntry("shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;",100,70,"Note","Note",null,null,"uml note"),this.addEntry("uml sequence invoke invocation call activation",(function(){var e=new l.d("",new l.I(0,0,10,80),"html=1;points=[];perimeter=orthogonalPerimeter;"),i=(e.vertex=!0,new l.d("dispatch",new l.I(0,0,0,0),"html=1;verticalAlign=bottom;startArrow=oval;endArrow=block;startSize=8;"));return i.geometry.setTerminalPoint(new l.hb(-60,0),!0),i.geometry.relative=!0,i.edge=!0,e.insertEdge(i,!1),t.createVertexTemplateFromCells([e,i],10,80,"Found Message")})),this.addEntry("uml sequence invoke call delegation synchronous invocation activation",(function(){var e=new l.d("",new l.I(0,0,10,80),"html=1;points=[];perimeter=orthogonalPerimeter;"),i=(e.vertex=!0,new l.d("dispatch",new l.I(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;")),n=(i.geometry.setTerminalPoint(new l.hb(-70,0),!0),i.geometry.relative=!0,i.edge=!0,e.insertEdge(i,!1),new l.d("return",new l.I(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;"));return n.geometry.setTerminalPoint(new l.hb(-70,76),!1),n.geometry.relative=!0,n.edge=!0,e.insertEdge(n,!0),t.createVertexTemplateFromCells([e,i,n],10,80,"Synchronous Invocation")})),this.addEntry("uml sequence self call recursion delegation activation",(function(){var e=new l.d("",new l.I(0,20,10,40),"html=1;points=[];perimeter=orthogonalPerimeter;"),i=(e.vertex=!0,new l.d("self call",new l.I(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;"));return i.geometry.setTerminalPoint(new l.hb(5,0),!0),i.geometry.points=[new l.hb(30,0)],i.geometry.relative=!0,i.edge=!0,e.insertEdge(i,!1),t.createVertexTemplateFromCells([e,i],10,60,"Self Call")})),this.addEntry("uml sequence invoke call delegation callback activation",(function(){return t.createVertexTemplateFromData("xZRNT8MwDIZ/Ta6oaymD47rBTkiTuMAxW6wmIm0q19s6fj1OE3V0Y2iCA4dK8euP2I+riGxedUuUjX52CqzIHkU2R+conKpuDtaKNDFKZAuRpgl/In264J303qSRCDVdk5CGhJ20WwhKEFo62ChoqritxURkReNMTa2X80LkC68AmgoIkEWHpF3pamlXR7WIFwASdBeb7KXY4RIc5+KBQ/ZGkY4RYY5Egyl1zLqLmmyDXQ6Zx4n5EIf+HkB2BmAjrV3LzftPIPw4hgNn1pQ1a2tH5Cp2QK1miG7vNeu4iJe4pdeY2BtvbCQDGlAljMCQxBJotJ8rWCFYSWY3LvUdmZi68rvkkLiU6QnL1m1xAzHoBOdw61WEb88II9AW67/ydQ2wq1Cy1aAGvOrFfPh6997qDA3g+dxzv3nIL6MPU/8T+kMw8+m4QPgdfrEJNo8PSQj/+s58Ag==",10,60,"Callback")})),this.createVertexTemplateEntry("html=1;points=[];perimeter=orthogonalPerimeter;",10,80,"","Activation",null,null,"uml sequence activation"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=oval;startFill=1;endArrow=block;startSize=8;",60,0,"dispatch","Found Message 1",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=circle;startFill=1;endArrow=open;startSize=6;endSize=8;",80,0,"dispatch","Found Message 2",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;endArrow=block;",80,0,"dispatch","Message",null,"uml sequence message call invoke dispatch"),this.addEntry("uml sequence return message",(function(){var e=new l.d("return",new l.I(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;");return e.geometry.setTerminalPoint(new l.hb(80,0),!0),e.geometry.setTerminalPoint(new l.hb(0,0),!1),e.geometry.relative=!0,e.edge=!0,t.createEdgeTemplateFromCells([e],80,0,"Return")})),this.addEntry("uml relation",(function(){var e=new l.d("name",new l.I(0,0,0,0),"endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;"),i=(e.geometry.setTerminalPoint(new l.hb(0,0),!0),e.geometry.setTerminalPoint(new l.hb(160,0),!1),e.geometry.relative=!0,e.geometry.x=-1,e.edge=!0,new l.d("1",new l.I(-1,0,0,0),"resizable=0;html=1;align=left;verticalAlign=bottom;labelBackgroundColor=#ffffff;fontSize=10;"));return i.geometry.relative=!0,i.setConnectable(!1),i.vertex=!0,e.insert(i),t.createEdgeTemplateFromCells([e],160,0,"Relation 1")})),this.addEntry("uml association",(function(){var e,i=new l.d("",new l.I(0,0,0,0),"endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;");return(e=((e=(i.geometry.setTerminalPoint(new l.hb(0,0),!0),i.geometry.setTerminalPoint(new l.hb(160,0),!1),i.geometry.relative=!0,i.edge=!0,new l.d("parent",new l.I(-1,0,0,0),"resizable=0;html=1;align=left;verticalAlign=bottom;labelBackgroundColor=#ffffff;fontSize=10;"))).geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,i.insert(e),new l.d("child",new l.I(1,0,0,0),"resizable=0;html=1;align=right;verticalAlign=bottom;labelBackgroundColor=#ffffff;fontSize=10;"))).geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,i.insert(e),t.createEdgeTemplateFromCells([i],160,0,"Association 1")})),this.addEntry("uml aggregation",(function(){var e=new l.d("1",new l.I(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return e.geometry.setTerminalPoint(new l.hb(0,0),!0),e.geometry.setTerminalPoint(new l.hb(160,0),!1),e.geometry.relative=!0,e.geometry.x=-1,e.geometry.y=3,e.edge=!0,t.createEdgeTemplateFromCells([e],160,0,"Aggregation 1")})),this.addEntry("uml composition",(function(){var e=new l.d("1",new l.I(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return e.geometry.setTerminalPoint(new l.hb(0,0),!0),e.geometry.setTerminalPoint(new l.hb(160,0),!1),e.geometry.relative=!0,e.geometry.x=-1,e.geometry.y=3,e.edge=!0,t.createEdgeTemplateFromCells([e],160,0,"Composition 1")})),this.addEntry("uml relation",(function(){var e,i=new l.d("Relation",new l.I(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;");return(e=((e=(i.geometry.setTerminalPoint(new l.hb(0,0),!0),i.geometry.setTerminalPoint(new l.hb(160,0),!1),i.geometry.relative=!0,i.edge=!0,new l.d("0..n",new l.I(-1,0,0,0),"resizable=0;html=1;align=left;verticalAlign=top;labelBackgroundColor=#ffffff;fontSize=10;"))).geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,i.insert(e),new l.d("1",new l.I(1,0,0,0),"resizable=0;html=1;align=right;verticalAlign=top;labelBackgroundColor=#ffffff;fontSize=10;"))).geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,i.insert(e),t.createEdgeTemplateFromCells([i],160,0,"Relation 2")})),this.createEdgeTemplateEntry("endArrow=open;endSize=12;dashed=1;html=1;",160,0,"Use","Dependency",null,"uml dependency use"),this.createEdgeTemplateEntry("endArrow=block;endSize=16;endFill=0;html=1;",160,0,"Extends","Generalization",null,"uml generalization extend"),this.createEdgeTemplateEntry("endArrow=block;startArrow=block;endFill=1;startFill=1;html=1;",160,0,"","Association 2",null,"uml association"),this.createEdgeTemplateEntry("endArrow=open;startArrow=circlePlus;endFill=0;startFill=0;endSize=8;html=1;",160,0,"","Inner Class",null,"uml inner class"),this.createEdgeTemplateEntry("endArrow=open;startArrow=cross;endFill=0;startFill=0;endSize=8;startSize=10;html=1;",160,0,"","Terminate",null,"uml terminate"),this.createEdgeTemplateEntry("endArrow=block;dashed=1;endFill=0;endSize=12;html=1;",160,0,"","Implementation",null,"uml realization implementation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=0;endSize=24;html=1;",160,0,"","Aggregation 2",null,"uml aggregation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=1;endSize=24;html=1;",160,0,"","Composition 2",null,"uml composition"),this.createEdgeTemplateEntry("endArrow=open;endFill=1;endSize=12;html=1;",160,0,"","Association 3",null,"uml association")];this.addPaletteFunctions("uml",l.ob.get("uml"),e||!1,o)},S.prototype.addBpmnPalette=function(){var e=this,t=[this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;",120,80,"Task","Process",null,null,"bpmn task process"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;",120,80,"Transaction","Transaction",null,null,"bpmn transaction"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;dashed=1;dashPattern=1 4;",120,80,"Event\nSub-Process","Event Sub-Process",null,null,"bpmn event subprocess sub process sub-process"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;strokeWidth=3;",120,80,"Call Activity","Call Activity",null,null,"bpmn call activity"),this.addEntry("bpmn subprocess sub process sub-process",(function(){var t=new l.d("Sub-Process",new l.I(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;"),i=(t.vertex=!0,new l.d("",new l.I(.5,1,14,14),"html=1;shape=plus;outlineConnect=0;"));return i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new l.hb(-7,-14),t.insert(i),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Sub-Process")})),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","loop","subprocess sub process sub-process looped").join(" "),(function(){var t,i=new l.d("Looped\nSub-Process",new l.I(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");return(t=((t=(i.vertex=!0,new l.d("",new l.I(.5,1,14,14),"html=1;shape=mxgraph.bpmn.loop;outlineConnect=0;"))).vertex=!0,t.geometry.relative=!0,t.geometry.offset=new l.hb(-15,-14),i.insert(t),new l.d("",new l.I(.5,1,14,14),"html=1;shape=plus;"))).vertex=!0,t.geometry.relative=!0,t.geometry.offset=new l.hb(1,-14),i.insert(t),e.createVertexTemplateFromCells([i],i.geometry.width,i.geometry.height,"Looped Sub-Process")})),this.addEntry("bpmn receive task",(function(){var t=new l.d("Receive",new l.I(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;"),i=(t.vertex=!0,new l.d("",new l.I(0,0,20,14),"html=1;shape=message;outlineConnect=0;"));return i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new l.hb(7,7),t.insert(i),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Receive Task")})),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","user_task").join(" "),(function(){var t,i=new l.d("User",new l.I(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");return(t=((t=(i.vertex=!0,new l.d("",new l.I(0,0,14,14),"html=1;shape=mxgraph.bpmn.user_task;outlineConnect=0;"))).vertex=!0,t.geometry.relative=!0,t.geometry.offset=new l.hb(7,7),i.insert(t),new l.d("",new l.I(.5,1,14,14),"html=1;shape=plus;outlineConnect=0;"))).vertex=!0,t.geometry.relative=!0,t.geometry.offset=new l.hb(-7,-14),i.insert(t),e.createVertexTemplateFromCells([i],i.geometry.width,i.geometry.height,"User Task")})),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","timer_start","attached").join(" "),(function(){var t=new l.d("Process",new l.I(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;"),i=(t.vertex=!0,new l.d("",new l.I(1,1,30,30),"shape=mxgraph.bpmn.timer_start;perimeter=ellipsePerimeter;html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;outlineConnect=0;"));return i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new l.hb(-40,-15),t.insert(i),e.createVertexTemplateFromCells([t],120,95,"Attached Timer Event 1")})),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","timer_start","attached").join(" "),(function(){var t=new l.d("Process",new l.I(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;"),i=(t.vertex=!0,new l.d("",new l.I(1,0,30,30),"shape=mxgraph.bpmn.timer_start;perimeter=ellipsePerimeter;html=1;labelPosition=right;labelBackgroundColor=#ffffff;align=left;outlineConnect=0;"));return i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new l.hb(-15,10),t.insert(i),e.createVertexTemplateFromCells([t],135,80,"Attached Timer Event 2")})),this.createVertexTemplateEntry("swimlane;html=1;horizontal=0;startSize=20;",320,240,"Pool","Pool",null,null,"bpmn pool"),this.createVertexTemplateEntry("swimlane;html=1;horizontal=0;swimlaneLine=0;",300,120,"Lane","Lane",null,null,"bpmn lane"),this.createVertexTemplateEntry("shape=hexagon;html=1;whiteSpace=wrap;perimeter=hexagonPerimeter;rounded=0;",60,50,"","Conversation",null,null,"bpmn conversation"),this.createVertexTemplateEntry("shape=hexagon;html=1;whiteSpace=wrap;perimeter=hexagonPerimeter;strokeWidth=4;rounded=0;",60,50,"","Call Conversation",null,null,"bpmn call conversation"),this.addEntry("bpmn subconversation sub conversation sub-conversation",(function(){var t=new l.d("",new l.I(0,0,60,50),"shape=hexagon;whiteSpace=wrap;html=1;perimeter=hexagonPerimeter;rounded=0;dropTarget=0;"),i=(t.vertex=!0,new l.d("",new l.I(.5,1,14,14),"html=1;shape=plus;"));return i.vertex=!0,i.geometry.relative=!0,i.geometry.offset=new l.hb(-7,-14),t.insert(i),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Sub-Conversation")})),this.addEntry("bpmn data object",(function(){var t,i=new l.d("",new l.I(0,0,40,60),"shape=note;whiteSpace=wrap;size=16;html=1;dropTarget=0;");return(t=((t=(i.vertex=!0,new l.d("",new l.I(0,0,14,14),"html=1;shape=singleArrow;arrowWidth=0.4;arrowSize=0.4;outlineConnect=0;"))).vertex=!0,t.geometry.relative=!0,t.geometry.offset=new l.hb(2,2),i.insert(t),new l.d("",new l.I(.5,1,14,14),"html=1;whiteSpace=wrap;shape=parallelMarker;outlineConnect=0;"))).vertex=!0,t.geometry.relative=!0,t.geometry.offset=new l.hb(-7,-14),i.insert(t),e.createVertexTemplateFromCells([i],i.geometry.width,i.geometry.height,"Data Object")})),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"bpmn data store"),this.createVertexTemplateEntry("shape=plus;html=1;outlineConnect=0;",14,14,"","Sub-Process Marker",null,null,"bpmn subprocess sub process sub-process marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.loop;html=1;outlineConnect=0;",14,14,"","Loop Marker",null,null,"bpmn loop marker"),this.createVertexTemplateEntry("shape=parallelMarker;html=1;outlineConnect=0;",14,14,"","Parallel MI Marker",null,null,"bpmn parallel mi marker"),this.createVertexTemplateEntry("shape=parallelMarker;direction=south;html=1;outlineConnect=0;",14,14,"","Sequential MI Marker",null,null,"bpmn sequential mi marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.ad_hoc;fillColor=#000000;html=1;outlineConnect=0;",14,14,"","Ad Hoc Marker",null,null,"bpmn ad hoc marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.compensation;html=1;outlineConnect=0;",14,14,"","Compensation Marker",null,null,"bpmn compensation marker"),this.createVertexTemplateEntry("shape=message;whiteSpace=wrap;html=1;outlineConnect=0;fillColor=#000000;strokeColor=#ffffff;strokeWidth=2;",40,30,"","Send Task",null,null,"bpmn send task"),this.createVertexTemplateEntry("shape=message;whiteSpace=wrap;html=1;outlineConnect=0;",40,30,"","Receive Task",null,null,"bpmn receive task"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.user_task;html=1;outlineConnect=0;",14,14,"","User Task",null,null,this.getTagsForStencil("mxgraph.bpmn","user_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.manual_task;html=1;outlineConnect=0;",14,14,"","Manual Task",null,null,this.getTagsForStencil("mxgraph.bpmn","user_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.business_rule_task;html=1;outlineConnect=0;",14,14,"","Business Rule Task",null,null,this.getTagsForStencil("mxgraph.bpmn","business_rule_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.service_task;html=1;outlineConnect=0;",14,14,"","Service Task",null,null,this.getTagsForStencil("mxgraph.bpmn","service_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.script_task;html=1;outlineConnect=0;",14,14,"","Script Task",null,null,this.getTagsForStencil("mxgraph.bpmn","script_task").join(" ")),this.createVertexTemplateEntry("html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;",50,100,"","Annotation",null,null,this.getTagsForStencil("bpmn","annotation_1","bpmn business process model ").join(" ")),this.addDataEntry("container swimlane pool horizontal",480,380,"Horizontal Pool 1","zZRLbsIwEIZP4709TlHXhJYNSEicwCIjbNWJkWNKwumZxA6IlrRUaisWlmb+eX8LM5mXzdyrnV66Ai2TL0zm3rkQrbLJ0VoG3BRMzhgAp8fgdSQq+ijfKY9VuKcAYsG7snuMyso5G8U6tDaJ9cGUVlXkTXUoacuZIHOjjS0WqnX7blYd1OZt8KYea3PE1bCI+CAtVUMq7/o5b46uCmroSn18WFMm+XCdse5GpLq0OPqAzejxvZQun6MrMfiWUg6mCDpmZM8RENdotjqVyUFUdRS259oLSzISztto5Se0i44gcHEn3i9A/IQB3GbQpmi69DskAn4BSTaGBB4Jicj+k8nTGBP5SExg8odMyL38eH3s6kM8AQ=="),this.addDataEntry("container swimlane pool horizontal",480,360,"Horizontal Pool 2","zZTBbsIwDIafJvfU6dDOlI0LSEg8QUQtEi1tUBJGy9PPbcJQWTsxaZs4VLJ//07sT1WYKKpm6eRBrW2JhokXJgpnbYhR1RRoDAOuSyYWDIDTx+B1opr1VX6QDutwTwPEhndpjhiVjbUmij60Jon+pCsja8rmKlQ05SKjcKe0KVeytcfuLh/k7u2SzR16fcbNZZDsRlrLhlTenWedPts6SJMEOseFLTkph6Fj212RbGlwdAGbyeV7KW2+RFthcC1ZTroMKjry5wiIK9R7ldrELInSR2H/2XtlSUHCOY5WfEG76ggCz+7E+w2InzCAcQapIf0fAySzESQZ/AKSfAoJPCKS9mbzf0H0NIVIPDAiyP8QEaXX97CvDZ7LDw=="),this.createVertexTemplateEntry("swimlane;startSize=20;horizontal=0;",320,120,"Lane","Horizontal Swimlane",null,null,"swimlane lane pool"),this.addDataEntry("container swimlane pool horizontal",360,480,"Vertical Pool 1","xZRBbsIwEEVP4709ThFrQssGJKSewCIjbNXGyDEl4fSdxKa0NJFQVTULSzP/e+T5b2EmS9esgjrqja/QMvnMZBm8j6lyTYnWMuCmYnLJADgdBi8jruhdflQBD/GRAUgD78qeMClb720S69jaLNZn46w6ULfQ0dGWS0HlThtbrVXrT91bdVS7t2u3CFibC26vi4g7aaMaUjmpNBbiKxnUQyfkjTBEbEZT9VKOtELvMIaWrpxNFXW6IWcpOddo9jqPFfMsqjoJ+8/ZGyQqMqdhZvIHs3WHBrh4kNvvIsNw5Da7OdgXAgKGCMz+gEAxRgCmINDcxZ2CyNMYETkhESj+jwi1t1+r9759ah8="),this.addDataEntry("container swimlane pool vertical",380,480,"Vertical Pool 2","xZTPbsIwDMafJvf86dDOlI0LSEg8QUQtEi1pUBJGy9PPbdJ1G1TqhXGoZH/219g/RSGitM3ay5PaugoMEW9ElN65mCLblGAM4VRXRKwI5xQ/wt8nqqyv0pP0UMc5Bp4Mn9KcISk750wSQ2xNFsNFWyNrzJYqWpxyxTA8KG2qjWzduTsrRHn4GLKlh6CvsBsGYX+krWxQpaiizcc9FjDnnaCc11dXR2lyxyjsuyPy3/Lg4CM0k8v3Ut58Dc5C9C22XHQVVeoQrwkQVaCPKtuKQZQhCcdv78gSg4zzPlpxg3bTEeSUzcR7Q2bWyvz+ytmQr8NPAow/ikAxRYA/kQAr/hPByxQC8cxLsHggAkzH56uv/XrdvgA="),this.createVertexTemplateEntry("swimlane;startSize=20;",120,320,"Lane","Vertical Swimlane",null,null,"swimlane lane pool"),this.createVertexTemplateEntry("rounded=1;arcSize=10;dashed=1;strokeColor=#000000;fillColor=none;gradientColor=none;dashPattern=8 3 1 3;strokeWidth=2;",200,200,"","Group",null,null,this.getTagsForStencil("bpmn","group","bpmn business process model ").join(" ")),this.createEdgeTemplateEntry("endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Sequence Flow",null,"bpmn sequence flow"),this.createEdgeTemplateEntry("startArrow=dash;startSize=8;endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Default Flow",null,"bpmn default flow"),this.createEdgeTemplateEntry("startArrow=diamondThin;startFill=0;startSize=14;endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Conditional Flow",null,"bpmn conditional flow"),this.createEdgeTemplateEntry("startArrow=oval;startFill=0;startSize=7;endArrow=block;endFill=0;endSize=10;dashed=1;html=1;",100,0,"","Message Flow 1",null,"bpmn message flow"),this.addEntry("bpmn message flow",(function(){var t=new l.d("",new l.I(0,0,0,0),"startArrow=oval;startFill=0;startSize=7;endArrow=block;endFill=0;endSize=10;dashed=1;html=1;"),i=(t.geometry.setTerminalPoint(new l.hb(0,0),!0),t.geometry.setTerminalPoint(new l.hb(100,0),!1),t.geometry.relative=!0,t.edge=!0,new l.d("",new l.I(0,0,20,14),"shape=message;html=1;outlineConnect=0;"));return i.geometry.relative=!0,i.vertex=!0,i.geometry.offset=new l.hb(-10,-7),t.insert(i),e.createEdgeTemplateFromCells([t],100,0,"Message Flow 2")})),this.createEdgeTemplateEntry("shape=link;html=1;",100,0,"","Link",null,"bpmn link")];this.addPaletteFunctions("bpmn","BPMN "+l.ob.get("general"),!1,t)},S.prototype.createTitle=function(e){var t=document.createElement("a");return t.setAttribute("title",l.ob.get("sidebarTooltip")),t.className="geTitle",l.Cb.write(t,e),t},S.prototype.createThumb=function(e,t,i,n,o,a,s){this.graph.labelsVisible=null==a||a;a=l.k.NO_FO,l.k.NO_FO=r.b.prototype.originalNoForeignObject,this.graph.view.scaleAndTranslate(1,0,0),this.graph.addCells(e),e=this.graph.getGraphBounds();var d=Math.floor(100*Math.min((t-2*this.thumbBorder)/e.width,(i-2*this.thumbBorder)/e.height))/100;this.graph.view.scaleAndTranslate(d,Math.floor((t-e.width*d)/2/d-e.x),Math.floor((i-e.height*d)/2/d-e.y)),d=null;return this.graph.dialect!=l.t.DIALECT_SVG||l.k.NO_FO||null==this.graph.view.getCanvas().ownerSVGElement?((d=this.graph.container.cloneNode(!1)).innerHTML=this.graph.container.innerHTML,!l.k.IS_QUIRKS&&8!=document.documentMode||(d.firstChild.style.overflow="visible")):d=this.graph.view.getCanvas().ownerSVGElement.cloneNode(!0),this.graph.getModel().clear(),l.k.NO_FO=a,l.k.IS_IE6&&(n.style.backgroundImage="url("+this.editorUi.editor.transparentImage+")"),d.style.position="relative",d.style.overflow="hidden",d.style.left=this.thumbBorder+"px",d.style.top=this.thumbBorder+"px",d.style.width=t+"px",d.style.height=i+"px",d.style.visibility="",d.style.minWidth="",d.style.minHeight="",n.appendChild(d),this.sidebarTitles&&null!=o&&0!=s&&(a=l.k.IS_QUIRKS?2*this.thumbPadding+2:0,n.style.height=this.thumbHeight+a+this.sidebarTitleSize+8+"px",(t=document.createElement("div")).style.fontSize=this.sidebarTitleSize+"px",t.style.color="#303030",t.style.textAlign="center",t.style.whiteSpace="nowrap",l.k.IS_IE&&(t.style.height=this.sidebarTitleSize+12+"px"),t.style.paddingTop="4px",l.Cb.write(t,o),n.appendChild(t)),e},S.prototype.createItem=function(e,t,i,n,o,r,a){var s,d=document.createElement("a"),h=(d.className="geItem",d.style.overflow="hidden",l.k.IS_QUIRKS?8+2*this.thumbPadding:2*this.thumbBorder),c=(d.style.width=this.thumbWidth+h+"px",d.style.height=this.thumbHeight+h+"px",d.style.padding=this.thumbPadding+"px",l.E.addListener(d,"click",(function(e){l.E.consume(e)})),this.createThumb(e,this.thumbWidth,this.thumbHeight,d,t,i,n,o,r),new l.mb(0,0,o,r));return 1<e.length||e[0].vertex?(s=this.createDragSource(d,this.createDropHandler(e,!0,a,c),this.createDragPreview(o,r),e,c),this.addClickHandler(d,s,e),s.isGuidesEnabled=l.Cb.bind(this,(function(){return this.editorUi.editor.graph.graphHandler.guidesEnabled}))):null!=e[0]&&e[0].edge&&(s=this.createDragSource(d,this.createDropHandler(e,!1,a,c),this.createDragPreview(o,r),e,c),this.addClickHandler(d,s,e)),l.k.IS_IOS||l.E.addGestureListeners(d,null,l.Cb.bind(this,(function(n){l.E.isMouseEvent(n)&&this.showTooltip(d,e,c.width,c.height,t,i)}))),d},S.prototype.updateShapes=function(e,t){var i=this.editorUi.editor.graph,n=i.getCellStyle(e),o=[];i.model.beginUpdate();try{for(var r=i.getModel().getStyle(e),a=["shadow","dashed","dashPattern","fontFamily","fontSize","fontColor","align","startFill","startSize","endFill","endSize","strokeColor","strokeWidth","fillColor","gradientColor","html","part","noEdgeStyle","edgeStyle","elbow","childLayout","recursiveResize","container","collapsible","connectable"],s=0;s<t.length;s++){var d=t[s];if(i.getModel().isVertex(d)==i.getModel().isVertex(e)||i.getModel().isEdge(d)==i.getModel().isEdge(e)){var h=i.getCurrentCellStyle(t[s]);if(i.getModel().setStyle(d,r),"1"==l.Cb.getValue(h,"composite","0"))for(var c=i.model.getChildCount(d);0<=c;c--)i.model.remove(i.model.getChildAt(d,c));for("umlLifeline"==h[l.t.STYLE_SHAPE]&&"umlLifeline"!=n[l.t.STYLE_SHAPE]&&(i.setCellStyles(l.t.STYLE_SHAPE,"umlLifeline",[d]),i.setCellStyles("participant",n[l.t.STYLE_SHAPE],[d])),c=0;c<a.length;c++){var u=h[a[c]];null!=u&&i.setCellStyles(a[c],u,[d])}o.push(d)}}}finally{i.model.endUpdate()}return o},S.prototype.createDropHandler=function(e,t,i,n){return i=null==i||i,l.Cb.bind(this,(function(o,r,a,s,d,h){for(var c=h?null:l.E.isTouchEvent(r)||l.E.isPenEvent(r)?document.elementFromPoint(l.E.getClientX(r),l.E.getClientY(r)):l.E.getSource(r);null!=c&&c!=this.container;)c=c.parentNode;if(null==c&&o.isEnabled()){if(0<(e=o.getImportableCells(e)).length){o.stopEditing();h=null!=a&&!l.E.isAltDown(r)&&o.isValidDropTarget(a,e,r);var u,p=null;if(!o.isCellLocked((a=null==a||h?a:null)||o.getDefaultParent())){o.model.beginUpdate();try{if(s=Math.round(s),d=Math.round(d),t&&o.isSplitTarget(a,e,r)?(m=o.view.scale,b=(s+(A=o.view.translate).x)*m,y=(d+A.y)*m,u=o.cloneCells(e),o.splitEdge(a,u,null,s-n.width/2,d-n.height/2,b,y),p=u):0<e.length&&(p=o.importCells(e,s,d,a)),null!=o.layoutManager){var g=o.layoutManager.getLayout(a);if(null!=g)for(var A,m=o.view.scale,b=(s+(A=o.view.translate).x)*m,y=(d+A.y)*m,f=0;f<p.length;f++)g.moveCell(p[f],b,y)}!i||null!=r&&l.E.isShiftDown(r)||o.fireEvent(new l.F("cellsInserted","cells",p))}catch(o){this.editorUi.handleError(o)}finally{o.model.endUpdate()}null!=p&&0<p.length&&(o.scrollCellToVisible(p[0]),o.setSelectionCells(p)),o.editAfterInsert&&null!=r&&l.E.isMouseEvent(r)&&null!=p&&1==p.length&&window.setTimeout((function(){o.startEditing(p[0])}),0)}}l.E.consume(r)}}))},S.prototype.createDragPreview=function(e,t){var i=document.createElement("div");return i.style.border=this.dragPreviewBorder,i.style.width=e+"px",i.style.height=t+"px",i},S.prototype.dropAndConnect=function(e,t,i,n,o){var r=this.getDropAndConnectGeometry(e,t[n],i,t),a=[];if(null!=r){var s=this.editorUi.editor.graph,d=null;s.model.beginUpdate();try{var h,c,u,p,g,A=s.getCellGeometry(e),m=s.getCellGeometry(t[n]),b=s.model.getParent(e),y=!0,f=(null!=s.layoutManager&&null!=(h=s.layoutManager.getLayout(b))&&h.constructor==l.tb&&(y=!1,null!=(a=s.view.getState(b)))&&(g=new l.hb(a.x/s.view.scale-s.view.translate.x,a.y/s.view.scale-s.view.translate.y),r.x+=g.x,r.y+=g.y,null!=(c=r.getTerminalPoint(!1)))&&(c.x+=g.x,c.y+=g.y),m.x),w=m.y,E=(s.model.isEdge(t[n])&&(w=f=0),s.model.isEdge(e)||null!=A&&!A.relative&&y);a=t=s.importCells(t,r.x-(E?f:0),r.y-(E?w:0),E?b:null),s.model.isEdge(e)?s.model.setTerminal(e,t[n],i==l.t.DIRECTION_NORTH):s.model.isEdge(t[n])?(s.model.setTerminal(t[n],e,!0),((u=s.getCellGeometry(t[n])).points=null)!=u.getTerminalPoint(!1)?u.setTerminalPoint(r.getTerminalPoint(!1),!1):E&&s.model.isVertex(b)&&(g=(p=s.view.getState(b)).cell!=s.view.currentRoot?new l.hb(p.x/s.view.scale-s.view.translate.x,p.y/s.view.scale-s.view.translate.y):new l.hb(0,0),s.cellsMoved(t,g.x,g.y,null,null,!0))):(m=s.getCellGeometry(t[n]),f=r.x-Math.round(m.x),w=r.y-Math.round(m.y),r.x=Math.round(m.x),r.y=Math.round(m.y),s.model.setGeometry(t[n],r),s.cellsMoved(t,f,w,null,null,!0),a=t.slice(),d=1==a.length?a[0]:null,t.push(s.insertEdge(null,null,"",e,t[n],s.createCurrentEdgeStyle()))),null!=o&&l.E.isShiftDown(o)||s.fireEvent(new l.F("cellsInserted","cells",t))}catch(e){this.editorUi.handleError(e)}finally{s.model.endUpdate()}s.editAfterInsert&&null!=o&&l.E.isMouseEvent(o)&&null!=d&&window.setTimeout((function(){s.startEditing(d)}),0)}return a},S.prototype.getDropAndConnectGeometry=function(e,t,i,n){var o,r,a,s=this.editorUi.editor.graph,d=s.view,h=(n=1<n.length,s.getCellGeometry(e)),c=s.getCellGeometry(t);return null!=h&&null!=c&&(c=c.clone(),s.model.isEdge(e)?(o=(a=(r=s.view.getState(e)).absolutePoints)[0],a=a[a.length-1],i==l.t.DIRECTION_NORTH?(c.x=o.x/d.scale-d.translate.x-c.width/2,c.y=o.y/d.scale-d.translate.y-c.height/2):(c.x=a.x/d.scale-d.translate.x-c.width/2,c.y=a.y/d.scale-d.translate.y-c.height/2)):(h.relative&&(r=s.view.getState(e),(h=h.clone()).x=(r.x-d.translate.x)/d.scale,h.y=(r.y-d.translate.y)/d.scale),e=s.defaultEdgeLength,s.model.isEdge(t)&&null!=c.getTerminalPoint(!0)&&null!=c.getTerminalPoint(!1)?(o=c.getTerminalPoint(!0),r=(a=c.getTerminalPoint(!1)).x-o.x,d=a.y-o.y,e=Math.sqrt(r*r+d*d),c.x=h.getCenterX(),c.y=h.getCenterY(),c.width=1,c.height=1,i==l.t.DIRECTION_NORTH?(c.height=e,c.y=h.y-e,c.setTerminalPoint(new l.hb(c.x,c.y),!1)):i==l.t.DIRECTION_EAST?(c.width=e,c.x=h.x+h.width,c.setTerminalPoint(new l.hb(c.x+c.width,c.y),!1)):i==l.t.DIRECTION_SOUTH?(c.height=e,c.y=h.y+h.height,c.setTerminalPoint(new l.hb(c.x,c.y+c.height),!1)):i==l.t.DIRECTION_WEST&&(c.width=e,c.x=h.x-e,c.setTerminalPoint(new l.hb(c.x,c.y),!1))):(!n&&45<c.width&&45<c.height&&45<h.width&&45<h.height&&(c.width=c.width*(h.height/c.height),c.height=h.height),c.x=h.x+h.width/2-c.width/2,c.y=h.y+h.height/2-c.height/2,i==l.t.DIRECTION_NORTH?c.y=c.y-h.height/2-c.height/2-e:i==l.t.DIRECTION_EAST?c.x=c.x+h.width/2+c.width/2+e:i==l.t.DIRECTION_SOUTH?c.y=c.y+h.height/2+c.height/2+e:i==l.t.DIRECTION_WEST&&(c.x=c.x-h.width/2-c.width/2-e),s.model.isEdge(t)&&null!=c.getTerminalPoint(!0)&&null!=t.getTerminal(!1)&&null!=(a=s.getCellGeometry(t.getTerminal(!1)))&&(i==l.t.DIRECTION_NORTH?(c.x-=a.getCenterX(),c.y-=a.getCenterY()+a.height/2):i==l.t.DIRECTION_EAST?(c.x-=a.getCenterX()-a.width/2,c.y-=a.getCenterY()):i==l.t.DIRECTION_SOUTH?(c.x-=a.getCenterX(),c.y-=a.getCenterY()-a.height/2):i==l.t.DIRECTION_WEST&&(c.x-=a.getCenterX()+a.width/2,c.y-=a.getCenterY()))))),c},S.prototype.isDropStyleEnabled=function(e,t){var i=!0;return null!=t&&1==e.length&&null!=(e=this.graph.getCellStyle(e[t]))?l.Cb.getValue(e,l.t.STYLE_STROKECOLOR,l.t.NONE)!=l.t.NONE||l.Cb.getValue(e,l.t.STYLE_FILLCOLOR,l.t.NONE)!=l.t.NONE:i},S.prototype.isDropStyleTargetIgnored=function(e){return this.graph.isSwimlane(e.cell)},S.prototype.createDragSource=function(e,t,i,n,o){for(var r=this.editorUi,a=r.editor.graph,s=null,h=null,c=this,u=0;u<n.length&&(null==h&&this.editorUi.editor.graph.model.isVertex(n[u])?h=u:null==s&&this.editorUi.editor.graph.model.isEdge(n[u])&&null==this.editorUi.editor.graph.model.getTerminal(n[u],!0)&&(s=u),null==h||null==s);u++);var p=this.isDropStyleEnabled(n,h),g=l.Cb.makeDraggable(e,this.editorUi.editor.graph,l.Cb.bind(this,(function(e,i){var l;null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=n&&null!=f&&D==x?(l=e.isCellSelected(f.cell)?e.getSelectionCells():[f.cell],l=this.updateShapes(e.model.isEdge(f.cell)?n[0]:n[h],l),e.setSelectionCells(l)):null!=n&&null!=D&&null!=b&&D!=x?(l=e.model.isEdge(b.cell)||null==s?h:s,e.setSelectionCells(this.dropAndConnect(b.cell,n,k,l,i))):t.apply(this,arguments),null!=this.editorUi.hoverIcons&&this.editorUi.hoverIcons.update(e.view.getState(e.getSelectionCell()))})),i,0,0,a.autoscroll,!0,!0),A=(a.addListener(l.E.ESCAPE,(function(){g.isActive()&&g.reset()})),g.mouseDown);function m(e,t){var i=null;return(i=l.Cb.createImage(e.src)).style.width=e.width+"px",i.style.height=e.height+"px",null!=t&&i.setAttribute("title",t),l.Cb.setOpacity(i,e==E?30:20),i.style.position="absolute",i.style.cursor="crosshair",i}g.mouseDown=function(e){l.E.isPopupTrigger(e)||l.E.isMultiTouchEvent(e)||(a.stopEditing(),A.apply(this,arguments))};var b=null,y=null,f=null,w=!1,C=m(this.triangleUp,l.ob.get("connect")),S=m(this.triangleRight,l.ob.get("connect")),v=m(this.triangleDown,l.ob.get("connect")),T=m(this.triangleLeft,l.ob.get("connect")),x=m(this.refreshTarget,l.ob.get("replace")),I=null,L=m(this.roundDrop),M=m(this.roundDrop),k=l.t.DIRECTION_NORTH,D=null;function V(e,t,i,n){return null!=n.parentNode&&(l.Cb.contains(i,e,t)?(l.Cb.setOpacity(n,100),D=n):l.Cb.setOpacity(n,n==x?30:20)),i}var P=g.createPreviewElement,R=(g.createPreviewElement=function(){var e=P.apply(this,arguments);return e.style.pointerEvents="none",this.previewElementWidth=e.style.width,this.previewElementHeight=e.style.height,e},g.dragEnter),F=(g.dragEnter=function(){null!=r.hoverIcons&&r.hoverIcons.setDisplay("none"),R.apply(this,arguments)},g.dragExit),O=(g.dragExit=function(){null!=r.hoverIcons&&r.hoverIcons.setDisplay(""),F.apply(this,arguments)},g.dragOver=function(e){var t,i,r,a,d,u,p,A;l.z.prototype.dragOver.apply(this,arguments),null!=this.currentGuide&&null!=D&&this.currentGuide.hide(),null!=this.previewElement&&(t=e.view,null!=f&&D==x?(this.previewElement.style.display=e.model.isEdge(f.cell)?"none":"",this.previewElement.style.left=f.x+"px",this.previewElement.style.top=f.y+"px",this.previewElement.style.width=f.width+"px",this.previewElement.style.height=f.height+"px"):null!=b&&null!=D?(i=e.model.isEdge(b.cell)||null==s?h:s,r=c.getDropAndConnectGeometry(b.cell,n[i],k,n),A=e.model.isEdge(b.cell)?null:e.getCellGeometry(b.cell),a=e.getCellGeometry(n[i]),p=e.model.getParent(b.cell),d=t.translate.x*t.scale,u=t.translate.y*t.scale,null!=A&&!A.relative&&e.model.isVertex(p)&&p!=t.currentRoot&&(d=(A=t.getState(p)).x,u=A.y),p=a.x,A=a.y,e.model.isEdge(n[i])&&(A=p=0),this.previewElement.style.left=(r.x-p)*t.scale+d+"px",this.previewElement.style.top=(r.y-A)*t.scale+u+"px",1==n.length&&(this.previewElement.style.width=r.width*t.scale+"px",this.previewElement.style.height=r.height*t.scale+"px"),this.previewElement.style.display=""):null!=g.currentHighlight.state&&e.model.isEdge(g.currentHighlight.state.cell)?(this.previewElement.style.left=Math.round(parseInt(this.previewElement.style.left)-o.width*t.scale/2)+"px",this.previewElement.style.top=Math.round(parseInt(this.previewElement.style.top)-o.height*t.scale/2)+"px"):(this.previewElement.style.width=this.previewElementWidth,this.previewElement.style.height=this.previewElementHeight,this.previewElement.style.display=""))},(new Date).getTime()),H=0,N=null,z=this.editorUi.editor.graph.getCellStyle(n[0]);return g.getDropTarget=l.Cb.bind(this,(function(e,t,i,o){var r=l.E.isAltDown(o)||null==n?null:e.getCellAt(t,i),a=(null==r||this.graph.isCellConnectable(r)||(s=this.graph.getModel().getParent(r),this.graph.getModel().isVertex(s)&&this.graph.isCellConnectable(s)&&(r=s)),e.isCellLocked(r)&&(r=null),e.view.getState(r)),s=D=null,c=(N!=a?(N=a,O=(new Date).getTime(),H=0,null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=a&&(this.updateThread=window.setTimeout((function(){null==D&&(N=a,g.getDropTarget(e,t,i,o))}),this.dropTargetDelay+10))):H=(new Date).getTime()-O,p&&H<2500&&null!=a&&!l.E.isShiftDown(o)&&(l.Cb.getValue(a.style,l.t.STYLE_SHAPE)!=l.Cb.getValue(z,l.t.STYLE_SHAPE)&&(l.Cb.getValue(a.style,l.t.STYLE_STROKECOLOR,l.t.NONE)!=l.t.NONE||l.Cb.getValue(a.style,l.t.STYLE_FILLCOLOR,l.t.NONE)!=l.t.NONE||l.Cb.getValue(a.style,l.t.STYLE_GRADIENTCOLOR,l.t.NONE)!=l.t.NONE)||"image"==l.Cb.getValue(z,l.t.STYLE_SHAPE)||1500<H||e.model.isEdge(a.cell))&&H>this.dropTargetDelay&&!this.isDropStyleTargetIgnored(a)&&(e.model.isVertex(a.cell)&&null!=h||e.model.isEdge(a.cell)&&e.model.isEdge(n[0]))?(f=a,c=e.model.isEdge(a.cell)?e.view.getPoint(a):new l.hb(a.getCenterX(),a.getCenterY()),c=new l.mb(c.x-this.refreshTarget.width/2,c.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height),x.style.left=Math.floor(c.x)+"px",x.style.top=Math.floor(c.y)+"px",null==I&&(e.container.appendChild(x),I=x.parentNode),V(t,i,c,x)):null==f||!l.Cb.contains(f,t,i)||1500<H&&!l.E.isShiftDown(o)?(f=null)!=I&&(x.parentNode.removeChild(x),I=null):null!=f&&null!=I&&(c=e.model.isEdge(f.cell)?e.view.getPoint(f):new l.hb(f.getCenterX(),f.getCenterY()),c=new l.mb(c.x-this.refreshTarget.width/2,c.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height),V(t,i,c,x)),w&&null!=b&&!l.E.isAltDown(o)&&null==D&&(s=l.mb.fromRectangle(b),e.model.isEdge(b.cell)?(u=b.absolutePoints,null!=L.parentNode&&(A=u[0],s.add(V(t,i,new l.mb(A.x-this.roundDrop.width/2,A.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),L))),null!=M.parentNode&&(m=u[u.length-1],s.add(V(t,i,new l.mb(m.x-this.roundDrop.width/2,m.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),M)))):(E=l.mb.fromRectangle(b),(E=null!=b.shape&&null!=b.shape.boundingBox?l.mb.fromRectangle(b.shape.boundingBox):E).grow(this.graph.tolerance),E.grow(d.e.ARROW_SPACING),null!=(P=this.graph.selectionCellsHandler.getHandler(b.cell))&&(E.x-=P.horizontalOffset/2,E.y-=P.verticalOffset/2,E.width+=P.horizontalOffset,E.height+=P.verticalOffset,null!=P.rotationShape)&&null!=P.rotationShape.node&&"hidden"!=P.rotationShape.node.style.visibility&&"none"!=P.rotationShape.node.style.display&&null!=P.rotationShape.boundingBox&&E.add(P.rotationShape.boundingBox),s.add(V(t,i,new l.mb(b.getCenterX()-this.triangleUp.width/2,E.y-this.triangleUp.height,this.triangleUp.width,this.triangleUp.height),C)),s.add(V(t,i,new l.mb(E.x+E.width,b.getCenterY()-this.triangleRight.height/2,this.triangleRight.width,this.triangleRight.height),S)),s.add(V(t,i,new l.mb(b.getCenterX()-this.triangleDown.width/2,E.y+E.height,this.triangleDown.width,this.triangleDown.height),v)),s.add(V(t,i,new l.mb(E.x-this.triangleLeft.width,b.getCenterY()-this.triangleLeft.height/2,this.triangleLeft.width,this.triangleLeft.height),T))),null!=s)&&s.grow(10),k=l.t.DIRECTION_NORTH,D==S?k=l.t.DIRECTION_EAST:D==v||D==M?k=l.t.DIRECTION_SOUTH:D==T&&(k=l.t.DIRECTION_WEST),null!=f&&D==x&&(a=f),(null==h||e.isCellConnectable(n[h]))&&(e.model.isEdge(r)&&null!=h||e.model.isVertex(r)&&e.isCellConnectable(r)));if(null!=b&&5e3<=H||b!=a&&(null==s||!l.Cb.contains(s,t,i)||500<H&&null==D&&c))if(w=!1,null!=(b=H<5e3&&H>this.dropTargetDelay||e.model.isEdge(r)?a:null)&&c){for(var u,A,m,E,P,R=[L,M,C,S,v,T],F=0;F<R.length;F++)null!=R[F].parentNode&&R[F].parentNode.removeChild(R[F]);e.model.isEdge(r)?null!=(u=a.absolutePoints)&&(A=u[0],m=u[u.length-1],L.style.left=Math.floor(A.x-this.roundDrop.width/2)+"px",L.style.top=Math.floor(A.y-this.roundDrop.height/2)+"px",M.style.left=Math.floor(m.x-this.roundDrop.width/2)+"px",M.style.top=Math.floor(m.y-this.roundDrop.height/2)+"px",null==e.model.getTerminal(r,!0)&&e.container.appendChild(L),null==e.model.getTerminal(r,!1))&&e.container.appendChild(M):(E=l.mb.fromRectangle(a),(E=null!=a.shape&&null!=a.shape.boundingBox?l.mb.fromRectangle(a.shape.boundingBox):E).grow(this.graph.tolerance),E.grow(d.e.ARROW_SPACING),null!=(P=this.graph.selectionCellsHandler.getHandler(a.cell))&&(E.x-=P.horizontalOffset/2,E.y-=P.verticalOffset/2,E.width+=P.horizontalOffset,E.height+=P.verticalOffset,null!=P.rotationShape)&&null!=P.rotationShape.node&&"hidden"!=P.rotationShape.node.style.visibility&&"none"!=P.rotationShape.node.style.display&&null!=P.rotationShape.boundingBox&&E.add(P.rotationShape.boundingBox),C.style.left=Math.floor(a.getCenterX()-this.triangleUp.width/2)+"px",C.style.top=Math.floor(E.y-this.triangleUp.height)+"px",S.style.left=Math.floor(E.x+E.width)+"px",S.style.top=Math.floor(a.getCenterY()-this.triangleRight.height/2)+"px",v.style.left=C.style.left,v.style.top=Math.floor(E.y+E.height)+"px",T.style.left=Math.floor(E.x-this.triangleLeft.width)+"px",T.style.top=S.style.top,"eastwest"!=a.style.portConstraint&&(e.container.appendChild(C),e.container.appendChild(v)),e.container.appendChild(S),e.container.appendChild(T)),null!=a&&null!=(y=e.selectionCellsHandler.getHandler(a.cell))&&null!=y.setHandlesVisible&&y.setHandlesVisible(!1),w=!0}else for(R=[L,M,C,S,v,T],F=0;F<R.length;F++)null!=R[F].parentNode&&R[F].parentNode.removeChild(R[F]);w||null==y||y.setHandlesVisible(!0);var U=l.E.isAltDown(o)&&!l.E.isShiftDown(o)||null!=f&&D==x?null:l.z.prototype.getDropTarget.apply(this,arguments),_=e.getModel();if(null!=U&&(null!=D||!e.isSplitTarget(U,n,o))){for(;null!=U&&!e.isValidDropTarget(U,n,o)&&_.isVertex(_.getParent(U));)U=_.getParent(U);null!=U&&(e.view.currentRoot==U||!e.isValidRoot(U)&&0==e.getModel().getChildCount(U)||e.isCellLocked(U)||_.isEdge(U)||!e.isValidDropTarget(U,n,o))&&(U=null)}return U})),g.stopDrag=function(){l.z.prototype.stopDrag.apply(this,arguments);for(var e=[L,M,x,C,S,v,T],t=0;t<e.length;t++)null!=e[t].parentNode&&e[t].parentNode.removeChild(e[t]);null!=b&&null!=y&&y.reset(),D=I=f=b=y=null},g},S.prototype.itemClicked=function(e,t,i){var n,o=this.editorUi.editor.graph;if(o.container.focus(),l.E.isAltDown(i)&&1==o.getSelectionCount()&&o.model.isVertex(o.getSelectionCell())){for(var r=null,a=0;a<e.length&&null==r;a++)o.model.isVertex(e[a])&&(r=a);null!=r&&(o.setSelectionCells(this.dropAndConnect(o.getSelectionCell(),e,l.E.isMetaDown(i)||l.E.isControlDown(i)?l.E.isShiftDown(i)?l.t.DIRECTION_WEST:l.t.DIRECTION_NORTH:l.E.isShiftDown(i)?l.t.DIRECTION_EAST:l.t.DIRECTION_SOUTH,r,i)),o.scrollCellToVisible(o.getSelectionCell()))}else l.E.isShiftDown(i)&&!o.isSelectionEmpty()?(this.updateShapes(e[0],o.getSelectionCells()),o.scrollCellToVisible(o.getSelectionCell())):(n=l.E.isAltDown(i)?o.getFreeInsertPoint():o.getCenterInsertPoint(o.getBoundingBoxFromGeometry(e,!0)),t.drop(o,i,null,n.x,n.y,!0))},S.prototype.addClickHandler=function(e,t,i){var n=this.editorUi.editor.graph,o=t.mouseDown,r=t.mouseMove,a=t.mouseUp,s=n.tolerance,d=null,h=this;t.mouseDown=function(t){o.apply(this,arguments),d=new l.hb(l.E.getClientX(t),l.E.getClientY(t)),null!=this.dragElement&&(this.dragElement.style.display="none",l.Cb.setOpacity(e,50))},t.mouseMove=function(t){null!=this.dragElement&&"none"==this.dragElement.style.display&&null!=d&&(Math.abs(d.x-l.E.getClientX(t))>s||Math.abs(d.y-l.E.getClientY(t))>s)&&(this.dragElement.style.display="",l.Cb.setOpacity(e,100)),r.apply(this,arguments)},t.mouseUp=function(n){try{l.E.isPopupTrigger(n)||null!=this.currentGraph||null==this.dragElement||"none"!=this.dragElement.style.display||h.itemClicked(i,t,n,e),a.apply(t,arguments),l.Cb.setOpacity(e,100),d=null,h.currentElt=e}catch(n){t.reset(),h.editorUi.handleError(n)}}},S.prototype.createVertexTemplateEntry=function(e,t,i,n,o,r,a,s){return s=null!=s&&0<s.length?s:null!=o?o.toLowerCase():"",this.addEntry(s,l.Cb.bind(this,(function(){return this.createVertexTemplate(e,t,i,n,o,r,a)})))},S.prototype.createVertexTemplate=function(e,t,i,n,o,r,a,s){return(n=[new l.d(null!=n?n:"",new l.I(0,0,t,i),e)])[0].vertex=!0,this.createVertexTemplateFromCells(n,t,i,o,r,a,s)},S.prototype.createVertexTemplateFromData=function(e,t,i,n,o,r,a){e=l.Cb.parseXml(p.a.decompress(e));var s=new l.n(e),d=new l.M;s.decode(e.documentElement,d),s=this.graph.cloneCells(d.root.getChildAt(0).children);return this.createVertexTemplateFromCells(s,t,i,n,o,r,a)},S.prototype.createVertexTemplateFromCells=function(e,t,i,n,l,o,r){return this.createItem(e,n,l,o,t,i,r)},S.prototype.createEdgeTemplateEntry=function(e,t,i,n,o,r,a,s){return a=null!=a&&0<a.length?a:o.toLowerCase(),this.addEntry(a,l.Cb.bind(this,(function(){return this.createEdgeTemplate(e,t,i,n,o,r,s)})))},S.prototype.createEdgeTemplate=function(e,t,i,n,o,r,a){return(n=new l.d(null!=n?n:"",new l.I(0,0,t,i),e)).geometry.setTerminalPoint(new l.hb(0,i),!0),n.geometry.setTerminalPoint(new l.hb(t,0),!1),n.geometry.relative=!0,n.edge=!0,this.createEdgeTemplateFromCells([n],t,i,o,r,a)},S.prototype.createEdgeTemplateFromCells=function(e,t,i,n,l,o){return this.createItem(e,n,l,!0,t,i,o)},S.prototype.addPaletteFunctions=function(e,t,i,n){this.addPalette(e,t,i,l.Cb.bind(this,(function(e){for(var t=0;t<n.length;t++)e.appendChild(n[t](e))})))},S.prototype.addPalette=function(e,t,i,n){t=this.createTitle(t);var o=(this.container.appendChild(t),document.createElement("div"));return(i=(o.className="geSidebar",l.k.IS_POINTER&&(o.style.touchAction="none"),i?(n(o),n=null):o.style.display="none",this.addFoldingHandler(t,o,n),document.createElement("div"))).appendChild(o),this.container.appendChild(i),null!=e&&(this.palettes[e]=[t,i]),o},S.prototype.addFoldingHandler=function(e,t,i){var n=!1;(!l.k.IS_IE||8<=document.documentMode)&&(e.style.backgroundImage="none"==t.style.display?"url('"+this.collapsedImage+"')":"url('"+this.expandedImage+"')"),e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="0% 50%",l.E.addListener(e,"click",l.Cb.bind(this,(function(o){var a;"none"==t.style.display?(n||(n=!0,null==i)?t.style.display="block":(e.style.cursor="wait",a=e.innerHTML,e.innerHTML=l.ob.get("loading")+"...",window.setTimeout((function(){t.style.display="block",e.style.cursor="",e.innerHTML=a;var n=l.k.NO_FO;l.k.NO_FO=r.b.prototype.originalNoForeignObject,i(t,e),l.k.NO_FO=n}),l.k.IS_FF?20:0)),e.style.backgroundImage="url('"+this.expandedImage+"')"):(e.style.backgroundImage="url('"+this.collapsedImage+"')",t.style.display="none"),l.E.consume(o)}))),l.k.IS_QUIRKS||l.E.addListener(e,l.k.IS_POINTER?"pointerdown":"mousedown",l.Cb.bind(this,(function(e){e.preventDefault()})))},S.prototype.removePalette=function(e){var t=this.palettes[e];if(null==t)return!1;this.palettes[e]=null;for(var i=0;i<t.length;i++)this.container.removeChild(t[i]);return!0},S.prototype.addImagePalette=function(e,t,i,n,o,r,a){for(var s=[],d=0;d<o.length;d++)l.Cb.bind(this,(function(e,t,i){var l,o;null==i&&(l=e.lastIndexOf("/"),o=e.lastIndexOf("."),i=e.substring(0<=l?l+1:0,0<=o?o:e.length).replace(/[-_]/g," ")),s.push(this.createVertexTemplateEntry("image;html=1;labelBackgroundColor=#ffffff;image="+Object(g.a)(e+n).replace(";base",""),this.defaultImageWidth,this.defaultImageHeight,"",t,null!=t,null,this.filterTags(i)))}))(o[d],null!=r?r[d]:null,null!=a?a[o[d]]:null);this.addPaletteFunctions(e,t,!1,s)},S.prototype.getTagsForStencil=function(e,t,i){for(var n=e.split("."),l=1;l<n.length;l++)n[l]=n[l].replace(/_/g," ");return n.push(t.replace(/_/g," ")),null!=i&&n.push(i),n.slice(1,n.length)},S.prototype.addStencilPalette=function(e,t,i,n,o,r,a,s,d,h){if(void 0===h&&(h=!1),a=null!=a?a:1,this.addStencilsToIndex){var c=[];if(null!=d)for(var u=0;u<d.length;u++)c.push(d[u]);l.vb.loadStencilSet(i,l.Cb.bind(this,(function(e,t,i,r,d){var h,u;(null==o||l.Cb.indexOf(o,t)<0)&&(h=this.getTagsForStencil(e,t),null!=(u=null!=s?s[t]:null)&&h.push(u),c.push(this.createVertexTemplateEntry("shape="+e+t.toLowerCase()+n,Math.round(r*a),Math.round(d*a),"",t.replace(/_/g," "),null,null,this.filterTags(h.join(" ")))))})),!0,!0),this.addPaletteFunctions(e,t,!!h,c)}else this.addPalette(e,t,!!h,l.Cb.bind(this,(function(e){if(null==n&&(n=""),null!=r&&r.call(this,e),null!=d)for(var t=0;t<d.length;t++)d[t](e);l.vb.loadStencilSet(i,l.Cb.bind(this,(function(t,i,r,s,d){(null==o||l.Cb.indexOf(o,i)<0)&&e.appendChild(this.createVertexTemplate("shape="+t+i.toLowerCase()+n,Math.round(s*a),Math.round(d*a),"",i.replace(/_/g," "),!0))})),!0)})))},S.prototype.destroy=function(){null!=this.graph&&(null!=this.graph.container&&null!=this.graph.container.parentNode&&this.graph.container.parentNode.removeChild(this.graph.container),this.graph.destroy(),this.graph=null),null!=this.pointerUpHandler&&(l.E.removeListener(document,l.k.IS_POINTER?"pointerup":"mouseup",this.pointerUpHandler),this.pointerUpHandler=null),null!=this.pointerDownHandler&&(l.E.removeListener(document,l.k.IS_POINTER?"pointerdown":"mousedown",this.pointerDownHandler),this.pointerDownHandler=null),null!=this.pointerMoveHandler&&(l.E.removeListener(document,l.k.IS_POINTER?"pointermove":"mousemove",this.pointerMoveHandler),this.pointerMoveHandler=null),null!=this.pointerOutHandler&&(l.E.removeListener(document,l.k.IS_POINTER?"pointerout":"mouseout",this.pointerOutHandler),this.pointerOutHandler=null)};var v=i(439);function T(e,t){this.editorUi=e,this.container=t,this.staticElements=[],this.init(),this.gestureHandler=l.Cb.bind(this,(function(e){null!=this.editorUi.currentMenu&&l.E.getSource(e)!=this.editorUi.currentMenu.div&&this.hideMenu()})),l.E.addGestureListeners(document,this.gestureHandler)}T.prototype.dropdownImage=m.g,T.prototype.dropdownImageHtml='<img border="0" style="position:absolute;right:4px;top:8px;" src="'+T.prototype.dropdownImage+'" valign="middle"/>',T.prototype.selectedBackground="#d0d0d0",T.prototype.unselectedBackground="none",T.prototype.staticElements=null,T.prototype.init=function(){var e,t=screen.width,i=(700<=(t-=740<screen.height?56:0)&&(e=this.addMenu("",l.ob.get("view")+" ("+l.ob.get("panTooltip")+")",!0,"viewPanels",null,!0),this.addDropDownArrow(e,"geSprite-formatpanel",38,50,-4,-3,36,-8),this.addSeparator()),this.addMenu("",l.ob.get("zoom")+" (Alt+Mousewheel)",!0,"viewZoom",null,!0)),n=(i.showDisabled=!0,i.style.whiteSpace="nowrap",i.style.position="relative",i.style.overflow="hidden",d.d.COMPAT_UI?i.style.width=l.k.IS_QUIRKS?"58px":"50px":i.style.width=l.k.IS_QUIRKS?"62px":"36px",420<=t&&(this.addSeparator(),(n=this.addItems(["zoomIn","zoomOut"]))[0].setAttribute("title",l.ob.get("zoomIn")+" ("+this.editorUi.actions.get("zoomIn").shortcut+")"),n[1].setAttribute("title",l.ob.get("zoomOut")+" ("+this.editorUi.actions.get("zoomOut").shortcut+")")),this.updateZoom=l.Cb.bind(this,(function(){i.innerHTML=Math.round(100*this.editorUi.editor.graph.view.scale)+"%"+this.dropdownImageHtml,d.d.COMPAT_UI&&(i.getElementsByTagName("img")[0].style.right="1px",i.getElementsByTagName("img")[0].style.top="5px")})),this.editorUi.editor.graph.view.addListener(l.E.EVENT_SCALE,this.updateZoom),this.editorUi.editor.addListener("resetGraphView",this.updateZoom),this.addItems(["-","undo","redo"]));n[1].setAttribute("title",l.ob.get("undo")+" ("+this.editorUi.actions.get("undo").shortcut+")"),n[2].setAttribute("title",l.ob.get("redo")+" ("+this.editorUi.actions.get("redo").shortcut+")"),320<=t&&(n=this.addItems(["-","delete"]))[1].setAttribute("title",l.ob.get("delete")+" ("+this.editorUi.actions.get("delete").shortcut+")"),550<=t&&this.addItems(["-","toFront","toBack"]),740<=t&&(this.addItems(["-","fillColor"]),780<=t)&&(this.addItems(["strokeColor"]),820<=t)&&this.addItems(["shadow"]),400<=t&&(this.addSeparator(),440<=t&&(this.edgeShapeMenu=this.addMenuFunction("",l.ob.get("connection"),!1,l.Cb.bind(this,(function(e){this.editorUi.menus.edgeStyleChange(e,"",[l.t.STYLE_SHAPE,"width"],[null,null],"geIcon geSprite geSprite-connection",null,!0).setAttribute("title",l.ob.get("line")),this.editorUi.menus.edgeStyleChange(e,"",[l.t.STYLE_SHAPE,"width"],["link",null],"geIcon geSprite geSprite-linkedge",null,!0).setAttribute("title",l.ob.get("link")),this.editorUi.menus.edgeStyleChange(e,"",[l.t.STYLE_SHAPE,"width"],["flexArrow",null],"geIcon geSprite geSprite-arrow",null,!0).setAttribute("title",l.ob.get("arrow")),this.editorUi.menus.edgeStyleChange(e,"",[l.t.STYLE_SHAPE,"width"],["arrow",null],"geIcon geSprite geSprite-simplearrow",null,!0).setAttribute("title",l.ob.get("simpleArrow"))}))),this.addDropDownArrow(this.edgeShapeMenu,"geSprite-connection",44,50,0,0,22,-4)),this.edgeStyleMenu=this.addMenuFunction("geSprite-orthogonal",l.ob.get("waypoints"),!1,l.Cb.bind(this,(function(e){this.editorUi.menus.edgeStyleChange(e,"",[l.t.STYLE_EDGE,l.t.STYLE_CURVED,l.t.STYLE_NOEDGESTYLE],[null,null,null],"geIcon geSprite geSprite-straight",null,!0).setAttribute("title",l.ob.get("straight")),this.editorUi.menus.edgeStyleChange(e,"",[l.t.STYLE_EDGE,l.t.STYLE_CURVED,l.t.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle",null,null],"geIcon geSprite geSprite-orthogonal",null,!0).setAttribute("title",l.ob.get("orthogonal")),this.editorUi.menus.edgeStyleChange(e,"",[l.t.STYLE_EDGE,l.t.STYLE_ELBOW,l.t.STYLE_CURVED,l.t.STYLE_NOEDGESTYLE],["elbowEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalelbow",null,!0).setAttribute("title",l.ob.get("simple")),this.editorUi.menus.edgeStyleChange(e,"",[l.t.STYLE_EDGE,l.t.STYLE_ELBOW,l.t.STYLE_CURVED,l.t.STYLE_NOEDGESTYLE],["elbowEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalelbow",null,!0).setAttribute("title",l.ob.get("simple")),this.editorUi.menus.edgeStyleChange(e,"",[l.t.STYLE_EDGE,l.t.STYLE_ELBOW,l.t.STYLE_CURVED,l.t.STYLE_NOEDGESTYLE],["isometricEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalisometric",null,!0).setAttribute("title",l.ob.get("isometric")),this.editorUi.menus.edgeStyleChange(e,"",[l.t.STYLE_EDGE,l.t.STYLE_ELBOW,l.t.STYLE_CURVED,l.t.STYLE_NOEDGESTYLE],["isometricEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalisometric",null,!0).setAttribute("title",l.ob.get("isometric")),this.editorUi.menus.edgeStyleChange(e,"",[l.t.STYLE_EDGE,l.t.STYLE_CURVED,l.t.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle","1",null],"geIcon geSprite geSprite-curved",null,!0).setAttribute("title",l.ob.get("curved")),this.editorUi.menus.edgeStyleChange(e,"",[l.t.STYLE_EDGE,l.t.STYLE_CURVED,l.t.STYLE_NOEDGESTYLE],["entityRelationEdgeStyle",null,null],"geIcon geSprite geSprite-entity",null,!0).setAttribute("title",l.ob.get("entityRelation"))}))),this.addDropDownArrow(this.edgeStyleMenu,"geSprite-orthogonal",44,50,0,0,22,-4)),this.addTableDropDown()},T.prototype.addTableDropDown=function(){this.addSeparator();var e=this.addMenuFunction("geIcon geSprite geSprite-table",l.ob.get("table"),!1,l.Cb.bind(this,(function(t){var i=this.editorUi.editor.graph,n=i.getSelectionCell();i.isTableCell(n)||i.isTableRow(n)||i.isTable(n)?((e=t.addItem("",null,l.Cb.bind(this,(function(){try{i.insertTableColumn(n,!0)}catch(t){this.editorUi.handleError(t)}})),null,"geIcon geSprite geSprite-insertcolumnbefore")).setAttribute("title",l.ob.get("insertColumnBefore")),(e=t.addItem("",null,l.Cb.bind(this,(function(){try{i.insertTableColumn(n,!1)}catch(t){this.editorUi.handleError(t)}})),null,"geIcon geSprite geSprite-insertcolumnafter")).setAttribute("title",l.ob.get("insertColumnAfter")),(e=t.addItem("Delete column",null,l.Cb.bind(this,(function(){if(null!=n)try{i.deleteTableColumn(n)}catch(t){this.editorUi.handleError(t)}})),null,"geIcon geSprite geSprite-deletecolumn")).setAttribute("title",l.ob.get("deleteColumn")),(e=t.addItem("",null,l.Cb.bind(this,(function(){try{i.insertTableRow(n,!0)}catch(t){this.editorUi.handleError(t)}})),null,"geIcon geSprite geSprite-insertrowbefore")).setAttribute("title",l.ob.get("insertRowBefore")),(e=t.addItem("",null,l.Cb.bind(this,(function(){try{i.insertTableRow(n,!1)}catch(t){this.editorUi.handleError(t)}})),null,"geIcon geSprite geSprite-insertrowafter")).setAttribute("title",l.ob.get("insertRowAfter")),(e=t.addItem("",null,l.Cb.bind(this,(function(){try{i.deleteTableRow(n)}catch(t){this.editorUi.handleError(t)}})),null,"geIcon geSprite geSprite-deleterow")).setAttribute("title",l.ob.get("deleteRow"))):this.editorUi.menus.addInsertTableCellItem(t)})));return e.style.position="relative",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.innerHTML='<div class="geSprite geSprite-table" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,e.style.width=l.k.IS_QUIRKS?"50px":"30px",d.d.COMPAT_UI&&(e.getElementsByTagName("img")[0].style.left="22px",e.getElementsByTagName("img")[0].style.top="5px"),e},T.prototype.addDropDownArrow=function(e,t,i,n,o,r,a,s){a=null!=a?a:32,o=d.d.COMPAT_UI?o:s,e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.style.position="relative",e.innerHTML='<div class="geSprite '+t+'" style="margin-left:'+o+"px;margin-top:"+r+'px;"></div>'+this.dropdownImageHtml,e.style.width=l.k.IS_QUIRKS?n+"px":n-a+"px",l.k.IS_QUIRKS&&(e.style.height=d.d.COMPAT_UI?"24px":"26px"),d.d.COMPAT_UI&&(e.getElementsByTagName("img")[0].style.left="24px",e.getElementsByTagName("img")[0].style.top="5px",e.style.width=l.k.IS_QUIRKS?i+"px":i-10+"px")},T.prototype.setFontName=function(e){null!=this.fontMenu&&(this.fontMenu.innerHTML='<div style="width:60px;overflow:hidden;display:inline-block;">'+l.Cb.htmlEntities(e)+"</div>"+this.dropdownImageHtml)},T.prototype.setFontSize=function(e){null!=this.sizeMenu&&(this.sizeMenu.innerHTML='<div style="width:24px;overflow:hidden;display:inline-block;">'+e+"</div>"+this.dropdownImageHtml)},T.prototype.createTextToolbar=function(){var e,t=this.editorUi.editor.graph,i=((e=((e=((e=((e=this.addMenu("",l.ob.get("style"),!0,"formatBlock")).style.position="relative",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.innerHTML=l.ob.get("style")+this.dropdownImageHtml,d.d.COMPAT_UI&&(e.style.paddingRight="18px",e.getElementsByTagName("img")[0].style.right="1px",e.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.fontMenu=this.addMenu("",l.ob.get("fontFamily"),!0,"fontFamily"),this.fontMenu.style.position="relative",this.fontMenu.style.whiteSpace="nowrap",this.fontMenu.style.overflow="hidden",this.fontMenu.style.width=l.k.IS_QUIRKS?"80px":"60px",this.setFontName(v.a.prototype.defaultFont),d.d.COMPAT_UI&&(this.fontMenu.style.paddingRight="18px",this.fontMenu.getElementsByTagName("img")[0].style.right="1px",this.fontMenu.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.sizeMenu=this.addMenu(v.a.prototype.defaultFontSize,l.ob.get("fontSize"),!0,"fontSize"),this.sizeMenu.style.position="relative",this.sizeMenu.style.whiteSpace="nowrap",this.sizeMenu.style.overflow="hidden",this.sizeMenu.style.width=l.k.IS_QUIRKS?"44px":"24px",this.setFontSize(v.a.prototype.defaultFontSize),d.d.COMPAT_UI&&(this.sizeMenu.style.paddingRight="18px",this.sizeMenu.getElementsByTagName("img")[0].style.right="1px",this.sizeMenu.getElementsByTagName("img")[0].style.top="5px"),this.addItems(["-","undo","redo","-","bold","italic","underline"])))[1].setAttribute("title",l.ob.get("undo")+" ("+this.editorUi.actions.get("undo").shortcut+")"),e[2].setAttribute("title",l.ob.get("redo")+" ("+this.editorUi.actions.get("redo").shortcut+")"),e[4].setAttribute("title",l.ob.get("bold")+" ("+this.editorUi.actions.get("bold").shortcut+")"),e[5].setAttribute("title",l.ob.get("italic")+" ("+this.editorUi.actions.get("italic").shortcut+")"),e[6].setAttribute("title",l.ob.get("underline")+" ("+this.editorUi.actions.get("underline").shortcut+")"),this.addMenuFunction("",l.ob.get("align"),!1,l.Cb.bind(this,(function(e){(i=e.addItem("",null,l.Cb.bind(this,(function(e){t.cellEditor.alignText(l.t.ALIGN_LEFT,e)})),null,"geIcon geSprite geSprite-left")).setAttribute("title",l.ob.get("left")),(i=e.addItem("",null,l.Cb.bind(this,(function(e){t.cellEditor.alignText(l.t.ALIGN_CENTER,e)})),null,"geIcon geSprite geSprite-center")).setAttribute("title",l.ob.get("center")),(i=e.addItem("",null,l.Cb.bind(this,(function(e){t.cellEditor.alignText(l.t.ALIGN_RIGHT,e)})),null,"geIcon geSprite geSprite-right")).setAttribute("title",l.ob.get("right")),(i=e.addItem("",null,l.Cb.bind(this,(function(){document.execCommand("justifyfull",!1,null)})),null,"geIcon geSprite geSprite-justifyfull")).setAttribute("title",l.ob.get("justifyfull")),(i=e.addItem("",null,l.Cb.bind(this,(function(){document.execCommand("insertorderedlist",!1,null)})),null,"geIcon geSprite geSprite-orderedlist")).setAttribute("title",l.ob.get("numberedList")),(i=e.addItem("",null,l.Cb.bind(this,(function(){document.execCommand("insertunorderedlist",!1,null)})),null,"geIcon geSprite geSprite-unorderedlist")).setAttribute("title",l.ob.get("bulletedList")),(i=e.addItem("",null,l.Cb.bind(this,(function(){document.execCommand("outdent",!1,null)})),null,"geIcon geSprite geSprite-outdent")).setAttribute("title",l.ob.get("decreaseIndent")),(i=e.addItem("",null,l.Cb.bind(this,(function(){document.execCommand("indent",!1,null)})),null,"geIcon geSprite geSprite-indent")).setAttribute("title",l.ob.get("increaseIndent"))}))))).style.position="relative",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.innerHTML='<div class="geSprite geSprite-left" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,e.style.width=l.k.IS_QUIRKS?"50px":"30px",d.d.COMPAT_UI&&(e.getElementsByTagName("img")[0].style.left="22px",e.getElementsByTagName("img")[0].style.top="5px"),this.addMenuFunction("",l.ob.get("format"),!1,l.Cb.bind(this,(function(e){(i=e.addItem("",null,this.editorUi.actions.get("subscript").funct,null,"geIcon geSprite geSprite-subscript")).setAttribute("title",l.ob.get("subscript")+" ("+d.c.CTRL_KEY+"+,)"),(i=e.addItem("",null,this.editorUi.actions.get("superscript").funct,null,"geIcon geSprite geSprite-superscript")).setAttribute("title",l.ob.get("superscript")+" ("+d.c.CTRL_KEY+"+.)"),(i=e.addItem("",null,this.editorUi.actions.get("fontColor").funct,null,"geIcon geSprite geSprite-fontcolor")).setAttribute("title",l.ob.get("fontColor")),(i=e.addItem("",null,this.editorUi.actions.get("backgroundColor").funct,null,"geIcon geSprite geSprite-fontbackground")).setAttribute("title",l.ob.get("backgroundColor")),(i=e.addItem("",null,l.Cb.bind(this,(function(){document.execCommand("removeformat",!1,null)})),null,"geIcon geSprite geSprite-removeformat")).setAttribute("title",l.ob.get("removeFormat"))}))))).style.position="relative",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.innerHTML='<div class="geSprite geSprite-dots" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,e.style.width=l.k.IS_QUIRKS?"50px":"30px",d.d.COMPAT_UI&&(e.getElementsByTagName("img")[0].style.left="22px",e.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.addButton("geIcon geSprite geSprite-code",l.ob.get("html"),(function(){t.cellEditor.toggleViewMode(),0<t.cellEditor.textarea.innerHTML.length&&("&nbsp;"!=t.cellEditor.textarea.innerHTML||!t.cellEditor.clearOnChange)&&window.setTimeout((function(){document.execCommand("selectAll",!1,null)}))})),this.addSeparator(),this.addMenuFunction("geIcon geSprite geSprite-table",l.ob.get("table"),!1,l.Cb.bind(this,(function(e){var i,n=t.getSelectedElement(),o=t.getParentByNames(n,["TD","TH"],t.cellEditor.text2),r=t.getParentByName(n,"TR",t.cellEditor.text2);null==r?this.editorUi.menus.addInsertTableItem(e):(i=t.getParentByName(r,"TABLE",t.cellEditor.text2),(n=e.addItem("",null,l.Cb.bind(this,(function(){try{t.selectNode(t.insertColumn(i,null!=o?o.cellIndex:0))}catch(e){this.editorUi.handleError(e)}})),null,"geIcon geSprite geSprite-insertcolumnbefore")).setAttribute("title",l.ob.get("insertColumnBefore")),(n=e.addItem("",null,l.Cb.bind(this,(function(){try{t.selectNode(t.insertColumn(i,null!=o?o.cellIndex+1:-1))}catch(e){this.editorUi.handleError(e)}})),null,"geIcon geSprite geSprite-insertcolumnafter")).setAttribute("title",l.ob.get("insertColumnAfter")),(n=e.addItem("Delete column",null,l.Cb.bind(this,(function(){if(null!=o)try{t.deleteColumn(i,o.cellIndex)}catch(e){this.editorUi.handleError(e)}})),null,"geIcon geSprite geSprite-deletecolumn")).setAttribute("title",l.ob.get("deleteColumn")),(n=e.addItem("",null,l.Cb.bind(this,(function(){try{t.selectNode(t.insertRow(i,r.sectionRowIndex))}catch(e){this.editorUi.handleError(e)}})),null,"geIcon geSprite geSprite-insertrowbefore")).setAttribute("title",l.ob.get("insertRowBefore")),(n=e.addItem("",null,l.Cb.bind(this,(function(){try{t.selectNode(t.insertRow(i,r.sectionRowIndex+1))}catch(e){this.editorUi.handleError(e)}})),null,"geIcon geSprite geSprite-insertrowafter")).setAttribute("title",l.ob.get("insertRowAfter")),(n=e.addItem("",null,l.Cb.bind(this,(function(){try{t.deleteRow(i,r.sectionRowIndex)}catch(e){this.editorUi.handleError(e)}})),null,"geIcon geSprite geSprite-deleterow")).setAttribute("title",l.ob.get("deleteRow")),(n=e.addItem("",null,l.Cb.bind(this,(function(){var e=i.style.borderColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,(function(e,t,i,n){return"#"+("0"+Number(t).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)}));this.editorUi.pickColor(e,(function(e){null==e||e==l.t.NONE?(i.removeAttribute("border"),i.style.border="",i.style.borderCollapse=""):(i.setAttribute("border","1"),i.style.border="1px solid "+e,i.style.borderCollapse="collapse")}))})),null,"geIcon geSprite geSprite-strokecolor")).setAttribute("title",l.ob.get("borderColor")),(n=e.addItem("",null,l.Cb.bind(this,(function(){var e=i.style.backgroundColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,(function(e,t,i,n){return"#"+("0"+Number(t).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)}));this.editorUi.pickColor(e,(function(e){null==e||e==l.t.NONE?i.style.backgroundColor="":i.style.backgroundColor=e}))})),null,"geIcon geSprite geSprite-fillcolor")).setAttribute("title",l.ob.get("backgroundColor")),(n=e.addItem("",null,l.Cb.bind(this,(function(){var e=i.getAttribute("cellPadding")||0;e=new s.b(this.editorUi,e,l.ob.get("apply"),l.Cb.bind(this,(function(e){null!=e&&0<e.length?i.setAttribute("cellPadding",e):i.removeAttribute("cellPadding")})),l.ob.get("spacing"));this.editorUi.showDialog(e.container,300,80,!0,!0),e.init()})),null,"geIcon geSprite geSprite-fit")).setAttribute("title",l.ob.get("spacing")),(n=e.addItem("",null,l.Cb.bind(this,(function(){i.setAttribute("align","left")})),null,"geIcon geSprite geSprite-left")).setAttribute("title",l.ob.get("left")),(n=e.addItem("",null,l.Cb.bind(this,(function(){i.setAttribute("align","center")})),null,"geIcon geSprite geSprite-center")).setAttribute("title",l.ob.get("center")),(n=e.addItem("",null,l.Cb.bind(this,(function(){i.setAttribute("align","right")})),null,"geIcon geSprite geSprite-right")).setAttribute("title",l.ob.get("right")))}))));i.style.position="relative",i.style.whiteSpace="nowrap",i.style.overflow="hidden",i.innerHTML='<div class="geSprite geSprite-table" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,i.style.width=l.k.IS_QUIRKS?"50px":"30px",d.d.COMPAT_UI&&(i.getElementsByTagName("img")[0].style.left="22px",i.getElementsByTagName("img")[0].style.top="5px")},T.prototype.hideMenu=function(){this.editorUi.hideCurrentMenu()},T.prototype.addMenu=function(e,t,i,n,l,o,r){var a=this.editorUi.menus.get(n),s=this.addMenuFunction(e,t,i,(function(){a.funct.apply(a,arguments)}),l,o);return r||a.addListener("stateChanged",(function(){s.setEnabled(a.enabled)})),s},T.prototype.addMenuFunction=function(e,t,i,n,l,o){return this.addMenuFunctionInContainer(null!=l?l:this.container,e,t,i,n,o)},T.prototype.addMenuFunctionInContainer=function(e,t,i,n,l,o){return t=n?this.createLabel(t):this.createButton(t),this.initElement(t,i),this.addMenuHandler(t,n,l,o),e.appendChild(t),t},T.prototype.addSeparator=function(e){e=null!=e?e:this.container;var t=document.createElement("div");return t.className="geSeparator",e.appendChild(t),t},T.prototype.addItems=function(e,t,i){for(var n=[],l=0;l<e.length;l++){var o=e[l];n.push("-"==o?this.addSeparator(t):this.addItem("geSprite-"+o.toLowerCase(),o,t,i))}return n},T.prototype.addItem=function(e,t,i,n){var l=this.editorUi.actions.get(t),o=null;return null!=l&&(t=l.label,null!=l.shortcut&&(t+=" ("+l.shortcut+")"),o=this.addButton(e,t,l.funct,i),n||(o.setEnabled(l.enabled),l.addListener("stateChanged",(function(){o.setEnabled(l.enabled)})))),o},T.prototype.addButton=function(e,t,i,n){return e=this.createButton(e),n=null!=n?n:this.container,this.initElement(e,t),this.addClickHandler(e,i),n.appendChild(e),e},T.prototype.initElement=function(e,t){null!=t&&e.setAttribute("title",t),this.addEnabledState(e)},T.prototype.addEnabledState=function(e){var t=e.className;e.setEnabled=function(i){e.enabled=i,e.className=i?t:t+" mxDisabled"},e.setEnabled(!0)},T.prototype.addClickHandler=function(e,t){null!=t&&(l.E.addListener(e,"click",(function(i){e.enabled&&t(i),l.E.consume(i)})),l.E.addListener(e,l.k.IS_POINTER?"pointerdown":"mousedown",l.Cb.bind(this,(function(e){e.preventDefault()}))))},T.prototype.createButton=function(e){var t=document.createElement("a"),i=(t.className="geButton",document.createElement("div"));return null!=e&&(i.className="geSprite "+e),t.appendChild(i),t},T.prototype.createLabel=function(e){var t=document.createElement("a");return t.className="geLabel",l.Cb.write(t,e),t},T.prototype.addMenuHandler=function(e,t,i,n){var o,r,a;null!=i&&(o=this.editorUi.editor.graph,a=!(r=null),l.E.addListener(e,"click",l.Cb.bind(this,(function(s){var d;a&&(null==e.enabled||e.enabled)&&(o.popupMenuHandler.hideMenu(),(r=new l.jb(i)).div.className+=" geToolbarMenu",r.showDisabled=n,r.labels=t,r.autoExpand=!0,d=l.Cb.getOffset(e),r.popup(d.x,d.y+e.offsetHeight,null,s),this.editorUi.setCurrentMenu(r,e),!t&&r.div.scrollHeight>r.div.clientHeight&&(r.div.style.width="40px"),r.hideMenu=l.Cb.bind(this,(function(){l.jb.prototype.hideMenu.apply(r,arguments),this.editorUi.resetCurrentMenu(),r.destroy()})),r.addListener(l.E.EVENT_HIDE,l.Cb.bind(this,(function(){this.currentElt=null})))),a=!0,l.E.consume(s)}))),l.E.addListener(e,l.k.IS_POINTER?"pointerdown":"mousedown",l.Cb.bind(this,(function(t){a=this.currentElt!=e,t.preventDefault()}))))},T.prototype.destroy=function(){null!=this.gestureHandler&&(l.E.removeGestureListeners(document,this.gestureHandler),this.gestureHandler=null)};var x=i(442);function I(e,t,i,n){l.G.call(this),this.destroyFunctions=[],this.editor=e||new r.b,this.container=t||document.body;var o=this.editor.graph;if(o.lightbox=i,o.useCssTransforms&&(this.lazyZoomDelay=0),l.jb.prototype.submenuImage=m.q,l.jb.prototype.showMenu=function(){t.appendChild(this.div),l.Cb.fit(this.div)},l.jb.prototype.showSubmenu=function(e,i){var n,o,r,a,s;null!=i.div&&(i.div.style.left=e.div.offsetLeft+i.offsetLeft+i.offsetWidth-1+"px",i.div.style.top=e.div.offsetTop+i.offsetTop+"px",t.appendChild(i.div),n=parseInt(i.div.offsetLeft),o=parseInt(i.div.offsetWidth),r=l.Cb.getDocumentScrollOrigin(document),a=document.body,s=document.documentElement,r.x+(a.clientWidth||s.clientWidth)<n+o&&(i.div.style.left=Math.max(0,e.div.offsetLeft-o+(l.k.IS_IE?6:-6))+"px"),l.Cb.fit(i.div))},this.editor.chromeless&&!this.editor.editable&&(this.footerHeight=0,o.isEnabled=function(){return!1},o.panningHandler.isForcePanningEvent=function(e){return!l.E.isPopupTrigger(e.getEvent())}),this.actions=new h(this),this.menus=this.createMenus(),!o.standalone){this.createDivs(),this.createUi(),this.refresh();var a,s=((i=document.createElement("div")).className="diagram-exit-btn",i.innerText=l.ob.get("exit"),i.onclick=n,this.exitButton.appendChild(i),l.Cb.bind(this,(function(e){return null==e&&(e=window.event),o.isEditing()||null!=e&&this.isSelectionAllowed(e)}))),d=(this.container==document.body&&(this.menubarContainer.onselectstart=s,this.menubarContainer.onmousedown=s,this.toolbarContainer.onselectstart=s,this.toolbarContainer.onmousedown=s,this.diagramContainer.onselectstart=s,this.diagramContainer.onmousedown=s,this.sidebarContainer.onselectstart=s,this.sidebarContainer.onmousedown=s,this.formatContainer.onselectstart=s,this.formatContainer.onmousedown=s,this.footerContainer.onselectstart=s,this.footerContainer.onmousedown=s,null!=this.tabContainer)&&(this.tabContainer.onselectstart=s),!this.editor.chromeless||this.editor.editable?(n=function(e){if(null!=e){var t=l.E.getSource(e);if("A"==t.nodeName)for(;null!=t;){if("geHint"==t.className)return!0;t=t.parentNode}}return s(e)},l.k.IS_IE&&(void 0===document.documentMode||document.documentMode<9)?l.E.addListener(this.diagramContainer,"contextmenu",n):this.diagramContainer.oncontextmenu=n):o.panningHandler.usePopupTrigger=!1,o.init(this.diagramContainer),null!=o.view.getDrawPane()&&null!=(i=o.view.getDrawPane().ownerSVGElement)&&(i.style.position="absolute"),this.hoverIcons=this.createHoverIcons(),null!=o.graphHandler&&(a=o.graphHandler.start,o.graphHandler.start=function(){null!=E.hoverIcons&&E.hoverIcons.reset(),a.apply(this,arguments)}),l.E.addListener(this.diagramContainer,"mousemove",l.Cb.bind(this,(function(e){var t=l.Cb.getOffset(this.diagramContainer);0<l.E.getClientX(e)-t.x-this.diagramContainer.clientWidth||0<l.E.getClientY(e)-t.y-this.diagramContainer.clientHeight?this.diagramContainer.setAttribute("title",l.ob.get("panTooltip")):this.diagramContainer.removeAttribute("title")}))),!1),c=this.hoverIcons.isResetEvent,u=(this.hoverIcons.isResetEvent=function(){return d||c.apply(this,arguments)},this.keydownHandler=l.Cb.bind(this,(function(e){32!=e.which||o.isEditing()?l.E.isConsumed(e)||27!=e.keyCode||this.hideDialog(null,!0):(d=!0,this.hoverIcons.reset(),o.container.style.cursor="move",o.isEditing()||l.E.getSource(e)!=o.container||l.E.consume(e))})),l.E.addListener(document,"keydown",this.keydownHandler),this.keyupHandler=l.Cb.bind(this,(function(){o.container.style.cursor="",d=!1})),l.E.addListener(document,"keyup",this.keyupHandler),o.panningHandler.isForcePanningEvent),p=(o.panningHandler.isForcePanningEvent=function(e){return u.apply(this,arguments)||d||l.E.isMouseEvent(e.getEvent())&&(this.usePopupTrigger||!l.E.isPopupTrigger(e.getEvent()))&&(!l.E.isControlDown(e.getEvent())&&l.E.isRightMouseButton(e.getEvent())||l.E.isMiddleMouseButton(e.getEvent()))},o.cellEditor.isStopEditingEvent),g=(o.cellEditor.isStopEditingEvent=function(e){return p.apply(this,arguments)||13==e.keyCode&&(!l.k.IS_SF&&l.E.isControlDown(e)||l.k.IS_MAC&&l.E.isMetaDown(e)||l.k.IS_SF&&l.E.isShiftDown(e))},o.isZoomWheelEvent),A=!(o.isZoomWheelEvent=function(){return d||g.apply(this,arguments)}),b=null,y=null,f=null,w=l.Cb.bind(this,(function(){if(null!=this.toolbar&&A!=o.cellEditor.isContentEditing()){for(var e=this.toolbar.container.firstChild,t=[];null!=e;){var i=e.nextSibling;l.Cb.indexOf(this.toolbar.staticElements,e)<0&&(e.parentNode.removeChild(e),t.push(e)),e=i}var n=this.toolbar.fontMenu,r=this.toolbar.sizeMenu;if(null==f)this.toolbar.createTextToolbar();else{for(var a=0;a<f.length;a++)this.toolbar.container.appendChild(f[a]);this.toolbar.fontMenu=b,this.toolbar.sizeMenu=y}A=o.cellEditor.isContentEditing(),b=n,y=r,f=t}})),E=this,C=o.cellEditor.startEditing,S=(o.cellEditor.startEditing=function(){var e,t;C.apply(this,arguments),w(),o.cellEditor.isContentEditing()&&(e=!1,l.E.addListener(o.cellEditor.textarea,"input",t=function(){e||(e=!0,window.setTimeout((function(){for(var t,i,n=o.getSelectedElement();null!=n&&n.nodeType!=l.t.NODETYPE_ELEMENT;)n=n.parentNode;null!=n&&null!=(t=l.Cb.getCurrentStyle(n))&&null!=E.toolbar&&("'"==(i="'"==(i=t.fontFamily).charAt(0)?i.substring(1):i).charAt(i.length-1)&&(i=i.substring(0,i.length-1)),E.toolbar.setFontName(i),E.toolbar.setFontSize(parseInt(t.fontSize))),e=!1}),0))}),l.E.addListener(o.cellEditor.textarea,"touchend",t),l.E.addListener(o.cellEditor.textarea,"mouseup",t),l.E.addListener(o.cellEditor.textarea,"keyup",t),t())},o.cellEditor.stopEditing);if(o.cellEditor.stopEditing=function(){try{S.apply(this,arguments),w()}catch(e){E.handleError(e)}},o.container.setAttribute("tabindex","0"),o.container.style.cursor="default",window.self===window.top&&null!=o.container.parentNode)try{o.container.focus()}catch(e){}for(var T=o.fireMouseEvent,x=(o.fireMouseEvent=function(e){e==l.E.MOUSE_DOWN&&this.container.focus(),T.apply(this,arguments)},o.popupMenuHandler.autoExpand=!0,null!=this.menus&&(o.popupMenuHandler.factoryMethod=l.Cb.bind(this,(function(e,t,i){this.menus.createPopupMenu(e,t,i)}))),l.E.addGestureListeners(document,l.Cb.bind(this,(function(){o.popupMenuHandler.hideMenu()}))),this.keyHandler=this.createKeyHandler(e),this.getKeyHandler=function(){return this.keyHandler},["rounded","shadow","glass","dashed","dashPattern","comic","labelBackgroundColor"]),I=["shape","edgeStyle","curved","rounded","elbow","comic","jumpStyle","jumpSize"],L=(this.setDefaultStyle=function(e){try{var t=o.view.getState(e);if(null!=t){var i=e.clone(),n=(i.style="",o.getCellStyle(i)),r=[],a=[];for(c in t.style)n[c]!=t.style[c]&&(r.push(t.style[c]),a.push(c));for(var s=o.getModel().getStyle(t.cell),d=null!=s?s.split(";"):[],h=0;h<d.length;h++){var c,u,p=d[h],g=p.indexOf("=");0<=g&&(c=p.substring(0,g),u=p.substring(g+1),null!=n[c])&&"none"==u&&(r.push(u),a.push(c))}o.getModel().isEdge(t.cell)?o.currentEdgeStyle={}:o.currentVertexStyle={},this.fireEvent(new l.F("styleChanged","keys",a,"values",r,"cells",[t.cell]))}}catch(e){this.handleError(e)}},this.clearDefaultStyle=function(){o.currentEdgeStyle=l.Cb.clone(o.defaultEdgeStyle),o.currentVertexStyle=l.Cb.clone(o.defaultVertexStyle),this.fireEvent(new l.F("styleChanged","keys",[],"values",[],"cells",[]))},["fontFamily","fontSize","fontColor"]),M=["edgeStyle","startArrow","startFill","startSize","endArrow","endFill","endSize"],k=[["startArrow","startFill","startSize","sourcePerimeterSpacing","endArrow","endFill","endSize","targetPerimeterSpacing"],["strokeColor","strokeWidth"],["fillColor","gradientColor"],L,["opacity"],["align"],["html"]],D=0;D<k.length;D++)for(var V=0;V<k[D].length;V++)x.push(k[D][V]);for(D=0;D<I.length;D++)l.Cb.indexOf(x,I[D])<0&&x.push(I[D]);var P=function(e,t){var i=o.getModel();i.beginUpdate();try{for(var n=0;n<e.length;n++){var r=e[n];if(t)d=["fontSize","fontFamily","fontColor"];else for(var a=i.getStyle(r),s=null!=a?a.split(";"):[],d=x.slice(),h=0;h<s.length;h++){var c=s[h],u=c.indexOf("=");if(0<=u){var p=c.substring(0,u),g=l.Cb.indexOf(d,p);0<=g&&d.splice(g,1);for(var A=0;A<k.length;A++){var m=k[A];if(0<=l.Cb.indexOf(m,p))for(var b=0;b<m.length;b++){var y=l.Cb.indexOf(d,m[b]);0<=y&&d.splice(y,1)}}}}var f=i.isEdge(r),w=f?o.currentEdgeStyle:o.currentVertexStyle,E=i.getStyle(r);for(h=0;h<d.length;h++){var C=w[p=d[h]];null==C||"shape"==p&&!f||(!f||l.Cb.indexOf(I,p)<0)&&(E=l.Cb.setStyle(E,p,C))}i.setStyle(r,E)}}finally{i.endUpdate()}};o.addListener("cellsInserted",(function(e,t){P(t.getProperty("cells"))})),o.addListener("textInserted",(function(e,t){P(t.getProperty("cells"),!0)})),o.connectionHandler.addListener(l.E.CONNECT,(function(e,t){var i=[t.getProperty("cell")];t.getProperty("terminalInserted")&&i.push(t.getProperty("terminal")),P(i)})),this.addListener("styleChanged",l.Cb.bind(this,(function(e,t){var i=t.getProperty("cells"),n=!1,r=!1;if(0<i.length)for(var a=0;a<i.length&&(n=o.getModel().isVertex(i[a])||n,!(r=o.getModel().isEdge(i[a])||r)||!n);a++);else r=n=!0;var s=t.getProperty("keys"),d=t.getProperty("values");for(a=0;a<s.length;a++){var h=0<=l.Cb.indexOf(L,s[a]);("strokeColor"!=s[a]||null!=d[a]&&"none"!=d[a])&&(0<=l.Cb.indexOf(I,s[a])?r||0<=l.Cb.indexOf(M,s[a])?null==d[a]?delete o.currentEdgeStyle[s[a]]:o.currentEdgeStyle[s[a]]=d[a]:n&&0<=l.Cb.indexOf(x,s[a])&&(null==d[a]?delete o.currentVertexStyle[s[a]]:o.currentVertexStyle[s[a]]=d[a]):0<=l.Cb.indexOf(x,s[a])&&((n||h)&&(null==d[a]?delete o.currentVertexStyle[s[a]]:o.currentVertexStyle[s[a]]=d[a]),r||h||0<=l.Cb.indexOf(M,s[a]))&&(null==d[a]?delete o.currentEdgeStyle[s[a]]:o.currentEdgeStyle[s[a]]=d[a]))}null!=this.toolbar&&(this.toolbar.setFontName(o.currentVertexStyle.fontFamily||v.a.prototype.defaultFont),this.toolbar.setFontSize(o.currentVertexStyle.fontSize||v.a.prototype.defaultFontSize),null!=this.toolbar.edgeStyleMenu&&(t=this.toolbar.edgeStyleMenu.getElementsByTagName("div")[0],"orthogonalEdgeStyle"==o.currentEdgeStyle.edgeStyle&&"1"==o.currentEdgeStyle.curved?t.className="geSprite geSprite-curved":"straight"==o.currentEdgeStyle.edgeStyle||"none"==o.currentEdgeStyle.edgeStyle||null==o.currentEdgeStyle.edgeStyle?t.className="geSprite geSprite-straight":"entityRelationEdgeStyle"==o.currentEdgeStyle.edgeStyle?t.className="geSprite geSprite-entity":"elbowEdgeStyle"==o.currentEdgeStyle.edgeStyle?t.className="geSprite geSprite-"+("vertical"==o.currentEdgeStyle.elbow?"verticalelbow":"horizontalelbow"):"isometricEdgeStyle"==o.currentEdgeStyle.edgeStyle?t.className="geSprite geSprite-"+("vertical"==o.currentEdgeStyle.elbow?"verticalisometric":"horizontalisometric"):t.className="geSprite geSprite-orthogonal"),null!=this.toolbar.edgeShapeMenu&&(t=this.toolbar.edgeShapeMenu.getElementsByTagName("div")[0],"link"==o.currentEdgeStyle.shape?t.className="geSprite geSprite-linkedge":"flexArrow"==o.currentEdgeStyle.shape?t.className="geSprite geSprite-arrow":"arrow"==o.currentEdgeStyle.shape?t.className="geSprite geSprite-simplearrow":t.className="geSprite geSprite-connection"),null!=this.toolbar.lineStartMenu&&(this.toolbar.lineStartMenu.getElementsByTagName("div")[0].className=this.getCssClassForMarker("start",o.currentEdgeStyle.shape,o.currentEdgeStyle[l.t.STYLE_STARTARROW],l.Cb.getValue(o.currentEdgeStyle,"startFill","1"))),null!=this.toolbar.lineEndMenu)&&(this.toolbar.lineEndMenu.getElementsByTagName("div")[0].className=this.getCssClassForMarker("end",o.currentEdgeStyle.shape,o.currentEdgeStyle[l.t.STYLE_ENDARROW],l.Cb.getValue(o.currentEdgeStyle,"endFill","1")))}))),null!=this.toolbar&&(n=l.Cb.bind(this,(function(){var e=o.currentVertexStyle.fontFamily||"Helvetica",t=String(o.currentVertexStyle.fontSize||"12"),i=o.getView().getState(o.getSelectionCell());null!=i&&(e=i.style[l.t.STYLE_FONTFAMILY]||e,t=i.style[l.t.STYLE_FONTSIZE]||t,10<e.length)&&(e=e.substring(0,8)+"..."),this.toolbar.setFontName(e),this.toolbar.setFontSize(t)})),o.getSelectionModel().addListener(l.E.CHANGE,n),o.getModel().addListener(l.E.CHANGE,n)),o.addListener(l.E.CELLS_ADDED,(function(e,t){var i=t.getProperty("cells");t=t.getProperty("parent");o.getModel().isLayer(t)&&!o.isCellVisible(t)&&null!=i&&0<i.length&&o.getModel().setVisible(t,!0)})),this.gestureHandler=l.Cb.bind(this,(function(e){null!=this.currentMenu&&l.E.getSource(e)!=this.currentMenu.div&&this.hideCurrentMenu()})),l.E.addGestureListeners(document,this.gestureHandler),this.resizeHandler=l.Cb.bind(this,(function(){window.setTimeout(l.Cb.bind(this,(function(){null!=this.editor.graph&&this.refresh()})),0)})),l.E.addListener(window,"resize",this.resizeHandler),this.orientationChangeHandler=l.Cb.bind(this,(function(){this.refresh()})),l.E.addListener(window,"orientationchange",this.orientationChangeHandler),l.k.IS_IOS&&!window.navigator.standalone&&(this.scrollHandler=l.Cb.bind(this,(function(){window.scrollTo(0,0)})),l.E.addListener(window,"scroll",this.scrollHandler)),this.editor.addListener("resetGraphView",l.Cb.bind(this,(function(){this.resetScrollbars()}))),this.addListener("gridEnabledChanged",l.Cb.bind(this,(function(){o.view.validateBackground()}))),this.addListener("backgroundColorChanged",l.Cb.bind(this,(function(){o.view.validateBackground()}))),o.addListener("gridSizeChanged",l.Cb.bind(this,(function(){o.isGridEnabled()&&o.view.validateBackground()}))),this.editor.resetGraph()}this.init(),o.standalone||this.open()}l.Cb.extend(I,l.G),I.compactUi=!0,I.prototype.splitSize=l.k.IS_TOUCH||l.k.IS_POINTER?12:8,I.prototype.menubarHeight=30,I.prototype.formatEnabled=!0,I.prototype.formatWidth=240,I.prototype.toolbarHeight=38,I.prototype.footerHeight=28,I.prototype.sidebarFooterHeight=34,I.prototype.hsplitPosition=screen.width<=640?118:240,I.prototype.allowAnimation=!0,I.prototype.lightboxMaxFitScale=2,I.prototype.lightboxVerticalDivider=4,I.prototype.hsplitClickEnabled=!1,I.prototype.init=function(){var e,t,i=this.editor.graph;i.standalone||(l.E.addListener(i.container,"scroll",l.Cb.bind(this,(function(){i.tooltipHandler.hide(),null!=i.connectionHandler&&null!=i.connectionHandler.constraintHandler&&i.connectionHandler.constraintHandler.reset()}))),i.addListener(l.E.ESCAPE,l.Cb.bind(this,(function(){i.tooltipHandler.hide();var e=i.getRubberband();null!=e&&e.cancel()}))),l.E.addListener(i.container,"keydown",l.Cb.bind(this,(function(e){this.onKeyDown(e)}))),l.E.addListener(i.container,"keypress",l.Cb.bind(this,(function(e){this.onKeyPress(e)}))),this.addUndoListener(),this.addBeforeUnloadListener(),i.getSelectionModel().addListener(l.E.CHANGE,l.Cb.bind(this,(function(){this.updateActionStates()}))),i.getModel().addListener(l.E.CHANGE,l.Cb.bind(this,(function(){this.updateActionStates()}))),e=i.setDefaultParent,(t=this).editor.graph.setDefaultParent=function(){e.apply(this,arguments),t.updateActionStates()},this.updateActionStates(),this.initClipboard(),this.initCanvas(),null!=this.format&&this.format.init())},I.prototype.onKeyDown=function(e){var t=this.editor.graph;9!=e.which||!t.isEnabled()||l.E.isAltDown(e)||t.isEditing()&&l.E.isShiftDown(e)||(t.isEditing()?t.stopEditing(!1):t.selectCell(!l.E.isShiftDown(e)),l.E.consume(e))},I.prototype.onKeyPress=function(e){var t=this.editor.graph;!this.isImmediateEditingEvent(e)||t.isEditing()||t.isSelectionEmpty()||0===e.which||27===e.which||l.E.isAltDown(e)||l.E.isControlDown(e)||l.E.isMetaDown(e)||(t.escape(),t.startEditing(),l.k.IS_FF&&null!=(t=t.cellEditor).textarea&&(t.textarea.innerHTML=String.fromCharCode(e.which),(e=document.createRange()).selectNodeContents(t.textarea),e.collapse(!1),(t=window.getSelection()).removeAllRanges(),t.addRange(e)))},I.prototype.isImmediateEditingEvent=function(){return!0},I.prototype.getCssClassForMarker=function(e,t,i,n){return"flexArrow"==t?null!=i&&i!=l.t.NONE?"geSprite geSprite-"+e+"blocktrans":"geSprite geSprite-noarrow":"box"==i||"halfCircle"==i?"geSprite geSvgSprite geSprite-"+i+("end"==e?" geFlipSprite":""):i==l.t.ARROW_CLASSIC?"1"==n?"geSprite geSprite-"+e+"classic":"geSprite geSprite-"+e+"classictrans":i==l.t.ARROW_CLASSIC_THIN?"1"==n?"geSprite geSprite-"+e+"classicthin":"geSprite geSprite-"+e+"classicthintrans":i==l.t.ARROW_OPEN?"geSprite geSprite-"+e+"open":i==l.t.ARROW_OPEN_THIN?"geSprite geSprite-"+e+"openthin":i==l.t.ARROW_BLOCK?"1"==n?"geSprite geSprite-"+e+"block":"geSprite geSprite-"+e+"blocktrans":i==l.t.ARROW_BLOCK_THIN?"1"==n?"geSprite geSprite-"+e+"blockthin":"geSprite geSprite-"+e+"blockthintrans":i==l.t.ARROW_OVAL?"1"==n?"geSprite geSprite-"+e+"oval":"geSprite geSprite-"+e+"ovaltrans":i==l.t.ARROW_DIAMOND?"1"==n?"geSprite geSprite-"+e+"diamond":"geSprite geSprite-"+e+"diamondtrans":i==l.t.ARROW_DIAMOND_THIN?"1"==n?"geSprite geSprite-"+e+"thindiamond":"geSprite geSprite-"+e+"thindiamondtrans":"openAsync"==i?"geSprite geSprite-"+e+"openasync":"dash"==i?"geSprite geSprite-"+e+"dash":"cross"==i?"geSprite geSprite-"+e+"cross":"async"==i?"1"==n?"geSprite geSprite-"+e+"async":"geSprite geSprite-"+e+"asynctrans":"circle"==i||"circlePlus"==i?"1"==n||"circle"==i?"geSprite geSprite-"+e+"circle":"geSprite geSprite-"+e+"circleplus":"ERone"==i?"geSprite geSprite-"+e+"erone":"ERmandOne"==i?"geSprite geSprite-"+e+"eronetoone":"ERmany"==i?"geSprite geSprite-"+e+"ermany":"ERoneToMany"==i?"geSprite geSprite-"+e+"eronetomany":"ERzeroToOne"==i?"geSprite geSprite-"+e+"eroneopt":"ERzeroToMany"==i?"geSprite geSprite-"+e+"ermanyopt":"geSprite geSprite-noarrow"},I.prototype.createMenus=function(){return new v.a(this)},I.prototype.updatePasteActionStates=function(){var e=this.editor.graph,t=this.actions.get("paste"),i=this.actions.get("pasteHere");t.setEnabled(this.editor.graph.cellEditor.isContentEditing()||!l.l.isEmpty()&&e.isEnabled()&&!e.isCellLocked(e.getDefaultParent())),i.setEnabled(t.isEnabled())},I.prototype.initClipboard=function(){var e=this,t=l.l.cut,i=(l.l.cut=function(i){i.cellEditor.isContentEditing()?document.execCommand("cut",!1,null):t.apply(this,arguments),e.updatePasteActionStates()},l.l.copy=function(t){var i=null;if(t.cellEditor.isContentEditing())document.execCommand("copy",!1,null);else{i=i||t.getSelectionCells();i=t.getExportableCells(t.model.getTopmostCells(i));for(var n=new Object,o=t.createCellLookup(i),r=t.cloneCells(i,null,n),a=new l.M,s=a.getChildAt(a.getRoot(),0),d=0;d<r.length;d++){a.add(s,r[d]);var h,c=t.view.getState(i[d]);null!=c&&null!=(h=t.getCellGeometry(r[d]))&&h.relative&&!a.isEdge(i[d])&&null==o[l.db.get(a.getParent(i[d]))]&&(h.offset=null,h.relative=!1,h.x=c.x/c.view.scale-c.view.translate.x,h.y=c.y/c.view.scale-c.view.translate.y)}t.updateCustomLinks(t.createCellMapping(n,o),r),l.l.insertCount=1,l.l.setCells(r)}return e.updatePasteActionStates(),i},l.l.paste),n=(l.l.paste=function(t){var n=null;return t.cellEditor.isContentEditing()?document.execCommand("paste",!1,null):n=i.apply(this,arguments),e.updatePasteActionStates(),n},this.editor.graph.cellEditor.startEditing),o=(this.editor.graph.cellEditor.startEditing=function(){n.apply(this,arguments),e.updatePasteActionStates()},this.editor.graph.cellEditor.stopEditing);this.editor.graph.cellEditor.stopEditing=function(){o.apply(this,arguments),e.updatePasteActionStates()},this.updatePasteActionStates()},I.prototype.lazyZoomDelay=20,I.prototype.wheelZoomDelay=400,I.prototype.buttonZoomDelay=600,I.prototype.initCanvas=function(){var e,t,i=this.editor.graph,n=(i.timerAutoScroll=!0,i.getPagePadding=function(){return new l.hb(Math.max(0,Math.round((i.container.offsetWidth-34)/i.view.scale)),Math.max(0,Math.round((i.container.offsetHeight-34)/i.view.scale)))},i.view.getBackgroundPageBounds=function(){var e=this.graph.getPageLayout(),t=this.graph.getPageSize();return new l.mb(this.scale*(this.translate.x+e.x*t.width),this.scale*(this.translate.y+e.y*t.height),this.scale*e.width*t.width,this.scale*e.height*t.height)},i.getPreferredPageSize=function(){var e=this.getPageLayout(),t=this.getPageSize();return new l.mb(0,0,e.width*t.width,e.height*t.height)},null),o=this;if(this.editor.isChromelessView()){n=l.Cb.bind(this,(function(e,t,n,o){var r,a,s,d,h,c,u,p,g;null==i.container||i.isViewer()||(n=null!=n?n:0,o=null!=o?o:0,r=i.pageVisible?i.view.getBackgroundPageBounds():i.getGraphBounds(),g=l.Cb.hasScrollbars(i.container),d=i.view.translate,a=i.view.scale,(s=l.mb.fromRectangle(r)).x=s.x/a-d.x,s.y=s.y/a-d.y,s.width/=a,s.height/=a,d=i.container.scrollTop,h=i.container.scrollLeft,u=l.k.IS_QUIRKS||8<=document.documentMode?20:14,8!=document.documentMode&&9!=document.documentMode||(u+=3),c=i.container.offsetWidth-u,u=i.container.offsetHeight-u,t=(c-(e=e?Math.max(.3,Math.min(t||1,c/s.width)):a)*s.width)/2/e,p=0==this.lightboxVerticalDivider?0:(u-e*s.height)/this.lightboxVerticalDivider/e,g&&(t=Math.max(t,0),p=Math.max(p,0)),g||r.width<c||r.height<u?(i.view.scaleAndTranslate(e,Math.floor(t-s.x),Math.floor(p-s.y)),i.container.scrollTop=d*e/a,i.container.scrollLeft=h*e/a):0==n&&0==o||(g=i.view.translate,i.view.setTranslate(Math.floor(g.x+n/a),Math.floor(g.y+o/a))))})),this.chromelessResize=n,this.chromelessWindowResize=l.Cb.bind(this,(function(){this.chromelessResize(!1)}));var a=l.Cb.bind(this,(function(){this.chromelessWindowResize(!1)})),s=(l.E.addListener(window,"resize",a),this.destroyFunctions.push((function(){l.E.removeListener(window,"resize",a)})),this.editor.addListener("resetGraphView",l.Cb.bind(this,(function(){this.chromelessResize(!0)}))),this.actions.get("zoomIn").funct=l.Cb.bind(this,(function(){i.zoomIn(),this.chromelessResize(!1)})),this.actions.get("zoomOut").funct=l.Cb.bind(this,(function(){i.zoomOut(),this.chromelessResize(!1)})),this.chromelessToolbar=document.createElement("div"),this.chromelessToolbar.style.position="fixed",this.chromelessToolbar.style.overflow="hidden",this.chromelessToolbar.style.boxSizing="border-box",this.chromelessToolbar.style.whiteSpace="nowrap",this.chromelessToolbar.style.backgroundColor="#000000",this.chromelessToolbar.style.padding="10px 10px 8px 10px",this.chromelessToolbar.style.left=i.isViewer()?"0":"50%",l.k.IS_VML||(l.Cb.setPrefixedStyle(this.chromelessToolbar.style,"borderRadius","20px"),l.Cb.setPrefixedStyle(this.chromelessToolbar.style,"transition","opacity 600ms ease-in-out")),l.Cb.bind(this,(function(){var e=l.Cb.getCurrentStyle(i.container);i.isViewer()?this.chromelessToolbar.style.top="0":this.chromelessToolbar.style.bottom=(null!=e?parseInt(e["margin-bottom"]||0):0)+(null!=this.tabContainer?20+parseInt(this.tabContainer.style.height):20)+"px"}))),d=(this.editor.addListener("resetGraphView",s),s(),l.Cb.bind(this,(function(e,t,i){var n=document.createElement("span");return(e=(n.style.paddingLeft="8px",n.style.paddingRight="8px",n.style.cursor="pointer",l.E.addListener(n,"click",e),null!=i&&n.setAttribute("title",i),document.createElement("img"))).setAttribute("border","0"),e.setAttribute("src",t),n.appendChild(e),this.chromelessToolbar.appendChild(n),n}))),h=d(l.Cb.bind(this,(function(e){this.actions.get("previousPage").funct(),l.E.consume(e)})),r.b.previousLargeImage,l.ob.get("previousPage")),c=document.createElement("div"),u=(c.style.display="inline-block",c.style.verticalAlign="top",c.style.fontFamily="Helvetica,Arial",c.style.marginTop="8px",c.style.fontSize="14px",c.style.color="#ffffff",this.chromelessToolbar.appendChild(c),d(l.Cb.bind(this,(function(e){this.actions.get("nextPage").funct(),l.E.consume(e)})),r.b.nextLargeImage,l.ob.get("nextPage"))),p=l.Cb.bind(this,(function(){null!=this.pages&&1<this.pages.length&&null!=this.currentPage&&(c.innerHTML="",l.Cb.write(c,l.Cb.indexOf(this.pages,this.currentPage)+1+" / "+this.pages.length))})),g=(s=(h.style.paddingLeft="0px",h.style.paddingRight="4px",u.style.paddingLeft="4px",u.style.paddingRight="0px",l.Cb.bind(this,(function(){null!=this.pages&&1<this.pages.length&&null!=this.currentPage?(u.style.display="",h.style.display="",c.style.display="inline-block"):(u.style.display="none",h.style.display="none",c.style.display="none"),p()}))),this.editor.addListener("resetGraphView",s),this.editor.addListener("pageSelected",p),d(l.Cb.bind(this,(function(e){this.actions.get("zoomOut").funct(),l.E.consume(e)})),r.b.zoomOutLargeImage,l.ob.get("zoomOut")+" (Alt+Mousewheel)"),d(l.Cb.bind(this,(function(e){this.actions.get("zoomIn").funct(),l.E.consume(e)})),r.b.zoomInLargeImage,l.ob.get("zoomIn")+" (Alt+Mousewheel)"),d(l.Cb.bind(this,(function(e){i.isLightboxView()?(1==i.view.scale?this.lightboxFit():i.zoomTo(1),this.chromelessResize(!1)):this.chromelessResize(!0),l.E.consume(e)})),r.b.actualSizeLargeImage,l.ob.get("fit")),null),A=null,m=l.Cb.bind(this,(function(e){null!=g&&(window.clearTimeout(g),g=null),null!=A&&(window.clearTimeout(A),A=null),g=window.setTimeout(l.Cb.bind(this,(function(){l.Cb.setOpacity(this.chromelessToolbar,0),g=null,A=window.setTimeout(l.Cb.bind(this,(function(){this.chromelessToolbar.style.display="none",A=null})),600)})),e||200)})),b=l.Cb.bind(this,(function(e){null!=g&&(window.clearTimeout(g),g=null),null!=A&&(window.clearTimeout(A),A=null),this.chromelessToolbar.style.display="",l.Cb.setOpacity(this.chromelessToolbar,e||30)}));if(this.addChromelessToolbarItems(d),null==this.editor.editButtonLink&&null==this.editor.editButtonFunc||d(l.Cb.bind(this,(function(e){null!=this.editor.editButtonFunc?this.editor.editButtonFunc():"_blank"==this.editor.editButtonLink?this.editor.editAsNew(this.getEditBlankXml()):i.openLink(this.editor.editButtonLink,"editWindow"),l.E.consume(e)})),r.b.editLargeImage,l.ob.get("edit")),null!=this.lightboxToolbarActions)for(var y=0;y<this.lightboxToolbarActions.length;y++){var f=this.lightboxToolbarActions[y];d(f.fn,f.icon,f.tooltip)}this.chromelessToolbar.style.display="none",i.isViewer()||l.Cb.setPrefixedStyle(this.chromelessToolbar.style,"transform","translate(-50%,0)"),i.container.appendChild(this.chromelessToolbar),l.E.addListener(i.container,l.k.IS_POINTER?"pointermove":"mousemove",l.Cb.bind(this,(function(e){l.E.isTouchEvent(e)||(l.E.isShiftDown(e)||b(30),m())}))),l.E.addListener(this.chromelessToolbar,l.k.IS_POINTER?"pointermove":"mousemove",(function(e){l.E.consume(e)})),l.E.addListener(this.chromelessToolbar,"mouseenter",l.Cb.bind(this,(function(e){l.E.isShiftDown(e)?m():b(100)}))),l.E.addListener(this.chromelessToolbar,"mousemove",l.Cb.bind(this,(function(e){l.E.isShiftDown(e)?m():b(100),l.E.consume(e)}))),l.E.addListener(this.chromelessToolbar,"mouseleave",l.Cb.bind(this,(function(e){l.E.isTouchEvent(e)||b(30)})));var w=i.getTolerance();i.addMouseListener({startX:0,startY:0,scrollLeft:0,scrollTop:0,mouseDown:function(e,t){this.startX=t.getGraphX(),this.startY=t.getGraphY(),this.scrollLeft=i.container.scrollLeft,this.scrollTop=i.container.scrollTop},mouseMove:function(){},mouseUp:function(e,t){l.E.isTouchEvent(t.getEvent())&&Math.abs(this.scrollLeft-i.container.scrollLeft)<w&&Math.abs(this.scrollTop-i.container.scrollTop)<w&&Math.abs(this.startX-t.getGraphX())<w&&Math.abs(this.startY-t.getGraphY())<w&&(0<parseFloat(o.chromelessToolbar.style.opacity||0)?m():b(30))}})}else this.editor.extendCanvas&&(e=i.view.validate,i.view.validate=function(){var t,i;null!=this.graph.container&&l.Cb.hasScrollbars(this.graph.container)&&(t=this.graph.getPagePadding(),i=this.graph.getPageSize(),this.translate.x=t.x-(this.x0||0)*i.width,this.translate.y=t.y-(this.y0||0)*i.height),e.apply(this,arguments)},i.isViewer()||(t=i.sizeDidChange,i.sizeDidChange=function(){var e,n,o,r,a,s;null!=this.container&&l.Cb.hasScrollbars(this.container)?(e=this.getPageLayout(),s=this.getPagePadding(),n=this.getPageSize(),r=Math.ceil(2*s.x+e.width*n.width),a=Math.ceil(2*s.y+e.height*n.height),null!=(o=i.minimumGraphSize)&&o.width==r&&o.height==a||(i.minimumGraphSize=new l.mb(0,0,r,a)),o=s.x-e.x*n.width,r=s.y-e.y*n.height,this.autoTranslate||this.view.translate.x==o&&this.view.translate.y==r?t.apply(this,arguments):(this.autoTranslate=!0,this.view.x0=e.x,this.view.y0=e.y,a=i.view.translate.x,s=i.view.translate.y,i.view.setTranslate(o,r),i.container.scrollLeft+=Math.round((o-a)*i.view.scale),i.container.scrollTop+=Math.round((r-s)*i.view.scale),this.autoTranslate=!1)):this.fireEvent(new l.F(l.E.SIZE,"bounds",this.getGraphBounds()))}));function E(e){null!=v&&window.clearTimeout(v),window.setTimeout((function(){i.isMouseDown||(v=window.setTimeout(l.Cb.bind(this,(function(){i.isFastZoomEnabled()&&(null!=i.view.backgroundPageShape&&null!=i.view.backgroundPageShape.node&&(l.Cb.setPrefixedStyle(i.view.backgroundPageShape.node.style,"transform-origin",null),l.Cb.setPrefixedStyle(i.view.backgroundPageShape.node.style,"transform",null)),S.style.transformOrigin="",C.style.transformOrigin="",l.k.IS_SF?(S.style.transform="scale(1)",C.style.transform="scale(1)",window.setTimeout((function(){S.style.transform="",C.style.transform=""}),0)):(S.style.transform="",C.style.transform=""),i.view.getDecoratorPane().style.opacity="",i.view.getOverlayPane().style.opacity="");var e=new l.hb(i.container.scrollLeft,i.container.scrollTop),t=l.Cb.getOffset(i.container),r=i.view.scale,a=0,s=0;null!=T&&(a=i.container.offsetWidth/2-T.x+t.x,s=i.container.offsetHeight/2-T.y+t.y),i.zoom(i.cumulativeZoomFactor),i.view.scale!=r&&(null!=x&&(a+=e.x-x.x,s+=e.y-x.y),null!=n&&o.chromelessResize(!1,null,a*(i.cumulativeZoomFactor-1),s*(i.cumulativeZoomFactor-1)),!l.Cb.hasScrollbars(i.container)||0==a&&0==s||(i.container.scrollLeft-=a*(i.cumulativeZoomFactor-1),i.container.scrollTop-=s*(i.cumulativeZoomFactor-1))),null!=I&&S.setAttribute("filter",I),i.cumulativeZoomFactor=1,I=T=x=v=null})),null!=e?e:i.isFastZoomEnabled()?o.wheelZoomDelay:o.lazyZoomDelay))}),0)}var C=i.view.getBackgroundPane(),S=i.view.getDrawPane(),v=(i.cumulativeZoomFactor=1,null),T=null,x=null,I=null;i.lazyZoom=function(e,t,n){var r;(t=t||!i.scrollbars)&&(T=new l.hb(i.container.offsetLeft+i.container.clientWidth/2,i.container.offsetTop+i.container.clientHeight/2)),e?this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale+.05)/this.view.scale:(this.cumulativeZoomFactor*=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale):this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale-.05)/this.view.scale:(this.cumulativeZoomFactor/=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale),this.cumulativeZoomFactor=Math.max(.05,Math.min(this.view.scale*this.cumulativeZoomFactor,160))/this.view.scale,i.isFastZoomEnabled()&&(null==I&&""!=S.getAttribute("filter")&&(I=S.getAttribute("filter"),S.removeAttribute("filter")),x=new l.hb(i.container.scrollLeft,i.container.scrollTop),e=t?i.container.scrollLeft+i.container.clientWidth/2:T.x+i.container.scrollLeft-i.container.offsetLeft,r=t?i.container.scrollTop+i.container.clientHeight/2:T.y+i.container.scrollTop-i.container.offsetTop,S.style.transformOrigin=e+"px "+r+"px",S.style.transform="scale("+this.cumulativeZoomFactor+")",C.style.transformOrigin=e+"px "+r+"px",C.style.transform="scale("+this.cumulativeZoomFactor+")",null!=i.view.backgroundPageShape&&null!=i.view.backgroundPageShape.node&&(e=i.view.backgroundPageShape.node,l.Cb.setPrefixedStyle(e.style,"transform-origin",(t?i.container.clientWidth/2+i.container.scrollLeft-e.offsetLeft+"px":T.x+i.container.scrollLeft-e.offsetLeft-i.container.offsetLeft+"px")+" "+(t?i.container.clientHeight/2+i.container.scrollTop-e.offsetTop+"px":T.y+i.container.scrollTop-e.offsetTop-i.container.offsetTop+"px")),l.Cb.setPrefixedStyle(e.style,"transform","scale("+this.cumulativeZoomFactor+")")),i.view.getDecoratorPane().style.opacity="0",i.view.getOverlayPane().style.opacity="0",null!=o.hoverIcons)&&o.hoverIcons.reset(),E(n)},l.E.addGestureListeners(i.container,(function(){null!=v&&window.clearTimeout(v)}),null,(function(){1!=i.cumulativeZoomFactor&&E(0)})),l.E.addListener(i.container,"scroll",(function(){v&&!i.isMouseDown&&1!=i.cumulativeZoomFactor&&E(0)})),l.E.addMouseWheelListener(l.Cb.bind(this,(function(e,t,n){if(null==this.dialogs||0==this.dialogs.length)if(!i.scrollbars&&i.isScrollWheelEvent(e)){var o=i.view.getTranslate(),r=40/i.view.scale;l.E.isShiftDown(e)?i.view.setTranslate(o.x+(t?-r:r),o.y):i.view.setTranslate(o.x,o.y+(t?r:-r))}else if(n||i.isZoomWheelEvent(e))for(var a=l.E.getSource(e);null!=a;){if(a==i.container)return i.tooltipHandler.hideTooltip(),T=new l.hb(l.E.getClientX(e),l.E.getClientY(e)),i.lazyZoom(t),l.E.consume(e),!1;a=a.parentNode}})),i.container),i.panningHandler.zoomGraph=function(e){i.cumulativeZoomFactor=e.scale,i.lazyZoom(0<e.scale,!0),l.E.consume(e)}},I.prototype.addChromelessToolbarItems=function(e){e(l.Cb.bind(this,(function(e){this.actions.get("print").funct(),l.E.consume(e)})),r.b.printLargeImage,l.ob.get("print"))},I.prototype.createTemporaryGraph=function(e){return(e=new p.a(document.createElement("div"),null,null,e)).resetViewOnRootChange=!1,e.setConnectable(!1),e.gridEnabled=!1,e.autoScroll=!1,e.setTooltips(!1),e.setEnabled(!1),e.container.style.visibility="hidden",e.container.style.position="absolute",e.container.style.overflow="hidden",e.container.style.height="1px",e.container.style.width="1px",e},I.prototype.toggleFormatPanel=function(e){e=null!=e?e:0==this.formatWidth,null!=this.format&&(this.formatWidth=e?240:0,this.formatContainer.style.display=e?"":"none",this.refresh(),this.format.refresh(),this.fireEvent(new l.F("formatWidthChanged")))},I.prototype.lightboxFit=function(e){this.isDiagramEmpty()?this.editor.graph.view.setScale(1):(this.editor.graph.maxFitScale=this.lightboxMaxFitScale,this.editor.graph.fit(60,null,null,null,null,null,e),this.editor.graph.maxFitScale=null)},I.prototype.isDiagramEmpty=function(){var e=this.editor.graph.getModel();return 1==e.getChildCount(e.root)&&0==e.getChildCount(e.getChildAt(e.root,0))},I.prototype.isSelectionAllowed=function(e){return"SELECT"==l.E.getSource(e).nodeName||"INPUT"==l.E.getSource(e).nodeName&&l.Cb.isAncestorNode(this.formatContainer,l.E.getSource(e))},I.prototype.addBeforeUnloadListener=function(){window.onbeforeunload=l.Cb.bind(this,(function(){if(!this.editor.isChromelessView())return this.onBeforeUnload()}))},I.prototype.onBeforeUnload=function(){if(this.editor.modified)return l.ob.get("allChangesLost")},I.prototype.open=function(){try{null!=window.opener&&null!=window.opener.openFile&&window.opener.openFile.setConsumer(l.Cb.bind(this,(function(e,t){try{var i=l.Cb.parseXml(e);this.editor.setGraphXml(i.documentElement),this.editor.setModified(!1),this.editor.undoManager.clear(),null!=t&&(this.editor.setFilename(t),this.updateDocumentTitle())}catch(e){l.Cb.alert(l.ob.get("invalidOrMissingFile")+": "+e.message)}})))}catch(e){}this.editor.graph.view.validate(),this.editor.graph.sizeDidChange(),this.editor.fireEvent(new l.F("resetGraphView"))},I.prototype.setCurrentMenu=function(e,t){this.currentMenuElt=t,this.currentMenu=e},I.prototype.resetCurrentMenu=function(){this.currentMenuElt=null,this.currentMenu=null},I.prototype.hideCurrentMenu=function(){null!=this.currentMenu&&(this.currentMenu.hideMenu(),this.resetCurrentMenu())},I.prototype.updateDocumentTitle=function(){var e=this.editor.getOrCreateFilename();null!=this.editor.appName&&(e+=" - "+this.editor.appName),document.title=e},I.prototype.createHoverIcons=function(){return new p.b(this.editor.graph)},I.prototype.redo=function(){try{this.editor.graph.isEditing()?document.execCommand("redo",!1,null):this.editor.undoManager.redo()}catch(e){}},I.prototype.undo=function(){try{var e,t=this.editor.graph;t.isEditing()?(e=t.cellEditor.textarea.innerHTML,document.execCommand("undo",!1,null),e==t.cellEditor.textarea.innerHTML&&(t.stopEditing(!0),this.editor.undoManager.undo())):this.editor.undoManager.undo()}catch(e){}},I.prototype.canRedo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canRedo()},I.prototype.canUndo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canUndo()},I.prototype.getEditBlankXml=function(){return l.Cb.getXml(this.editor.getGraphXml())},I.prototype.getUrl=function(e){return null!=e?e:window.location.pathname},I.prototype.setScrollbars=function(e){var t=this.editor.graph,i=t.container.style.overflow;t.scrollbars=e,this.editor.updateGraphComponents(),i!=t.container.style.overflow&&(t.container.scrollTop=0,t.container.scrollLeft=0,t.view.scaleAndTranslate(1,0,0),this.resetScrollbars()),this.fireEvent(new l.F("scrollbarsChanged"))},I.prototype.hasScrollbars=function(){return this.editor.graph.scrollbars},I.prototype.resetScrollbars=function(){var e,t,i,n=this.editor.graph;this.editor.extendCanvas?this.editor.isChromelessView()||(l.Cb.hasScrollbars(n.container)?n.pageVisible?(i=n.getPagePadding(),n.container.scrollTop=Math.floor(i.y-this.editor.initialTopSpacing)-1,n.container.scrollLeft=Math.floor(Math.min(i.x,(n.container.scrollWidth-n.container.clientWidth)/2))-1,0<(i=n.getGraphBounds()).width&&0<i.height&&(i.x>n.container.scrollLeft+.9*n.container.clientWidth&&(n.container.scrollLeft=Math.min(i.x+i.width-n.container.clientWidth,i.x-10)),i.y>n.container.scrollTop+.9*n.container.clientHeight)&&(n.container.scrollTop=Math.min(i.y+i.height-n.container.clientHeight,i.y-10))):(i=n.getGraphBounds(),t=Math.max(i.width,n.scrollTileSize.width*n.view.scale),e=Math.max(i.height,n.scrollTileSize.height*n.view.scale),n.container.scrollTop=Math.floor(Math.max(0,i.y-Math.max(20,(n.container.clientHeight-e)/4))),n.container.scrollLeft=Math.floor(Math.max(0,i.x-Math.max(0,(n.container.clientWidth-t)/2)))):(e=l.mb.fromRectangle(n.pageVisible?n.view.getBackgroundPageBounds():n.getGraphBounds()),i=n.view.translate,t=n.view.scale,e.x=e.x/t-i.x,e.y=e.y/t-i.y,e.width/=t,e.height/=t,i=n.pageVisible?0:Math.max(0,(n.container.clientHeight-e.height)/4),n.view.setTranslate(Math.floor(Math.max(0,(n.container.clientWidth-e.width)/2)-e.x+2),Math.floor(i-e.y+1)))):(n.container.scrollTop=0,n.container.scrollLeft=0,l.Cb.hasScrollbars(n.container)||n.view.setTranslate(0,0))},I.prototype.setPageVisible=function(e){var t=this.editor.graph,i=l.Cb.hasScrollbars(t.container),n=0,o=0;i&&(n=t.view.translate.x*t.view.scale-t.container.scrollLeft,o=t.view.translate.y*t.view.scale-t.container.scrollTop),t.pageVisible=e,t.pageBreaksVisible=e,t.preferPageSize=e,t.view.validateBackground(),i&&(e=t.getSelectionCells(),t.clearSelection(),t.setSelectionCells(e)),t.sizeDidChange(),i&&(t.container.scrollLeft=t.view.translate.x*t.view.scale-n,t.container.scrollTop=t.view.translate.y*t.view.scale-o),this.fireEvent(new l.F("pageViewChanged"))},(b=new l.cb(new a.a,["ui","previousColor","previousImage","previousFormat","previousPageScale"])).afterDecode=function(e,t,i){return i.previousColor=i.color,i.previousImage=i.image,i.previousFormat=i.format,i.previousPageScale=i.pageScale,null!=i.foldingEnabled&&(i.foldingEnabled=!i.foldingEnabled),i},l.o.register(b),I.prototype.setBackgroundColor=function(e){this.editor.graph.background=e,this.editor.graph.view.validateBackground(),this.fireEvent(new l.F("backgroundColorChanged"))},I.prototype.setFoldingEnabled=function(e){this.editor.graph.foldingEnabled=e,this.editor.graph.view.revalidate(),this.fireEvent(new l.F("foldingEnabledChanged"))},I.prototype.setPageFormat=function(e){this.editor.graph.pageFormat=e,this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct(),this.fireEvent(new l.F("pageFormatChanged"))},I.prototype.setPageScale=function(e){this.editor.graph.pageScale=e,this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct(),this.fireEvent(new l.F("pageScaleChanged"))},I.prototype.setGridColor=function(e){this.editor.graph.view.gridColor=e,this.editor.graph.view.validateBackground(),this.fireEvent(new l.F("gridColorChanged"))},I.prototype.addUndoListener=function(){var e=this.actions.get("undo"),t=this.actions.get("redo"),i=this.editor.undoManager,n=l.Cb.bind(this,(function(){e.setEnabled(this.canUndo()),t.setEnabled(this.canRedo())})),o=(i.addListener(l.E.ADD,n),i.addListener(l.E.UNDO,n),i.addListener(l.E.REDO,n),i.addListener(l.E.CLEAR,n),this.editor.graph.cellEditor.startEditing),r=(this.editor.graph.cellEditor.startEditing=function(){o.apply(this,arguments),n()},this.editor.graph.cellEditor.stopEditing);this.editor.graph.cellEditor.stopEditing=function(){r.apply(this,arguments),n()},n()},I.prototype.updateActionStates=function(){var e=this.editor.graph,t=!e.isSelectionEmpty(),i=!1,n=!1,l=e.getSelectionCells();if(null!=l)for(var o=0;o<l.length;o++){var r=l[o];if(e.getModel().isEdge(r)&&(n=!0),e.getModel().isVertex(r)&&(i=!0),n&&i)break}var a=["cut","copy","bold","italic","underline","delete","duplicate","backgroundColor","borderColor","edit","toFront","toBack","lockUnlock","solid","dashed","pasteSize","dotted","fillColor","gradientColor","shadow","fontColor","formattedText","rounded","toggleRounded","sharp","strokeColor"];for(o=0;o<a.length;o++)this.actions.get(a[o]).setEnabled(t);this.actions.get("setAsDefaultStyle").setEnabled(1==e.getSelectionCount()),this.actions.get("clearWaypoints").setEnabled(!e.isSelectionEmpty()),this.actions.get("copySize").setEnabled(1==e.getSelectionCount()),this.actions.get("turn").setEnabled(!e.isSelectionEmpty()),this.actions.get("curved").setEnabled(n),this.actions.get("rotation").setEnabled(i),this.actions.get("wordWrap").setEnabled(i),this.actions.get("autosize").setEnabled(i);var s=i&&1==e.getSelectionCount();this.actions.get("group").setEnabled(1<e.getSelectionCount()||s&&!e.isContainer(e.getSelectionCell())),this.actions.get("ungroup").setEnabled(1==e.getSelectionCount()&&(0<e.getModel().getChildCount(e.getSelectionCell())||s&&e.isContainer(e.getSelectionCell()))),this.actions.get("removeFromGroup").setEnabled(s&&e.getModel().isVertex(e.getModel().getParent(e.getSelectionCell()))),this.menus.get("navigation").setEnabled(t||null!=e.view.currentRoot),this.actions.get("collapsible").setEnabled(i&&(e.isContainer(e.getSelectionCell())||0<e.model.getChildCount(e.getSelectionCell()))),this.actions.get("home").setEnabled(null!=e.view.currentRoot),this.actions.get("exitGroup").setEnabled(null!=e.view.currentRoot),this.actions.get("enterGroup").setEnabled(1==e.getSelectionCount()&&e.isValidRoot(e.getSelectionCell())),s=1==e.getSelectionCount()&&e.isCellFoldable(e.getSelectionCell()),this.actions.get("expand").setEnabled(s),this.actions.get("collapse").setEnabled(s),this.actions.get("guides").setEnabled(e.isEnabled()),this.actions.get("grid").setEnabled(!this.editor.chromeless||this.editor.editable),s=e.isEnabled()&&!e.isCellLocked(e.getDefaultParent());this.menus.get("layout").setEnabled(s),this.menus.get("direction").setEnabled(s&&i),this.menus.get("align").setEnabled(s&&i&&1<e.getSelectionCount()),this.menus.get("distribute").setEnabled(s&&i&&1<e.getSelectionCount()),this.actions.get("selectVertices").setEnabled(s),this.actions.get("selectEdges").setEnabled(s),this.actions.get("selectAll").setEnabled(s),this.actions.get("selectNone").setEnabled(s),this.updatePasteActionStates()},I.prototype.zeroOffset=new l.hb(0,0),I.prototype.getDiagramContainerOffset=function(){return this.zeroOffset},I.prototype.refresh=function(e){e=null==e||e;var t=l.k.IS_IE&&(null==document.documentMode||5==document.documentMode),i=this.container.clientWidth,n=this.container.clientHeight,o=(this.container==document.body&&(i=document.body.clientWidth||document.documentElement.clientWidth,n=t&&document.body.clientHeight||document.documentElement.clientHeight),0),r=(l.k.IS_IOS&&!window.navigator.standalone&&window.innerHeight!=document.documentElement.clientHeight&&(o=document.documentElement.clientHeight-window.innerHeight,window.scrollTo(0,0)),Math.max(0,Math.min(this.hsplitPosition,i-this.splitSize-20))),a=0,s=(null!=this.menubar&&(this.menubarContainer.style.height=this.menubarHeight+"px",a+=this.menubarHeight),null!=this.toolbar&&(this.toolbarContainer.style.top=this.menubarHeight+"px",this.toolbarContainer.style.height=this.toolbarHeight+"px",a+=this.toolbarHeight),0<a&&!l.k.IS_QUIRKS&&(a+=1),0),d=(null!=this.sidebarFooterContainer&&(d=this.footerHeight+o,s=Math.max(0,Math.min(n-a-d,this.sidebarFooterHeight)),this.sidebarFooterContainer.style.width=r+"px",this.sidebarFooterContainer.style.height=s+"px",this.sidebarFooterContainer.style.bottom=d+"px"),null!=this.format?this.formatWidth:0),h=(this.sidebarContainer.style.top=a+"px",this.sidebarContainer.style.width=r+"px",this.formatContainer.style.top=a+"px",this.formatContainer.style.width=d+"px",this.formatContainer.style.display=null!=this.format?"":"none",this.getDiagramContainerOffset()),c=null!=this.hsplit.parentNode?r+this.splitSize:0;this.diagramContainer.style.left=c+h.x+"px",this.diagramContainer.style.top=a+h.y+"px",this.footerContainer.style.height=this.footerHeight+"px",this.hsplit.style.top=this.sidebarContainer.style.top,this.hsplit.style.bottom=this.footerHeight+o+"px",this.hsplit.style.left=r+"px",this.footerContainer.style.display=0==this.footerHeight?"none":"",null!=this.tabContainer&&(this.tabContainer.style.left=c+"px"),t?(this.menubarContainer.style.width=i+"px",this.toolbarContainer.style.width=this.menubarContainer.style.width,a=Math.max(0,n-this.footerHeight-this.menubarHeight-this.toolbarHeight),this.sidebarContainer.style.height=a-s+"px",this.formatContainer.style.height=a+"px",this.diagramContainer.style.width=null!=this.hsplit.parentNode?Math.max(0,i-r-this.splitSize-d)+"px":i+"px",this.footerContainer.style.width=this.menubarContainer.style.width,h=Math.max(0,n-this.footerHeight-this.menubarHeight-this.toolbarHeight),null!=this.tabContainer&&(this.tabContainer.style.width=this.diagramContainer.style.width,this.tabContainer.style.bottom=this.footerHeight+o+"px",h-=this.tabContainer.clientHeight),this.diagramContainer.style.height=h+"px",this.hsplit.style.height=h+"px"):(0<this.footerHeight&&(this.footerContainer.style.bottom=o+"px"),this.diagramContainer.style.right=d+"px",c=0,null!=this.tabContainer&&(this.tabContainer.style.bottom=this.footerHeight+o+"px",this.tabContainer.style.right=this.diagramContainer.style.right,c=this.tabContainer.clientHeight),this.sidebarContainer.style.bottom=this.footerHeight+s+o+"px",this.formatContainer.style.bottom=this.footerHeight+o+"px",this.diagramContainer.style.bottom=this.footerHeight+o+c+"px"),e&&this.editor.graph.sizeDidChange()},I.prototype.createTabContainer=function(){return null},I.prototype.createDivs=function(){this.menubarContainer=this.createDiv("geMenubarContainer"),this.toolbarContainer=this.createDiv("geToolbarContainer"),this.sidebarContainer=this.createDiv("geSidebarContainer"),this.formatContainer=this.createDiv("geSidebarContainer geFormatContainer"),this.diagramContainer=this.createDiv("geDiagramContainer"),this.footerContainer=this.createDiv("geFooterContainer"),this.hsplit=this.createDiv("geHsplit"),this.hsplit.setAttribute("title",l.ob.get("collapseExpand")),this.menubarContainer.style.top="0px",this.menubarContainer.style.left="0px",this.menubarContainer.style.right="0px",this.toolbarContainer.style.left="0px",this.toolbarContainer.style.right="0px",this.sidebarContainer.style.left="0px",this.formatContainer.style.right="0px",this.formatContainer.style.zIndex="1",this.diagramContainer.style.right=(null!=this.format?this.formatWidth:0)+"px",this.footerContainer.style.left="0px",this.footerContainer.style.right="0px",this.footerContainer.style.bottom="0px",this.footerContainer.style.zIndex=l.jb.prototype.zIndex-2,this.hsplit.style.width=this.splitSize+"px",this.sidebarFooterContainer=this.createSidebarFooterContainer(),this.sidebarFooterContainer&&(this.sidebarFooterContainer.style.left="0px"),this.editor.chromeless?this.diagramContainer.style.border="none":this.tabContainer=this.createTabContainer()},I.prototype.createSidebarFooterContainer=function(){return null},I.prototype.createUi=function(){this.menubar=this.editor.chromeless?null:this.menus.createMenubar(this.createDiv("geMenubar")),null!=this.menubar&&(this.exitButton=this.createDiv("diagram-exit"),this.menubarContainer.appendChild(this.menubar.container),this.menubarContainer.appendChild(this.exitButton)),null!=this.menubar&&(this.statusContainer=this.createStatusContainer(),this.editor.addListener("statusChanged",l.Cb.bind(this,(function(){this.setStatusText(this.editor.getStatus())}))),this.setStatusText(this.editor.getStatus()),this.menubar.container.appendChild(this.statusContainer),this.container.appendChild(this.menubarContainer)),this.sidebar=this.editor.chromeless?null:this.createSidebar(this.sidebarContainer),null!=this.sidebar&&this.container.appendChild(this.sidebarContainer),this.format=this.editor.chromeless||!this.formatEnabled?null:this.createFormat(this.formatContainer),null!=this.format&&this.container.appendChild(this.formatContainer);var e=this.editor.chromeless?null:this.createFooter();null!=e&&(this.footerContainer.appendChild(e),this.container.appendChild(this.footerContainer)),null!=this.sidebar&&this.sidebarFooterContainer&&this.container.appendChild(this.sidebarFooterContainer),this.container.appendChild(this.diagramContainer),null!=this.container&&null!=this.tabContainer&&this.container.appendChild(this.tabContainer),this.toolbar=this.editor.chromeless?null:this.createToolbar(this.createDiv("geToolbar")),null!=this.toolbar&&(this.toolbarContainer.appendChild(this.toolbar.container),this.container.appendChild(this.toolbarContainer)),null!=this.sidebar&&(this.container.appendChild(this.hsplit),this.addSplitHandler(this.hsplit,!0,0,l.Cb.bind(this,(function(e){this.hsplitPosition=e,this.refresh()}))))},I.prototype.createStatusContainer=function(){var e=document.createElement("a");return e.className="geItem geStatus",screen.width<420&&(e.style.maxWidth=Math.max(20,screen.width-320)+"px",e.style.overflow="hidden"),e},I.prototype.setStatusText=function(e){this.statusContainer.innerHTML=e},I.prototype.createToolbar=function(e){return new T(this,e)},I.prototype.createSidebar=function(e){return new S(this,e)},I.prototype.createFormat=function(e){return new x.a(this,e)},I.prototype.createFooter=function(){return this.createDiv("geFooter")},I.prototype.createDiv=function(e){var t=document.createElement("div");return t.className=e,t},I.prototype.addSplitHandler=function(e,t,i,n){var o=null,r=null,a=!0,s=null,d=(l.k.IS_POINTER&&(e.style.touchAction="none"),l.Cb.bind(this,(function(){var n=parseInt(t?e.style.left:e.style.bottom);return t?n:n+i-this.footerHeight})));function h(e){var h;null!=o&&(h=new l.hb(l.E.getClientX(e),l.E.getClientY(e)),n(Math.max(0,r+(t?h.x-o.x:o.y-h.y)-i)),l.E.consume(e),r!=d())&&(a=!0,s=null)}function c(e){h(e),o=r=null}l.E.addGestureListeners(e,(function(e){o=new l.hb(l.E.getClientX(e),l.E.getClientY(e)),r=d(),a=!1,l.E.consume(e)})),l.E.addListener(e,"click",l.Cb.bind(this,(function(e){var t;!a&&this.hsplitClickEnabled&&(t=null!=s?s-i:0,s=d(),n(t),l.E.consume(e))}))),l.E.addGestureListeners(document,null,h,c),this.destroyFunctions.push((function(){l.E.removeGestureListeners(document,null,h,c)}))},I.prototype.handleError=function(e,t,i,n){var o,r;null!=(e=null!=e&&null!=e.error?e.error:e)||null!=t?(o=l.Cb.htmlEntities(l.ob.get("unknownError")),r=l.ob.get("ok"),t=null!=t?t:l.ob.get("error"),null!=e&&null!=e.message&&(o=l.Cb.htmlEntities(e.message)),this.showError(t,o,r,i,null,null,null,null,null,null,null,null,n?i:null)):null!=i&&i()},I.prototype.showError=function(e,t,i,n,o,a,s,d,h,c,u,p,g){e=new r.c(this,e,t,i||l.ob.get("ok"),n,o,a,s,p,d,h),i=Math.ceil(null!=t?t.length/50:1),this.showDialog(e.container,c||340,u||100+20*i,!0,!1,g),e.init()},I.prototype.showDialog=function(e,t,i,n,l,o,a,s,d,h){this.editor.graph.tooltipHandler.hideTooltip(),null==this.dialogs&&(this.dialogs=[]),this.dialog=new r.a(this,e,t,i,n,l,o,a,s,d,h),this.dialogs.push(this.dialog)},I.prototype.hideDialog=function(e,t){var i;null!=this.dialogs&&0<this.dialogs.length&&(0==(i=this.dialogs.pop()).close(e,t)?this.dialogs.push(i):(this.dialog=0<this.dialogs.length?this.dialogs[this.dialogs.length-1]:null,this.editor.fireEvent(new l.F("hideDialog")),null==this.dialog&&"hidden"!=this.editor.graph.container.style.visibility&&window.setTimeout(l.Cb.bind(this,(function(){(this.editor.graph.isEditing()&&null!=this.editor.graph.cellEditor.textarea?this.editor.graph.cellEditor.textarea:(l.Cb.clearSelection(),this.editor.graph.container)).focus()})),0)))},I.prototype.ctrlEnter=function(){var e=this.editor.graph;if(e.isEnabled())try{for(var t=e.getSelectionCells(),i=new l.w,n=[],o=0;o<t.length;o++){var r=e.isTableCell(t[o])?e.model.getParent(t[o]):t[o];null==r||i.get(r)||(i.put(r,!0),n.push(r))}e.setSelectionCells(e.duplicateCells(n,!1))}catch(e){this.handleError(e)}},I.prototype.pickColor=function(e,t){var i=this.editor.graph,n=i.cellEditor.saveSelection(),l=226+17*(Math.ceil(s.a.prototype.presetColors.length/12)+Math.ceil(s.a.prototype.defaultColors.length/12));e=new s.a(this,e||"none",(function(e){i.cellEditor.restoreSelection(n),t(e)}),(function(){i.cellEditor.restoreSelection(n)}));this.showDialog(e.container,230,l,!0,!1),e.init()},I.prototype.extractGraphModelFromHtml=function(e){var t=null;try{var i,n=e.indexOf("&lt;mxGraphModel ");0<=n&&n<(i=e.lastIndexOf("&lt;/mxGraphModel&gt;"))&&(t=e.substring(n,i+21).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/\\&quot;/g,'"').replace(/\n/g,""))}catch(e){}return t},I.prototype.extractGraphModelFromEvent=function(e){var t=null,i=null;return null!=(i=null!=e&&null!=(e=null!=e.dataTransfer?e.dataTransfer:e.clipboardData)&&(10==document.documentMode||11==document.documentMode?i=e.getData("Text"):(i=0<=l.Cb.indexOf(e.types,"text/html")?e.getData("text/html"):null,l.Cb.indexOf(e.types,null==i||0==i.length)&&(i=e.getData("text/plain"))),null!=i)&&(i=p.a.zapGremlins(l.Cb.trim(i)),null!=(e=this.extractGraphModelFromHtml(i)))?e:i)&&this.isCompatibleString(i)?i:t},I.prototype.isCompatibleString=function(){return!1},I.prototype.executeLayout=function(e,t,i){var n=this.editor.graph;if(n.isEnabled()){n.getModel().beginUpdate();try{e()}catch(e){throw e}finally{this.allowAnimation&&t&&(null==navigator.userAgent||navigator.userAgent.indexOf("Camino")<0)?((e=new l.ab(n)).addListener(l.E.DONE,l.Cb.bind(this,(function(){n.getModel().endUpdate(),null!=i&&i()}))),e.startAnimation()):(n.getModel().endUpdate(),null!=i&&i())}}},I.prototype.showImageDialog=function(e,t,i){var n,o=this.editor.graph.cellEditor,r=o.saveSelection(),a=l.Cb.prompt(e,t);o.restoreSelection(r),null!=a&&0<a.length?((n=new Image).onload=function(){i(a,n.width,n.height)},n.onerror=function(){i(null),l.Cb.alert(l.ob.get("fileNotFound"))},n.src=a):i(null)},I.prototype.showLinkDialog=function(){},I.prototype.showBackgroundImageDialog=function(e,t){e=null!=e?e:l.Cb.bind(this,(function(e){(e=new a.a(this,null,e)).ignoreColor=!0,this.editor.graph.model.execute(e)}));var i=l.Cb.prompt(l.ob.get("backgroundImage"),null!=t?t.src:"");null!=i&&0<i.length?((t=new Image).onload=function(){e(new l.S(i,t.width,t.height),!1)},t.onerror=function(){e(null,!0),l.Cb.alert(l.ob.get("fileNotFound"))},t.src=i):e(null)},I.prototype.setBackgroundImage=function(e){this.editor.graph.setBackgroundImage(e),this.editor.graph.view.validateBackgroundImage(),this.fireEvent(new l.F("backgroundImageChanged"))},I.prototype.confirm=function(e,t,i){l.Cb.confirm(e)?null!=t&&t():null!=i&&i()},I.prototype.createOutline=function(){var e=new l.eb(this.editor.graph);return e.border=20,l.E.addListener(window,"resize",(function(){e.update()})),this.addListener("pageFormatChanged",(function(){e.update()})),e},I.prototype.altShiftActions={67:"clearWaypoints",65:"connectionArrows",80:"connectionPoints",84:"editTooltip",86:"pasteSize",88:"copySize"},I.prototype.createKeyHandler=function(){var e=this,t=this.editor.graph,i=new l.V(t),n=i.isEventIgnored,o=(i.isEventIgnored=function(e){return!(l.E.isShiftDown(e)&&9==e.keyCode)&&(!this.isControlDown(e)||l.E.isShiftDown(e)||90!=e.keyCode&&89!=e.keyCode&&188!=e.keyCode&&190!=e.keyCode&&85!=e.keyCode)&&(66!=e.keyCode&&73!=e.keyCode||!this.isControlDown(e)||this.graph.cellEditor.isContentEditing()&&!l.k.IS_FF&&!l.k.IS_SF)&&n.apply(this,arguments)},i.isEnabledForEvent=function(t){return!l.E.isConsumed(t)&&this.isGraphEvent(t)&&this.isEnabled()&&(null==e.dialogs||0==e.dialogs.length)},i.isControlDown=function(e){return l.E.isControlDown(e)||l.k.IS_MAC&&e.metaKey},[]),r=null;function a(e,i,n){o.push((function(){if(!t.isSelectionEmpty()&&t.isEnabled())if(i=null!=i?i:1,n){t.getModel().beginUpdate();try{for(var o,r=t.getSelectionCells(),a=0;a<r.length;a++)t.getModel().isVertex(r[a])&&t.isCellResizable(r[a])&&null!=(o=t.getCellGeometry(r[a]))&&(o=o.clone(),37==e?o.width=Math.max(0,o.width-i):38==e?o.height=Math.max(0,o.height-i):39==e?o.width+=i:40==e&&(o.height+=i),t.getModel().setGeometry(r[a],o))}finally{t.getModel().endUpdate()}}else{var s=t.getSelectionCell(),d=t.model.getParent(s),h=null;if(null!=(h=1==t.getSelectionCount()&&t.model.isVertex(s)&&null!=t.layoutManager&&!t.isCellLocked(s)?t.layoutManager.getLayout(d):h)&&h.constructor==l.tb)h=d.getIndex(s),37==e||38==e?t.model.add(d,s,Math.max(0,h-1)):39!=e&&40!=e||t.model.add(d,s,Math.min(t.model.getChildCount(d),h+1));else{r=t.getMovableCells(t.getSelectionCells());var c=[];for(a=0;a<r.length;a++){var u=t.getCurrentCellStyle(r[a]);"1"==l.Cb.getValue(u,"part","0")?(d=t.model.getParent(r[a]),t.model.isVertex(d)&&l.Cb.indexOf(r,d)<0&&c.push(d)):c.push(r[a])}0<c.length&&(h=s=0,37==e?s=-i:38==e?h=-i:39==e?s=i:40==e&&(h=i),t.moveCells(r=c,s,h))}}})),null!=r&&window.clearTimeout(r),r=window.setTimeout((function(){if(0<o.length){t.getModel().beginUpdate();try{for(var e=0;e<o.length;e++)o[e]();o=[]}finally{t.getModel().endUpdate()}}}),200)}var s={37:l.t.DIRECTION_WEST,38:l.t.DIRECTION_NORTH,39:l.t.DIRECTION_EAST,40:l.t.DIRECTION_SOUTH},d=i.getFunction,h=(l.V.prototype.getFunction=function(i){if(t.isEnabled()){if(l.E.isShiftDown(i)&&l.E.isAltDown(i)){var n=e.actions.get(e.altShiftActions[i.keyCode]);if(null!=n)return n.funct}if(9==i.keyCode&&l.E.isAltDown(i))return t.cellEditor.isContentEditing()?function(){document.execCommand("outdent",!1,null)}:l.E.isShiftDown(i)?function(){t.selectParentCell()}:function(){t.selectChildCell()};if(null!=s[i.keyCode]&&!t.isSelectionEmpty()){if(this.isControlDown(i)||!l.E.isShiftDown(i)||!l.E.isAltDown(i))return this.isControlDown(i)?function(){a(i.keyCode,l.E.isShiftDown(i)?t.gridSize:null,!0)}:function(){a(i.keyCode,l.E.isShiftDown(i)?t.gridSize:null)};if(t.model.isVertex(t.getSelectionCell()))return function(){var n=t.connectVertex(t.getSelectionCell(),s[i.keyCode],t.defaultEdgeLength,i,!0);null!=n&&0<n.length&&(1==n.length&&t.model.isEdge(n[0])?t.setSelectionCell(t.model.getTerminal(n[0],!1)):t.setSelectionCell(n[n.length-1]),t.scrollCellToVisible(t.getSelectionCell()),null!=e.hoverIcons)&&e.hoverIcons.update(t.view.getState(t.getSelectionCell()))}}}return d.apply(this,arguments)},i.bindAction=l.Cb.bind(this,(function(e,t,n,l){var o=this.actions.get(n);null!=o&&(n=function(){o.isEnabled()&&o.funct()},t?l?i.bindControlShiftKey(e,n):i.bindControlKey(e,n):l?i.bindShiftKey(e,n):i.bindKey(e,n))})),this),c=i.escape;return i.escape=function(){c.apply(this,arguments)},i.enter=function(){},i.bindControlShiftKey(36,(function(){t.exitGroup()})),i.bindControlShiftKey(35,(function(){t.enterGroup()})),i.bindShiftKey(36,(function(){t.home()})),i.bindKey(35,(function(){t.refresh()})),i.bindAction(107,!0,"zoomIn"),i.bindAction(109,!0,"zoomOut"),i.bindAction(80,!0,"print"),i.bindAction(79,!0,"outline",!0),this.editor.chromeless&&!this.editor.editable||(i.bindControlKey(36,(function(){t.isEnabled()&&t.foldCells(!0)})),i.bindControlKey(35,(function(){t.isEnabled()&&t.foldCells(!1)})),i.bindControlKey(13,(function(){h.ctrlEnter()})),i.bindAction(8,!1,"delete"),i.bindAction(8,!0,"deleteAll"),i.bindAction(46,!1,"delete"),i.bindAction(46,!0,"deleteAll"),i.bindAction(36,!1,"resetView"),i.bindAction(72,!0,"fitWindow",!0),i.bindAction(74,!0,"fitPage"),i.bindAction(74,!0,"fitTwoPages",!0),i.bindAction(48,!0,"customZoom"),i.bindAction(82,!0,"turn"),i.bindAction(82,!0,"clearDefaultStyle",!0),i.bindAction(65,!0,"selectAll"),i.bindAction(65,!0,"selectNone",!0),i.bindAction(73,!0,"selectVertices",!0),i.bindAction(69,!0,"selectEdges",!0),i.bindAction(69,!0,"editStyle"),i.bindAction(66,!0,"bold"),i.bindAction(66,!0,"toBack",!0),i.bindAction(70,!0,"toFront",!0),i.bindAction(68,!0,"duplicate"),i.bindAction(68,!0,"setAsDefaultStyle",!0),i.bindAction(90,!0,"undo"),i.bindAction(89,!0,"autosize",!0),i.bindAction(88,!0,"cut"),i.bindAction(67,!0,"copy"),i.bindAction(86,!0,"paste"),i.bindAction(71,!0,"group"),i.bindAction(77,!0,"editData"),i.bindAction(71,!0,"grid",!0),i.bindAction(73,!0,"italic"),i.bindAction(76,!0,"lockUnlock"),i.bindAction(76,!0,"layers",!0),i.bindAction(80,!0,"formatPanel",!0),i.bindAction(85,!0,"underline"),i.bindAction(85,!0,"ungroup",!0),i.bindAction(190,!0,"superscript"),i.bindAction(188,!0,"subscript"),i.bindAction(9,!1,"indent",!0),i.bindKey(13,(function(){t.isEnabled()&&t.startEditingAtCell()})),i.bindKey(113,(function(){t.isEnabled()&&t.startEditingAtCell()}))),l.k.IS_WIN?i.bindAction(89,!0,"redo"):i.bindAction(90,!0,"redo",!0),i},I.prototype.destroy=function(){if(null!=this.editor&&(this.editor.destroy(),this.editor=null),null!=this.menubar&&(this.menubar.destroy(),this.menubar=null),null!=this.toolbar&&(this.toolbar.destroy(),this.toolbar=null),null!=this.sidebar&&(this.sidebar.destroy(),this.sidebar=null),null!=this.keyHandler&&(this.keyHandler.destroy(),this.keyHandler=null),null!=this.keydownHandler&&(l.E.removeListener(document,"keydown",this.keydownHandler),this.keydownHandler=null),null!=this.keyupHandler&&(l.E.removeListener(document,"keyup",this.keyupHandler),this.keyupHandler=null),null!=this.resizeHandler&&(l.E.removeListener(window,"resize",this.resizeHandler),this.resizeHandler=null),null!=this.gestureHandler&&(l.E.removeGestureListeners(document,this.gestureHandler),this.gestureHandler=null),null!=this.orientationChangeHandler&&(l.E.removeListener(window,"orientationchange",this.orientationChangeHandler),this.orientationChangeHandler=null),null!=this.scrollHandler&&(l.E.removeListener(window,"scroll",this.scrollHandler),this.scrollHandler=null),null!=this.destroyFunctions){for(var e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions=null}var t=[this.menubarContainer,this.toolbarContainer,this.sidebarContainer,this.formatContainer,this.diagramContainer,this.footerContainer,this.chromelessToolbar,this.hsplit,this.sidebarFooterContainer,this.layersDialog];for(e=0;e<t.length;e++)null!=t[e]&&null!=t[e].parentNode&&t[e].parentNode.removeChild(t[e])},l.Eb.prototype.closeImage=o,l.Eb.prototype.normalizeImage="data:image/gif;base64,R0lGODlhDAAMAPcAAP///0RERAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAADAAMAAAIMgADCBxIcCCAgwgTCkRYMACAhQcbPnQYUeHEiQQfXmy4sKPFiA4pVgSJ0SDJhCg5NgwIADs=",l.Eb.prototype.maximizeImage="data:image/gif;base64,R0lGODlhDAAMAPcAAP///0RERAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAADAAMAAAIMAADCBxIcCCAgwgTCgRQ0ODChg8DMEx4UOJDihMvUrRoESPHiRsZcmwoEqNCiAUDAgA7",l.Eb.prototype.minimizeImage="data:image/gif;base64,R0lGODlhDAAMAIAAAERERP///yH5BAAAAAAALAAAAAAMAAwAAAIXhI8Xy20Nw4tsUgnuspTHlyhgmHkQGRYAOw==",l.Eb.prototype.resizeImage=o;var L={},M=(L[p.a.prototype.defaultThemeName]=Object(t.a)(n.a).documentElement,k.getLang=function(e){switch(void 0===e?"zh":e){case"en":default:return i.e(1).then(i.bind(null,503)).then((function(e){return e.langEN}));case"zh":return i.e(9).then(i.bind(null,504)).then((function(e){return e.langEN}))}},k);function k(e,t){var i=this;this.container=e,this.onExit=t,this.start=function(e,t,n){i.container.appendChild(i.diagramContainer),i.container.style.overflow="hidden",l.ob.parse(e),i.editor=new r.b(!1,L),i.editorUi=new I(i.editor,i.diagramContainer,null,i.onExit),t&&i.editorUi.editor.setGraphXml(t.documentElement),i.editor.graph.getModel().addListener(l.E.CHANGE,(function(){n&&n(i.editorUi&&i.editorUi.editor.getGraphXml())}))},this.getXML=function(){return i.editorUi&&i.editorUi.editor.getGraphXml()},this.exit=function(){i.container.style.overflow="",l.E.removeAllListeners(window),l.E.removeAllListeners(document),i.editor&&i.editor.destroy(),i.editorUi&&i.editorUi.destroy(),i.container.removeChild(i.diagramContainer)},this.editor=null,this.editorUi=null,this.diagramContainer=document.createElement("div"),this.diagramContainer.className="diagram-container geEditor"}}}]);