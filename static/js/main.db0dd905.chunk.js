(this["webpackJsonpdoc-editor-react"]=this["webpackJsonpdoc-editor-react"]||[]).push([[4],{0:function(e,t){e.exports=React},16:function(e,t){e.exports=ReactDOM},165:function(e,t,n){},167:function(e,t,n){},171:function(e,t,n){e.exports={selected:"selection_selected__ja28w"}},173:function(e,t,n){e.exports={preview:"components_preview__2862r"}},183:function(e,t,n){},188:function(e,t,n){},189:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},320:function(e,t,n){},321:function(e,t,n){},322:function(e,t,n){},323:function(e,t,n){},324:function(e,t,n){},325:function(e,t,n){},326:function(e,t,n){},327:function(e,t,n){},328:function(e,t,n){},329:function(e,t,n){},331:function(e,t,n){},338:function(e,t,n){},339:function(e,t,n){},340:function(e,t,n){},341:function(e,t,n){},342:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return Jr})),n(183);var r=n(350),i=n(351),o=n(355),s=n(356),c=n(0),l=n.n(c),a=(t=n(16),n.n(t)),d=(n(188),n(189),n(79),n(344),n(345),n(135),n(198),n(200),n(202),n(204),n(343),n(211),n(396)),h=n(2),u=n(110),p=n(37),b=n(54);function m(e){const{at:t,key:n,above:r}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};var i,o=h.a.above(e,{match:t=>h.a.isBlock(e,t)&&(!n||v(t,n)),at:t,mode:r?"highest":"lowest"});return o?([o,i]=o,{block:o,path:i}):null}const j=e=>!h.a.isEditor(e)&&h.b.isElement(e),v=(e,t)=>j(e)&&!!e[t],g=(e,t)=>!!t&&h.a.isBlock(e,t),x=e=>h.h.isText(e),f=(e,t)=>{var{at:t=e.selection,match:n,self:r=!0}=t||{};if(t){var i,o,s=h.a.path(e,t);for([i,o]of h.a.levels(e,{at:s,voids:!1,match:n,reverse:!0}))if(!h.h.isText(i)&&(r||!h.e.equals(s,o)))return{node:i,path:o}}},O=(e,t)=>Object(b.a)(t)&&!t.length||!(e=h.a.parent(e,t))?null:([t,e]=e,{node:t,path:e}),y=(e,t)=>{if(!e)return{};const n=t||[],r=(n.push("children"),{});return Object.keys(e).filter((e=>-1===n.indexOf(e))).forEach((t=>r[t]=e[t])),r},k=(e,n)=>{try{return p.b.findPath(e,n)}catch(t){for(var r=[{path:[],node:e}];r.length;){var i=r.pop();if(i&&i.node&&Array.isArray(i.node.children))for(var[o,s]of i.node.children.entries()){if(s===n)return[...i.path,o];r.push({path:[...i.path,o],node:s})}}return null}},w=(e,t)=>{for(var n=[...h.a.path(e,t)];n.length;){var r=h.a.node(e,n);if(r&&h.a.isBlock(e,r[0]))return n;n.pop()}return null},N=(e,t,n)=>n<=0||!(n=(t=[...h.a.path(e,t)].slice(0,-n)).length&&h.a.node(e,t))||!n[0]?null:{node:n[0],path:n[1]},E=(e,t,n,r)=>{var[t,...i]=t.split(".");if(!(e=m(e,{at:r,key:t})))return!1;let o=e.block[t];for(let s=0,c=i.length;s<c;++s){if(!Object(b.e)(o))return!1;o=o[i[s]]}return!!Object(b.b)(n)||o===n};function C(e){return!(e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e.selection)||h.g.isCollapsed(e)}function M(e){e=e.key;for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return-1<n.indexOf(e)}const S=(e,t)=>(t=h.a.start(e,t),C(e,e.selection)&&h.f.equals(t,e.selection.anchor)),L=(e,t)=>!!g(e,t)&&(e=t.children[0])&&x(e);function B(e,t,n){t=1<arguments.length&&void 0!==t?t:"last",n=2<arguments.length?n:void 0;var{at:r,wrapKey:i,itemKey:o}=n,i=n.wrapNode||m(e,{at:r,key:i});n=n.itemNode||m(e,{at:r,key:o});if(i&&n&&i.block.children.length)return e=i.block.children,"last"===t?e[e.length-1]===n.block:"first"===t?e[0]===n.block:e[0]===n.block||e[e.length-1]===n.block}const D=(e,t,n,r)=>{var i,o;return!(!(r=r||e.selection)||(o=(o=h.a.node(e,r))&&o[0],i=(r=O(e,r))&&r.node,!(g(e,o)&&g(e,i)?o[n]&&i[t]:(r=(o=r&&O(e,r.path))&&o.node,g(e,i)&&g(e,r)&&i[n]&&r[t]))))};class _{constructor(e){this.editor=e,this.onCopy=e=>{var t=this.editor.getFragment();const n=e=>e.map((e=>x(e)?h.c.string(e):L(this.editor,e)?n(e.children)+"\n":g(this.editor,e)?n(e.children):"")).join("");t=n(t).replace(/\n$/,""),e.clipboardData.setData("text/plain",t),e.preventDefault()}}}class A{constructor(e){this.editor=e,this.commands={},this.register=(e,t)=>{this.commands[e]=t},this.exec=(e,t)=>this.commands[e]&&this.commands[e](this.editor,e,t),this.destroy=()=>{this.commands={}}}get(){return this.commands}}const I="Backspace",P="Enter",T=" ",z="Tab",U="mouseup",K="mousemove",V="mousedown",H="selectionchange";class G{constructor(){this.listeners={}}on(e,t){this.addEventListener(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3,!1)}once(e,t){this.addEventListener(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3,!0)}addEventListener(e,t,n,r){var i=this.listeners[e]||[];i.some((e=>e.listener===t))||i.push({listener:t,priority:n,once:r}),i.sort(((e,t)=>e.priority-t.priority)),this.listeners[e]=i}off(e,t){var n=this.listeners[e];n&&(n=n.filter((e=>e.listener!==t)),this.listeners[e]=n)}trigger(e,t){var n=this.listeners[e];if(n){let i=!1;var r={...t,stop:()=>i=!0};for(const t of n)if(t.listener(r),t.once&&this.off(e,t.listener),i)break}}clear(){this.listeners={}}}const R="IS_MOUSE_DOWN",F={GLOBAL_MOUSE_DOWN:"mousedown",GLOBAL_MOUSE_UP:"mouseup"};class W{constructor(e,t){this.editor=e,this.bus=t,this.onMouseDown=e=>{this.editor.state.set(R,!0),this.bus.trigger(F.GLOBAL_MOUSE_DOWN,e)},this.onMouseUp=e=>{this.editor.state.set(R,!1),this.bus.trigger(F.GLOBAL_MOUSE_UP,e)},this.destroy=()=>{document.removeEventListener(F.GLOBAL_MOUSE_DOWN,this.onMouseDown),document.addEventListener(F.GLOBAL_MOUSE_UP,this.onMouseUp)},document.addEventListener(F.GLOBAL_MOUSE_DOWN,this.onMouseDown),document.addEventListener(F.GLOBAL_MOUSE_UP,this.onMouseUp)}}class q{constructor(e){this.editor=e,this.bus=void 0,this.nativeEvent=void 0,this.on=(e,t,n)=>this.bus.on(e,t,n),this.once=(e,t,n)=>this.bus.once(e,t,n),this.off=(e,t)=>this.bus.off(e,t),this.trigger=(e,t)=>this.bus.trigger(e,t),this.destroy=()=>{this.bus.clear(),this.nativeEvent.destroy()},this.bus=new G,this.nativeEvent=new W(e,this.bus)}}const X={CONTENT_CHANGE:"CONTENT_CHANGE",SELECTION_CHANGE:"SELECTION_CHANGE",PAINT:"PAINT",MOUNT:"MOUNT",READONLY_CHANGE:"READONLY_CHANGE",COMPOSITION_START:"react_compositionstart",COMPOSITION_UPDATE:"react_compositionupdate",COMPOSITION_END:"react_compositionend",COPY:"react_copy",CUT:"react_cut",PASTE:"react_paste",KEY_DOWN:"react_keydown",KEY_PRESS:"react_keypress",KEY_UP:"react_keyup",FOCUS:"react_focus",BLUR:"react_blur",MOUSE_DOWN:"react_mousedown",MOUSE_UP:"react_mouseup",MOUSE_MOVE:"react_mousemove",DROP:"react_drop",DROP_OVER:"react_dragover",...F},Y=-1,J=0,Z=1,$=2;class Q{constructor(e){this.level=e}set(e){this.level=e}debug(){if(this.level<=Y){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("DEBUG: ",...t)}}info(){if(this.level<=J){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("Log: ",...t)}}warning(){if(this.level<=Z){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn("Warning: ",...t)}}error(){if(this.level<=$){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error("Error: ",...t)}}trace(){if(this.level<=$){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.trace("Trace: ",...t)}}}var ee=n(1);const te=e=>{var{className:t,selectable:n=!0}=e;return Object(ee.jsx)("div",{contentEditable:!1,className:t,style:{userSelect:n?void 0:"none"},children:e.children})},ne="BLOCK",re="INLINE",ie=!0;class oe{constructor(e){var t=this;this.editor=e,this.plugins=void 0,this.register=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const s of n){var i=s.key,o=t.plugins[i];o&&o.destroy&&o.destroy(),t.plugins[i]=s}},this.apply=()=>{var e=Object.values(this.plugins);const t=[],n=[],r=[],i=[];return e.forEach((e=>{e.type===ne?(t.push(e),e.WITH_LEAF_PLUGINS&&n.push(...e.WITH_LEAF_PLUGINS)):e.type===re&&n.push(e),t.sort(((e,t)=>(t.priority||0)-(e.priority||0))),n.sort(((e,t)=>(t.priority||0)-(e.priority||0))),e.onCommand&&this.editor.command.register(e.key,e.onCommand),e.onKeyDown&&r.push(e),e.onDecorate&&i.push(e)})),{renderBlock:e=>{var n=e,r=t,i={props:n,style:{},stop:!1,plain:!1,classList:[],element:n.element,children:n.children};for(const t of r)if(t.match(n)&&t.render){i.children=Object(ee.jsxs)(l.a.Fragment,{children:[n.children,Object(ee.jsx)(te,{children:t.render(i)})]});break}for(let t=r.length-1;0<=t;t--){var o=r[t];if(o.match(n)&&o.renderLine&&(i.children=o.renderLine(i)),i.stop)break;if(i.plain)return i.children}return Object(ee.jsx)("div",{...n.attributes,className:i.classList.join(" "),style:i.style,children:i.children})},renderLeaf:e=>{var t=e,r=(e=n,{props:t,style:{},element:t.text,leaf:t.leaf,classList:[],children:t.children});for(const n of e)n.match(t)&&n.render&&(r.children=n.render(r));return Object(ee.jsx)("span",{...t.attributes,className:r.classList.join(" "),style:r.style,children:r.children})},onKeyDown:e=>{if(!e.nativeEvent.isComposing)for(const t of r)if(t.onKeyDown&&t.onKeyDown(e)===ie)break},decorate:e=>{var t,n=e,r=(e=i,[]);for(const i of e)i.onDecorate&&(t=i.onDecorate(n))&&r.push(...t);return r}}},this.reset=()=>{Object.values(this.plugins).forEach((e=>e.destroy&&e.destroy())),this.plugins={}},this.destroy=()=>{this.reset()},this.plugins={}}}class se{constructor(e){this.editor=e,this.isBlockNode=e=>Object.keys(e).some((e=>this.editor.schema.block.has(e))),this.isWrapNode=e=>Object.keys(e).some((e=>this.editor.schema.wrap.has(e))),this.isPairNode=e=>Object.keys(e).some((e=>this.editor.schema.pair.has(e))),this.isVoidNode=e=>Object.keys(e).some((e=>this.editor.schema.void.has(e))),this.isInstanceNode=e=>e===this.editor||Object.keys(e).some((e=>this.editor.schema.instance.has(e))),this.isMatchAboveBlockNode=(e,t)=>{if(t=t||this.editor.selection)for(var n=[...h.a.path(this.editor,t)];n.length;){var r;if(!(r=h.a.node(this.editor,n)))return!1;var[r]=r;if(this.isInstanceNode(r))return!1;if(h.a.isBlock(this.editor,r)&&r[e])return!0;n.pop()}return!1}}}function ce(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};let r=n.node;const{at:i,key:o}=n;r||(n=f(e,{at:i,match:t=>g(e,t)&&(!o||v(t,o))}))&&n.node&&(r=n.node),r&&h.i.unsetNodes(e,t,{match:e=>e===r,at:i})}function le(e,t){const{at:n,node:r}=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};r?h.i.setNodes(e,t,{match:e=>e===r,split:!0,at:n}):h.i.setNodes(e,t,{match:x,split:!0,at:n})}function ae(e,t){const{at:n,node:r}=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};r?h.i.unsetNodes(e,t,{match:e=>e===r,at:n}):h.i.unsetNodes(e,t,{match:x,split:!0,at:n})}function de(e,t,n){const r=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).at;h.a.withoutNormalizing(e,(()=>{he(e,t,{at:r}),h.i.wrapNodes(e,n,{match:x,at:r})}))}const he=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};let r=n.node;const{at:i,key:o}=n;r||(n=f(e,{at:i,match:t=>g(e,t)&&(!o||v(t,o))}))&&n.node&&(r=n.node),r&&h.i.setNodes(e,t,{match:e=>e===r,at:i})},ue=(e,t)=>{const{at:n,wrapKey:r,pairKey:i}=t,o=f(e,{match:e=>v(e,r),at:n}),s=f(e,{match:e=>v(e,i),at:n});if(o&&s){const t=y(o.node,[r]);h.a.withoutNormalizing(e,(()=>{h.i.setNodes(e,t,{at:s.path}),h.i.unsetNodes(e,[i],{at:s.path}),h.i.unwrapNodes(e,{match:(e,t)=>h.e.equals(t,o.path),split:!0,at:s.path})}))}};class pe{constructor(){this.wrap=new Map,this.pair=new Map,this.void=new Set,this.block=new Set,this.inline=new Set,this.instance=new Set}normalize(e,t){try{h.a.withoutNormalizing(e,(()=>{this.normalizeBlockNode(e,t)}))}catch(e){console.error("Normalize Error: ",e)}}normalizeBlockNode(e,t){var[t,n]=t;g(e,t)&&(this.normalizeWrapNode(e,t,n),this.normalizePairNode(e,t,n),this.normalizeInstanceNode(e,t,n))}normalizeWrapNode(e,t,n){for(const r of Object.keys(t))if(this.wrap.has(r)){const i=this.wrap.get(r);(t.children||[]).forEach(((o,s)=>{if(g(e,o)&&!o[i]){o=[...n,s];{var c=e;const{wrapNode:n,pairPath:s,wrapKey:l,pairKey:a}={wrapKey:r,pairKey:i,wrapNode:t,pairPath:o},d=y(n,[l]);h.a.withoutNormalizing(c,(()=>{h.i.setNodes(c,d,{at:s}),h.i.unsetNodes(c,[a],{at:s}),h.i.unwrapNodes(c,{split:!0,at:s})}))}}}))}}normalizePairNode(e,t,n){for(const o of Object.keys(t)){var r,i;this.pair.has(o)&&(r=this.pair.get(o),(i=(i=h.a.parent(e,n))&&i[0])&&g(e,i)&&i[r]||ce(e,[o],{node:t}))}}normalizeInstanceNode(e,t,n){for(const r of Object.keys(t))this.instance.has(r)&&(t.children||[]).forEach(((t,r)=>{x(t)&&(t=[...n,r],h.i.wrapNodes(e,{children:[]},{at:t}))}))}}class be extends pe{constructor(e,t){for(var[n,r]of(super(),this.editor=void 0,this.raw=void 0,this.raw=e,this.editor=t,Object.entries(e)))r.void&&(this.void.add(n),this.block.add(n)),r.block&&this.block.add(n),r.wrap&&(this.block.add(r.wrap),this.wrap.set(r.wrap,n),this.pair.set(n,r.wrap)),r.inline&&this.inline.add(n),r.instance&&this.instance.add(n)}with(e){const{isVoid:t,normalizeNode:n,isInline:r,deleteBackward:i}=e;return e.isInline=e=>{for(const t of Object.keys(e))if(this.inline.has(t))return!0;return r(e)},e.isVoid=e=>{for(const t of Object.keys(e))if(this.void.has(t))return!0;return t(e)},e.normalizeNode=t=>{var[r]=t;g(e,r)&&this.normalize(e,t),n(t)},e.deleteBackward=t=>{var n,r=e.selection;if(r&&h.g.isCollapsed(r)&&((n=N(e,r.anchor.path,2))&&g(e,n.node))){var{node:n,path:o}=n;for(const t of Object.keys(n))if(this.instance.has(t)){var s=h.a.start(e,o);if(h.f.equals(r.anchor,s))return}}i(t)},e}}class me{constructor(e){this.editor=e,this._state=void 0,this._state={}}get(e){return!!this._state[e]}set(e,t){this._state[e]=t}}class je{constructor(e){this.editor=e,this.isBatching=void 0,this.batchFlat=void 0,this.destroy=()=>{this.batchFlat=[],this.editor.event.off(X.CONTENT_CHANGE,this.onApply)},this.onApply=e=>{this.isBatching&&this.batchFlat.push(e.change)},this.batch=e=>{this.isBatching=!0,h.a.withoutNormalizing(this.editor,(()=>{u.a.withoutSaving(this.editor,e)})),this.isBatching=!1,this.editor.history.undos.push([...this.batchFlat]),this.batchFlat=[]},this.batchFlat=[],this.isBatching=!1,this.editor.event.on(X.CONTENT_CHANGE,this.onApply)}}const ve=[{children:[{text:""}]}];class ge extends l.a.PureComponent{constructor(e){super(e),this.onKeyDown=e=>{this.props.editor.event.trigger(X.KEY_DOWN,e),this.state.renderModule.onKeyDown(e)},this.onKeyPress=e=>{this.props.editor.event.trigger(X.KEY_PRESS,e)},this.onMouseDown=e=>{this.props.editor.event.trigger(X.MOUSE_DOWN,e)},this.onMouseUp=e=>{this.props.editor.event.trigger(X.MOUSE_UP,e)},this.onCopy=e=>{this.props.editor.event.trigger(X.COPY,e)},this.onPaste=e=>{this.props.editor.event.trigger(X.PASTE,e)},this.state={renderModule:this.props.editor.plugin.apply()}}componentDidUpdate(e){e.readonly!==this.props.readonly&&this.setState({renderModule:this.props.editor.plugin.apply()}),e.editor!==this.props.editor&&(e.editor.destroy(),this.props.editor.logger.warning("Editor\u5b9e\u4f8b\u91cd\u5efa \u8bf7\u68c0\u67e5\u7f16\u8f91\u5668\u72b6\u6001"))}render(){return Object(ee.jsx)(p.c,{editor:this.props.editor,value:this.props.init||this.props.editor.init||ve,onChange:this.props.onChange,children:Object(ee.jsx)(p.a,{decorate:this.state.renderModule.decorate,renderElement:this.state.renderModule.renderBlock,renderLeaf:this.state.renderModule.renderLeaf,readOnly:this.props.readonly,placeholder:this.props.placeholder,onKeyDown:this.onKeyDown,onKeyPress:this.onKeyPress,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onCopy:this.onCopy,onPaste:this.onPaste})})}}n(219);class xe{constructor(){this.key=void 0,this.type=void 0,this.priority=void 0,this.onCommand=void 0}}class fe extends xe{constructor(){super(...arguments),this.type=ne,this.WITH_LEAF_PLUGINS=void 0}}class Oe extends xe{constructor(){super(...arguments),this.type=re}}const ye="paragraph";class ke extends fe{constructor(){super(...arguments),this.key=ye,this.priority=11,this.onCommand=(e,t,n)=>{var r=n.element;n=n.path;r&&n&&g(e,r)&&(r=y(r),ce(e,Object.keys(r),{at:n}))}}destroy(){}match(){return!0}renderLine(e){return Object(ee.jsx)("div",{className:"doc-line","data-paragraph":!0,children:e.children})}}n(220);var we=n(357);const Ne="heading";class Ee extends fe{constructor(e){super(),this.editor=e,this.key=Ne,this.onCommand=(e,t,n)=>{Object(b.e)(n)&&n.path&&(E(e,"".concat(Ne,".type"),n.extraKey)?ce(e,[Ne],{at:n.path}):he(e,{[t]:{type:n.extraKey,id:Object(we.a)().slice(0,8)}},{at:n.path}))}}destroy(){}match(e){return!!e.element[Ne]}renderLine(e){var t=e.props.element[Ne];if(!t)return e.children;var n=t.id;switch(t.type){case"h1":return Object(ee.jsx)("h1",{className:"doc-heading",id:n,children:e.children});case"h2":return Object(ee.jsx)("h2",{className:"doc-heading",id:n,children:e.children});case"h3":return Object(ee.jsx)("h3",{className:"doc-heading",id:n,children:e.children});default:return e.children}}onKeyDown(e){const t=this.editor;if(M(e,I,P)&&C(t,t.selection)){var n;if(n=m(t)){var{block:n,path:r}=n;if(!n[Ne])return;j(n)&&(e.key===I&&S(t,r)&&(ce(t,[Ne],{at:r}),e.preventDefault()),e.key===P)&&((e,t)=>(t=h.a.end(e,t),C(e,e.selection)&&h.f.equals(t,e.selection.anchor)))(t,r)&&(r=y(n,[Ne]),(e=>(e=m(e))&&2<=e.path.length)(t)?(h.i.insertNodes(t,{...r,children:[{text:" "}]},{at:t.selection.focus,select:!1}),h.i.move(t,{distance:1}),Promise.resolve().then((()=>t.deleteForward("character")))):h.i.insertNodes(t,{...r,children:[{text:""}]}),e.preventDefault())}return ie}}}const Ce="bold";class Me extends Oe{constructor(){super(...arguments),this.key=Ce,this.onCommand=(e,t,n)=>{(n=n.marks)&&n[t]?ae(e,[t]):le(e,{[t]:!0})}}destroy(){}match(e){return!!e.leaf[Ce]}render(e){return Object(ee.jsx)("strong",{children:e.children})}}n(221);const Se="quote-block",Le="quote-block-item";class Be extends fe{constructor(e){super(),this.editor=e,this.key=Se,this.onCommand=(e,t,n)=>{Object(b.e)(n)&&n.path&&(e.reflex.isMatchAboveBlockNode(Se,n.path)?ue(e,{at:n.path,wrapKey:Se,pairKey:Le}):de(e,{"quote-block":!0},{"quote-block-item":!0},{at:n.path}))}}destroy(){}match(e){return!!e.element[Se]}renderLine(e){return Object(ee.jsx)("blockquote",{className:"doc-quote-block",children:e.children})}onKeyDown(e){var t=this.editor;if(M(e,I,P)&&C(t,t.selection)&&D(t,Se,Le)){var n=m(t,{key:Se}),r=m(t,{key:Le});if(r&&n)return S(t,r.path)&&B(t,"or",{wrapNode:n,itemNode:r})&&(ue(t,{wrapKey:Se,pairKey:Le}),e.preventDefault()),ie}}}function De(e){if(Object(b.b)(e))throw new Error("assert value is empty");return e}n(222);let _e=null;class Ae{constructor(e){this.id=void 0,this.container=void 0,this.node=void 0,this.onBeforeCloseFn=void 0,this.mount=e=>{this.node&&a.a.render(e,this.node)},this.onBeforeDestroy=e=>{this.onBeforeCloseFn=e,document.addEventListener(Ae.BIND_EVENT_NAME,this.destroy)},this.destroy=()=>{this.onBeforeCloseFn(),document.removeEventListener(Ae.BIND_EVENT_NAME,this.destroy),this.node&&this.container&&(a.a.unmountComponentAtNode(this.node),this.container.removeChild(this.node),document.body.removeChild(this.container)),_e===this&&(_e=null),this.container=this.node=null};var{mutex:e=!0}=e||{};this.id=Object(we.a)(),this.container=document.createElement("div"),this.container.id=this.id,this.container.className="popup-container",this.node=document.createElement("div"),this.node.onmousedown=e=>e.stopPropagation(),this.container.appendChild(this.node),this.node.className="popup-container-node",document.body.appendChild(this.container),e&&(_e&&_e.destroy(),_e=this),this.onBeforeCloseFn=()=>null}}Ae.BIND_EVENT_NAME="mousedown",n(223);var Ie=n(391),Pe=n(179),Te=n(398),ze=n(70),Ue=n(68);const Ke=e=>{var[t]=Object(Ue.a)(),n=Object(b.b)(e.top)?0:e.top+30,r=Object(b.b)(e.left)?0:e.left-150,i=e.top||e.left?"absolute":void 0;return Object(ee.jsx)("div",{className:"hyper-link-menu",style:{left:r,top:n,position:i},children:Object(ee.jsxs)(Ie.a,{initialValues:e.config,form:t,size:"small",labelCol:{span:7,offset:0},wrapperCol:{span:17,offset:0},labelAlign:"left",onSubmit:t=>e.onConfirm&&e.onConfirm(t),children:[Object(ee.jsx)(Ie.a.Item,{label:"\u94fe\u63a5\u5730\u5740",field:"href",children:Object(ee.jsx)(Pe.a,{placeholder:"Enter href"})}),Object(ee.jsxs)(Ie.a.Item,{className:"hyper-link-menu-row",wrapperCol:{span:24,offset:0},children:[Object(ee.jsx)(Ie.a.Item,{label:"\u65b0\u9875\u9762\u6253\u5f00",field:"blank",children:Object(ee.jsx)(Te.a,{defaultChecked:e.config.blank})}),Object(ee.jsxs)(Ie.a.Item,{className:"hyper-link-menu-submit",children:[Object(ee.jsx)(ze.a,{size:"mini",htmlType:"submit",type:"primary",children:"\u786e\u5b9a"}),Object(ee.jsx)(ze.a,{size:"mini",type:"primary",status:"danger",onClick:e.onCancel,children:"\u5220\u9664"})]})]})]})})};var Ve=n(41);const He="link",Ge=e=>{const t=e.config,n=e.editor,[r,i]=Object(c.useState)(!1),o=t=>{i(!1);var r=k(n,e.element);r&&le(n,{link:t},{at:r})},s=()=>{i(!1);var t=k(n,e.element);t&&ae(n,[He],{at:t})};return Object(ee.jsx)(Ve.b,{popup:()=>Object(ee.jsx)(Ke,{config:t,onConfirm:o,onCancel:s}),position:"bottom",trigger:"click",popupVisible:r,onVisibleChange:e=>{(e&&C(n)||!e)&&i(e)},children:Object(ee.jsx)("span",{className:"hyper-link",onClick:e=>{e.preventDefault()},children:e.children})})};class Re extends Oe{constructor(e,t){super(),this.editor=e,this.readonly=t,this.key=He,this.popupModel=null,this.onCommand=(e,t,n)=>{if(n&&n.position&&n.marks&&!this.popupModel){const r=n.position,i={...n.marks[He]||{href:"",blank:!0}};return new Promise((n=>{const o=new Ae;(this.popupModel=o).onBeforeDestroy((()=>{this.popupModel=null,n()})),o.mount(Object(ee.jsx)(Ke,{config:i,left:r.left,top:r.top,onConfirm:n=>{i.href=n.href,i.blank=n.blank,le(e,{[t]:i}),o.destroy()},onCancel:()=>{ae(e,[t]),o.destroy()}}))})).catch((()=>{}))}this.popupModel&&(this.popupModel.destroy(),this.popupModel=null)}}destroy(){}match(e){return!!e.leaf[He]}render(e){var t=De(e.props.leaf[He]);return this.readonly?Object(ee.jsx)("a",{className:"hyper-link",href:t.href,target:t.blank?"_blank":void 0,children:e.children}):Object(ee.jsx)(Ge,{config:t,element:e.element,editor:this.editor,children:e.children})}}const Fe="under-line";class We extends Oe{constructor(){super(...arguments),this.key=Fe,this.onCommand=(e,t,n)=>{(n=n.marks)&&n[t]?ae(e,[t]):le(e,{[t]:!0})}}destroy(){}match(e){return!!e.leaf[Fe]}render(e){return Object(ee.jsx)("u",{children:e.children})}}const qe="strike-through";class Xe extends Oe{constructor(){super(...arguments),this.key=qe,this.onCommand=(e,t,n)=>{(n=n.marks)&&n[t]?ae(e,[t]):le(e,{[t]:!0})}}destroy(){}match(e){return!!e.leaf[qe]}render(e){return Object(ee.jsx)("del",{children:e.children})}}const Ye="italic";class Je extends Oe{constructor(){super(...arguments),this.key=Ye,this.onCommand=(e,t,n)=>{(n=n.marks)&&n[t]?ae(e,[t]):le(e,{[t]:!0})}}destroy(){}match(e){return!!e.leaf[Ye]}render(e){return Object(ee.jsx)("em",{children:e.children})}}n(320);const Ze="inline-code";class $e extends Oe{constructor(){super(...arguments),this.key=Ze,this.onCommand=(e,t,n)=>{(n=n.marks)&&n[t]?ae(e,[t]):le(e,{[t]:!0})}}destroy(){}match(e){return!!e.leaf[Ze]}render(e){return Object(ee.jsx)("code",{className:"slate-inline-code",children:e.children})}}function Qe(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e.selection;C(e,n)&&(n=m(e,{key:nt}))&&(({block:n,path:t}=n),it(e,n,t))}n(321);const et="ordered-list",tt="ordered-list-item",nt=et,rt=tt,it=(e,t,n)=>{const r=[],i={};if(v(t,nt)){let o=-1;t.children.forEach(((t,s)=>{if(g(e,t)&&(t=t[rt])){const{level:c,start:l}=t,a=(c>o&&(i[c]=0),o=c,i[c]=(i[c]||0)+1,i[c]);a!==l&&r.push((()=>{he(e,{[rt]:{level:c,start:a}},{at:[...n,s]})}))}})),h.a.withoutNormalizing(e,(()=>{r.forEach((e=>e()))}))}},ot=e=>{var t;C(e,e.selection)&&(t=m(e,{at:e.selection}))&&(t=function(e){const{at:t,key:n,above:r}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};var i,o=h.a.next(e,{match:t=>h.a.isBlock(e,t)&&(!n||v(t,n)),at:t,mode:r?"highest":"lowest"});return o?([o,i]=o,{block:o,path:i}):null}(e,{at:t.path,key:nt}))&&it(e,t.block,t.path)};class st extends fe{constructor(e){super(),this.editor=e,this.key=et,this.onCommand=(e,t,n)=>{Object(b.e)(n)&&n.path&&(e.reflex.isMatchAboveBlockNode(et,n.path)?(ue(e,{at:n.path,wrapKey:et,pairKey:tt}),ot(e)):de(e,{"ordered-list":!0},{"ordered-list-item":{start:1,level:1}},{at:n.path}))}}destroy(){}match(e){return v(e.element,et)||v(e.element,tt)}renderLine(e){var t;return v(e.element,et)?Object(ee.jsx)("ol",{className:"doc-ordered-list",children:e.children}):(t=De(e.element[tt]),Object(ee.jsx)("li",{className:"doc-ordered-item ordered-li-".concat(t.level),value:t.start,children:e.children}))}onKeyDown(e){var t=this.editor;if(M(e,I,P,z)&&C(t,t.selection)&&D(t,et,tt)){var n=m(t,{key:et}),r=m(t,{key:tt});if(r&&n){var{level:i,start:o}=De(r.block[tt]);if(e.key===z)i<3&&he(t,{"ordered-list-item":{start:o,level:i+1}},{node:r.block}),Qe(t),e.preventDefault();else{if(S(t,r.path)){if(1<i)return he(t,{"ordered-list-item":{start:o,level:i-1}},{node:r.block}),Qe(t),e.preventDefault(),ie;if(B(t,"or",{wrapNode:n,itemNode:r}))return ue(t,{wrapKey:et,pairKey:tt}),ot(t),e.preventDefault(),ie;if(M(e,I))return t.deleteBackward("block"),Qe(t),e.preventDefault(),ie}e.key===P&&(h.i.splitNodes(t,{always:!0}),Qe(t),e.preventDefault())}return ie}}}}n(322);const ct="unordered-list",lt="unordered-list-item";class at extends fe{constructor(e){super(),this.editor=e,this.key=ct,this.onCommand=(e,t,n)=>{Object(b.e)(n)&&n.path&&(e.reflex.isMatchAboveBlockNode(ct,n.path)?ue(e,{at:n.path,wrapKey:ct,pairKey:lt}):de(e,{"unordered-list":!0},{"unordered-list-item":{level:1}},{at:n.path}))}}destroy(){}match(e){return v(e.element,ct)||v(e.element,lt)}renderLine(e){var t;return v(e.element,ct)?Object(ee.jsx)("ul",{className:"doc-unordered-list",children:e.children}):(t=De(e.element[lt]),Object(ee.jsx)("li",{className:"doc-unordered-item unordered-li-".concat(t.level),children:e.children}))}onKeyDown(e){var t=this.editor;if(M(e,I,P,z)&&C(t,t.selection)&&D(t,ct,lt)){var n,r=m(t,{key:ct}),i=m(t,{key:lt});if(i&&r)return n=De(i.block[lt]).level,e.key===z?(n<3&&he(t,{"unordered-list-item":{level:n+1}},{node:i.block}),e.preventDefault()):S(t,i.path)&&(1<n?(he(t,{"unordered-list-item":{level:n-1}},{node:i.block}),e.preventDefault()):B(t,"or",{wrapNode:r,itemNode:i})&&(ue(t,{wrapKey:ct,pairKey:lt}),e.preventDefault())),ie}}}n(323);const dt=()=>{var e=Object(p.e)(),t=Object(p.d)();return Object(ee.jsx)("div",{className:"dividing-line-container",children:Object(ee.jsx)("div",{className:Object(s.a)("dividing-line",t&&e&&"selected")})})},ht="dividing-line";class ut extends fe{constructor(){super(...arguments),this.key=ht,this.onCommand=(e,t)=>{h.i.insertNodes(e,{[t]:!0,children:[{text:""}]}),h.i.insertNodes(e,{children:[{text:""}]})}}destroy(){}match(e){return v(e.element,ht)}render(){return Object(ee.jsx)(dt,{})}}n(324);const pt="align";class bt extends fe{constructor(){super(...arguments),this.key=pt,this.onCommand=(e,t,n)=>{Object(b.e)(n)&&!E(e,pt,n.extraKey)&&he(e,{[t]:n.extraKey})}}destroy(){}match(e){return!!e.element[pt]}renderLine(e){var t=e.props.element[pt];return t&&"left"!==t&&e.classList.push("align-"+t),e.children}}n(325);var mt=n(359),jt=n(358);const vt="highlight-block",gt=[{background:"var(--arcoblue-3)",border:"var(--arcoblue-6)"},{background:"var(--green-3)",border:"var(--green-6)"},{background:"var(--orange-3)",border:"var(--orange-6)"},{background:"var(--red-3)",border:"var(--red-6)"},{background:"var(--purple-3)",border:"var(--purple-6)"},{background:"var(--gray-3)",border:"var(--gray-6)"},{background:"var(--magenta-3)",border:"var(--magenta-6)"},{background:"var(--pinkpurple-3)",border:"var(--pinkpurple-6)"},{background:"var(--orangered-3)",border:"var(--orangered-6)"},{background:"var(--cyan-3)",border:"var(--cyan-6)"},{background:"var(--lime-3)",border:"var(--lime-6)"},{background:"var(--gold-3)",border:"var(--gold-6)"}],xt=e=>{const{editor:t,element:n,config:r,readonly:i}=e,o=Object(jt.a)((e=>{var r=p.b.findPath(t,n);he(t,{"highlight-block":gt[e]},{at:r,key:vt})})),s=Object(c.useMemo)((()=>Object(ee.jsx)("div",{className:"highlight-block-selector",children:gt.map(((e,t)=>Object(ee.jsx)("div",{className:"selector-item",onClick:()=>o(t),style:{borderColor:"rgba(".concat(e.border,", 0.7)"),backgroundColor:"rgba(".concat(e.background,", 0.3)")}},t)))})),[o]),l=Object(ee.jsx)("div",{onClick:e=>e.stopPropagation(),onMouseDown:e=>e.preventDefault(),children:Object(ee.jsx)(Ve.b,{trigger:"click",popup:()=>s,popupAlign:{bottom:10},children:Object(ee.jsx)(ze.a,{type:"text",icon:Object(ee.jsx)(mt.a,{}),size:"small",children:"\u4e3b\u9898"})})});return e=Object(ee.jsx)("div",{className:"doc-highlight-block",style:{borderColor:"rgba(".concat(r.border,", 0.7)"),backgroundColor:"rgba(".concat(r.background,", 0.3)")},children:e.children}),i?e:Object(ee.jsx)(Ve.b,{position:"top",popup:()=>l,popupAlign:{top:3},className:"hl-block-toolbar",children:e})};class ft extends fe{constructor(e,t){super(),this.editor=e,this.readonly=t,this.key=vt,this.onCommand=(e,t,n)=>{(n=(n=n.path)&&w(e,n))&&(h.i.delete(e,{at:n,unit:"block"}),h.i.insertNodes(e,{"highlight-block":{border:gt[0].border,background:gt[0].background},children:[{children:[{text:""}]}]},{at:n,select:!0}))}}destroy(){}match(e){return!!e.element[vt]}renderLine(e){var t=De(e.props.element[vt]);return Object(ee.jsx)(xt,{editor:this.editor,element:e.element,config:t,readonly:this.readonly,children:e.children})}}n(326);var Ot=n(392);const yt=["var(--color-white)","var(--color-black)","rgb(var(--red-6))","rgb(var(--blue-6))","rgb(var(--green-6))","rgb(var(--orange-6))","rgb(var(--purple-6))","rgb(var(--magenta-6))","rgb(var(--pinkpurple-6))"],kt=e=>{var t=e.top+50,n=e.left-180;let r=e.config;const i=Object(jt.a)(((t,n)=>{r={...r,[t]:n},e.onChange(r)}));var o=Object(jt.a)((()=>{e.onChange({}),r={}})),s=Object(c.useMemo)((()=>(e,t)=>Object(ee.jsx)("div",{className:"font-base-picker",children:e.map(((e,n)=>Object(ee.jsx)("div",{className:"picker-item",onClick:()=>i(t,e),style:{backgroundColor:e}},n)))})),[i]);return Object(ee.jsxs)("div",{className:"font-base-menu",style:{left:n,top:t},children:[Object(ee.jsx)("div",{className:"menu-line",children:Object(ee.jsxs)("div",{children:[Object(ee.jsx)("span",{className:"label",style:{marginRight:8},children:"\u5b57\u53f7"}),Object(ee.jsx)(Ot.a,{size:"mini",defaultValue:e.config.fontSize||14,mode:"button",min:10,onChange:e=>i("fontSize",e)})]})}),Object(ee.jsxs)("div",{className:"menu-line",children:[Object(ee.jsx)("span",{className:"label",children:"\u989c\u8272"}),s(yt,"color")]}),Object(ee.jsxs)("div",{className:"menu-line",children:[Object(ee.jsx)("span",{className:"label",children:"\u80cc\u666f"}),s(yt,"background")]}),Object(ee.jsx)("div",{className:"menu-line reset-default",children:Object(ee.jsx)(ze.a,{type:"outline",size:"mini",onClick:o,children:"\u6062\u590d\u9ed8\u8ba4"})})]})},wt="font-base";class Nt extends Oe{constructor(){super(...arguments),this.key=wt,this.popupModel=null,this.onCommand=(e,t,n)=>{if(n&&n.position&&n.marks&&!this.popupModel){const r=n.marks[wt]||{},i=n.position;return new Promise((n=>{var o=new Ae;(this.popupModel=o).onBeforeDestroy((()=>{this.popupModel=null,n()})),o.mount(Object(ee.jsx)(kt,{config:r,left:i.left,top:i.top,onChange:n=>{le(e,{[t]:n})}}))})).catch((()=>{}))}this.popupModel&&(this.popupModel.destroy(),this.popupModel=null)}}destroy(){}match(e){return!!e.leaf[wt]}render(e){var t=De(e.props.leaf[wt]);return e.style={...e.style,...t},e.children}}n(327);const Et=e=>{var t=e.top+30,n=e.left-100;return Object(ee.jsx)("div",{className:"line-height-menu",style:{left:n,top:t},children:Object(ee.jsx)("div",{className:"menu-line",children:Object(ee.jsxs)("div",{children:[Object(ee.jsx)("span",{className:"label",children:"\u884c\u9ad8"}),Object(ee.jsx)(Ot.a,{size:"mini",mode:"button",defaultValue:e.config||1.8,step:.1,precision:1,min:.5,onChange:e.onChange})]})})})},Ct="line-height";class Mt extends fe{constructor(){super(...arguments),this.key=Ct,this.popupModel=null,this.onCommand=(e,t,n)=>{if(n&&n.position&&!this.popupModel){let i=1.8;var r=m(e,{key:Ct});r&&(i=De(r.block["line-height"]));const o=n.position;return new Promise((n=>{var r=new Ae;(this.popupModel=r).onBeforeDestroy((()=>{this.popupModel=null,n()})),r.mount(Object(ee.jsx)(Et,{config:i,left:o.left,top:o.top,onChange:n=>{he(e,{[t]:n})}}))})).catch((()=>{}))}this.popupModel&&(this.popupModel.destroy(),this.popupModel=null)}}destroy(){}match(e){return!!e.element[Ct]}renderLine(e){var t=De(e.props.element[Ct]);return Object(ee.jsx)("div",{style:{lineHeight:t},children:e.children})}}n(328);var St=n(399),Lt=(t=n(171),n.n(t));const Bt=e=>{const t=Object(p.e)();return Object(ee.jsx)("div",{className:Object(s.a)(e.className,!e.readonly&&t&&Lt.a.selected),children:l.a.Children.map(e.children,(e=>{var n;return l.a.isValidElement(e)?(n=e.props,l.a.cloneElement(e,{...n,selected:t})):e}))})},Dt=1,_t=2,At=3,It="image";t=n(388);var Pt=n(71),Tt=n.n(Pt);const zt=t.a.Preview,Ut=e=>{const[t,n]=Object(c.useState)(""),r=Object(c.useRef)(null),i=e.element.uuid,o=!e.disable&&(e.readonly||e.selected);var l=t=>{var n=t.target,o=r.current;const s=e.element[It];if(t.stopPropagation(),t.preventDefault(),n instanceof HTMLDivElement&&n.dataset.type&&o&&i&&s){const r=t.clientX,i=t.clientY,c=o.offsetWidth,l=o.offsetHeight,a=c/l,d=n.dataset.type,h=k(e.editor,e.element);if(h){const t=t=>{var n=t.clientX,o=(t=t.clientY,n-r),u=t-i;let p=c,b=l;switch(d){case"lt":p-=o,b-=u;break;case"rt":p+=o,b-=u;break;case"lb":p-=o,b+=u;break;case"rb":p+=o,b+=u}p/b>a?b=p/a:p=b*a,he(e.editor,{[It]:{...s,width:Math.max(p,50),height:Math.max(b,50)}},{at:h,key:It})},n=()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)}}};return Object(ee.jsxs)(ee.Fragment,{children:[t&&Object(ee.jsx)(zt,{src:t,visible:!!t,onVisibleChange:e=>!e&&n("")}),!e.readonly&&Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)("div",{className:Object(s.a)(o&&Tt.a.resider),"data-type":"lt",onMouseDown:l}),Object(ee.jsx)("div",{className:Object(s.a)(o&&Tt.a.resider),"data-type":"rt",onMouseDown:l}),Object(ee.jsx)("div",{className:Object(s.a)(o&&Tt.a.resider),"data-type":"lb",onMouseDown:l}),Object(ee.jsx)("div",{className:Object(s.a)(o&&Tt.a.resider),"data-type":"rb",onMouseDown:l})]}),Object(ee.jsx)("div",{ref:r,onClick:async()=>{var t;o&&(t=e.src,n(t||""))},className:Object(s.a)(o&&Tt.a.preview),children:e.children})]})},Kt=e=>{var t;return e.element.image?(t=e.element.image,Object(ee.jsx)(St.a,{loading:t.status===Dt,children:Object(ee.jsx)(Bt,{readonly:e.readonly,className:"doc-image",children:Object(ee.jsx)(Ut,{editor:e.editor,element:e.element,readonly:e.readonly,src:t.src,children:Object(ee.jsx)("img",{src:t.src,width:t.width,height:t.height})})})})):null},Vt=e=>new Promise((t=>{setTimeout((()=>{var n=window.URL.createObjectURL(e);t({src:n,width:256,height:256})}),1e3)}));class Ht extends fe{constructor(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Vt;super(),this.editor=e,this.readonly=t,this.uploadHandler=n,this.key=It,this.IMAGE_INPUT_DOM_ID="doc-image-upload-input",this.uploadImage=e=>{const t=this.editor;Array.from(e).forEach((e=>{var n=window.URL.createObjectURL(e),r=Object(we.a)(),i=this.editor.selection;if(i&&h.g.isCollapsed(i)&&(i=i.anchor.path,i=w(t,i))){const o=h.a.pathRef(t,i);h.i.setNodes(this.editor,{uuid:r,[It]:{src:n,status:Dt},children:[{text:""}]},{at:i}),this.uploadHandler(e).then((e=>{const n=o.unref();n&&u.a.withoutSaving(t,(()=>{h.i.setNodes(t,{[It]:{src:e.src,status:_t,width:e.width,height:e.height}},{at:n})}))})).catch((()=>{const e=o.unref();e&&u.a.withoutSaving(t,(()=>{h.i.setNodes(t,{[It]:{src:void 0,status:At}},{at:e})}))}))}}))},this.onCommand=(e,t,n)=>{let r=document.getElementById(this.IMAGE_INPUT_DOM_ID);r||((r=document.createElement("input")).setAttribute("type","file"),r.setAttribute("class",this.IMAGE_INPUT_DOM_ID),r.setAttribute("accept","image/png, image/jpeg, image/svg+xml"),document.body.append(r)),r.onchange=t=>{var r,i;t=t.target.files;r=e,i=null==n?void 0:n.path,p.b.focus(r),i?(h.i.select(r,i),h.i.collapse(r,{edge:"end"})):h.i.collapse(r,{edge:"focus"}),t&&this.uploadImage(t),h.i.insertNodes(e,{children:[{text:""}]})},r.click()}}destroy(){}match(e){return v(e.element,It)}render(e){return Object(ee.jsx)(Kt,{editor:this.editor,element:e.element,readonly:this.readonly})}}n(329);var Gt=n(390);const Rt="code-block",Ft="code-block-type";Pt=n(69);var Wt=n.n(Pt);n(163),n(164),n(330);const qt="Plain Text",Xt=[qt,"JavaScript","Java"],Yt=e=>(null==(e=e["code-block-config"])?void 0:e.language)||qt;class Jt extends Oe{constructor(){super(...arguments),this.key=Ft}destroy(){}match(e){return!!e.leaf[Ft]}render(e){return e.classList.push("token",e.leaf[Ft]||""),e.children}}class Zt extends fe{constructor(e,t){super(),this.editor=e,this.readonly=t,this.key=Rt,this.onCommand=(e,t,n)=>{(n=(n=n.path)&&w(e,n))&&(h.i.delete(e,{at:n,unit:"block"}),h.i.insertNodes(e,{"code-block":!0,"code-block-config":{language:qt},children:[{children:[{text:""}]}]},{at:n,select:!0}))},this.onLanguageChange=(e,t)=>{e=p.b.findPath(this.editor,e),he(this.editor,{"code-block-config":{language:t}},{at:e,key:Rt})},this.WITH_LEAF_PLUGINS=[new Jt]}destroy(){}match(e){return!!e.element[Rt]}renderLine(e){var t=Yt(e.element);return Object(ee.jsxs)("div",{className:"code-block",children:[Object(ee.jsx)("div",{contentEditable:!1,children:Object(ee.jsx)(Gt.a,{size:"mini",style:{width:160},showSearch:!0,defaultValue:t,disabled:this.readonly,onChange:t=>this.onLanguageChange(e.element,t),children:Xt.map((e=>Object(ee.jsx)(Gt.a.Option,{value:e,children:e},e)))})}),e.children]})}onDecorate(e){var[e,t]=e;const n=[];var r=O(this.editor,t);if(g(this.editor,e)&&r&&r.node[Rt]&&(r=e.children[0],x(r)&&(e=m(this.editor,{at:t,key:Rt})))){const r=[...t,0];((e,t)=>{if(t===qt)return[];var n=[];let r=0;for(const o of Wt.a.tokenize(e,Wt.a.languages[t.toLowerCase()])){var i=r+(i="string"==typeof(i=o)?i.length:"string"==typeof i.content?i.content.length:0);"string"!=typeof o&&n.push({type:o.type,start:r,end:i}),r=i}return n})(h.a.string(this.editor,t),Yt(e.block)).forEach((e=>{n.push({anchor:{path:r,offset:e.start},focus:{path:r,offset:e.end},"code-block-type":e.type})}))}return n}}class $t extends fe{constructor(e){super(),this.editor=e,this.key="indent",this.priority=-1}destroy(){}match(){return!1}onKeyDown(e){M(e,z)&&C(this.editor,this.editor.selection)&&(h.i.insertText(this.editor,"\t"),e.preventDefault(),e.stopPropagation())}}n(331);var Qt=n(180),en=n(360);const tn="flow-chart";let nn=null;const rn=()=>nn?Promise.resolve(nn):Promise.all([Promise.all([n.e(0),n.e(2)]).then(n.bind(null,487)),n.e(7).then(n.t.bind(null,488,7))]).then((e=>nn=e[0]));let on=null;const sn=()=>on?Promise.resolve(on):Promise.all([Promise.all([n.e(0),n.e(3)]).then(n.bind(null,489))]).then((e=>on=e[0]));Pt=n(173);var cn=n.n(Pt);const ln=t.a.Preview,an=e=>{const[t,n]=Object(c.useState)(""),r=!e.disable&&(e.readonly||e.selected);return Object(ee.jsxs)(ee.Fragment,{children:[t&&Object(ee.jsx)(ln,{src:t,visible:!!t,onVisibleChange:e=>!e&&n("")}),Object(ee.jsx)("div",{onClick:async()=>{var t;r&&(t=await e.src(),n(t||""))},className:Object(s.a)(r&&cn.a.preview),children:e.children})]})},dn=e=>{const t=Object(c.useRef)(null),[n,i]=Object(c.useState)(!0),[o,l]=Object(c.useState)(!1);Object(c.useEffect)((()=>{if(e.config.content){const r=e.config.content;n=r,sn().then((e=>{var{DiagramViewer:e,stringToXml:t}=e;return new e(Object(b.g)(n)?t(n):n).renderSVG(null,1,1)})).then((e=>{const n=t.current;n&&e&&(n.childNodes.forEach((e=>n.removeChild(e))),n.appendChild(e),i(!1))}))}else i(!1);var n}),[e.config.content,e.readonly]);const d=Object(ee.jsxs)("div",{onClick:e=>e.stopPropagation(),onMouseDown:e=>e.preventDefault(),children:[Object(ee.jsx)(ze.a,{type:"text",icon:Object(ee.jsx)(r.a,{}),size:"small",loading:o,onClick:()=>{var t,n;l(!0),t=e.config.content,n=t=>{var n;(t=(e=>{if(!e)return null;try{return(new XMLSerializer).serializeToString(e)}catch(e){return console.log("XmlToString Error: ",e),null}})(t))&&(n=p.b.findPath(e.editor,e.element),he(e.editor,{"flow-chart":{type:"xml",content:t}},{at:n,key:tn}))},rn().then((e=>{let{stringToXml:t,DiagramEditor:n,getLanguage:r}=e;const i=new n(document.body,(e=>{a.a.render(Object(ee.jsx)("div",{onClick:i.exit,className:"diagram-exit-btn",children:"\u9000\u51fa"}),e)}));return r("zh").then((e=>({res:e,stringToXml:t,diagramEditor:i})))})).then((e=>{let{res:r,stringToXml:i,diagramEditor:o}=e;return{start:()=>{o.start(r,t?i(t):null,n)}}})).then((e=>{e.start(),l(!1)}))},children:"\u7f16\u8f91"}),Object(ee.jsx)(ze.a,{type:"text",icon:Object(ee.jsx)(en.a,{}),size:"small",onClick:()=>{return t=e.config.content,sn().then((e=>(e=e.downloadSVG)(t))).then((e=>e&&e()));var t},children:"\u4e0b\u8f7d"})]});var h=Object(ee.jsx)("div",{className:"flow-chart-container",children:e.config.content?Object(ee.jsx)("div",{ref:t}):Object(ee.jsx)(Qt.a,{description:"\u7a7a\u767d\u56fe\u5f62"})});return Object(ee.jsx)(Bt,{readonly:e.readonly,children:Object(ee.jsx)(an,{readonly:e.readonly,src:()=>{return t=e.config.content,sn().then((e=>(e=e.convertSVGToBase64)(t)));var t},disable:!e.config.content,children:Object(ee.jsx)("div",{className:Object(s.a)("doc-flow-chart"),children:Object(ee.jsxs)(St.a,{loading:n,children:[Object(ee.jsxs)("div",{className:"flow-chart-title",children:[Object(ee.jsx)(mt.a,{}),Object(ee.jsx)("span",{children:"\u6d41\u7a0b\u56fe"})]}),e.readonly?h:Object(ee.jsx)(Ve.b,{popup:()=>d,position:"top",popupAlign:{top:5},className:"flow-chart-toolbar",children:h})]})})})})};class hn extends fe{constructor(e,t){super(),this.editor=e,this.readonly=t,this.key=tn,this.onCommand=e=>{var t=Object(we.a)();he(e,{uuid:t,"flow-chart":{type:"xml",content:""},children:[{text:""}]})}}destroy(){}match(e){return v(e.element,tn)}render(e){var t=e.element[tn];return t?Object(ee.jsx)(dn,{element:e.element,readonly:this.readonly,config:t,editor:this.editor}):e.children}}n(165);var un=n(400),pn=n(393),bn=n(361),mn=n(387),jn=n(401);const vn="react-live",gn="react-live-type",xn=e=>{const t=Object(c.useRef)(null),[n,r]=Object(c.useState)(!0),i=((e,t)=>{const n=t=>(t.children||[]).map((t=>x(t)?h.c.string(t):L(e,t)?n(t)+"\n":g(e,t)?n(t):"")).join("");return n(t)})(e.editor,e.element);return Object(pn.a)((()=>{var e=t.current;if(e)try{var n=Object(bn.a)({React:l.a,Button:ze.a,console:console,Space:un.a}),o=Object(mn.a)("<div>"+i+"</div>");const t=Object(jn.a)(o,n);a.a.render(Object(ee.jsx)((()=>(Object(c.useEffect)((()=>{r(!1)}),[]),t)),{}),e)}catch(e){console.log("Render Component Error",e)}}),[i],{wait:300}),Object(ee.jsxs)("div",{className:"react-live-container",children:[Object(ee.jsx)(te,{selectable:!0,children:Object(ee.jsx)(St.a,{loading:n,className:"react-live-preview",children:Object(ee.jsx)("div",{ref:t})})}),Object(ee.jsx)("div",{className:"react-live-code",children:e.children})]})};class fn extends Oe{constructor(){super(...arguments),this.key=gn}destroy(){}match(e){return!!e.leaf[gn]}render(e){return e.classList.push("token",e.leaf[gn]||""),e.children}}class On extends fe{constructor(e){super(),this.editor=e,this.key=vn,this.onCommand=(e,t,n)=>{(n=(n=n.path)&&w(e,n))&&(h.i.delete(e,{at:n,unit:"block"}),h.i.insertNodes(e,{"react-live":!0,children:[{children:[{text:"<Button type='primary'>Primary</Button>"}]}]},{at:n,select:!0}))},this.WITH_LEAF_PLUGINS=[new fn]}destroy(){}match(e){return!!e.element[vn]}renderLine(e){return Object(ee.jsx)(xn,{element:e.element,editor:this.editor,children:e.children})}onDecorate(e){var[e,t]=e,n=O(this.editor,t);if(n&&g(this.editor,e)&&n.node[vn]){if(n=((e,t,n)=>(t=t.children[0],x(t)&&m(e,{at:n,key:vn})?h.a.string(e,n):null))(this.editor,e,t),!n)return[];const r=[...t,0];return(e=>{var t=[];let n=0;for(const i of Wt.a.tokenize(e,Wt.a.languages["Javascript".toLowerCase()])){var r=n+(r="string"==typeof(r=i)?r.length:"string"==typeof r.content?r.content.length:0);"string"!=typeof i&&t.push({type:i.type,start:n,end:r}),n=r}return t})(n).map((e=>({anchor:{path:r,offset:e.start},focus:{path:r,offset:e.end},"react-live-type":e.type})))}return[]}}n(167);const yn="table",kn="table-row",wn="table-cell",Nn="table-col-widths",En="cell-col-span",Cn="cell-row-span",Mn=100,Sn=e=>{const t=e.state;var{signalMenu:n,bannerMenu:r}=Object(c.useMemo)((()=>{var n=[],r=[];for(const s of e.plugins){var i=s.renderSignal(t),o=s.renderBanner(t);i&&n.push(i),o&&r.push(o)}return{signalMenu:n,bannerMenu:r}}),[t,e.plugins]);return Object(ee.jsxs)("div",{className:"doc-trigger-menu",children:[0<n.length&&Object(ee.jsx)("div",{className:"doc-trigger-signal-menu",children:n.map(((e,t)=>Object(ee.jsx)(l.a.Fragment,{children:e},t)))}),0<r.length&&Object(ee.jsx)("div",{className:"doc-trigger-banner-menu",children:r.map(((e,t)=>Object(ee.jsx)(l.a.Fragment,{children:e},t)))})]})},Ln=e=>{const[t,n]=Object(c.useState)(!1),[r,i]=Object(c.useState)(!1),o=()=>{n(!1),i(!1)},a=Object(c.useMemo)((()=>{let t=[];try{t=p.b.findPath(e.editor,e.element)}catch(t){e.editor.logger.warning("ToolBar FindPath Error",t)}return t}),[e.editor,e.element]),d=Object(c.useMemo)((()=>{let t=!1,n=!1,r=!1,i=!1;var s=e.editor,c=a,l=e=>{e[Rt]&&(t=!0),e[vn]&&(n=!0),e[vt]&&(r=!0),e[wn]&&(i=!0)};if(!(c.length<=1)){let e=c.length-1,t=h.a.parent(s,c);for(;t[0]&&e--;)l(t[0]),t=h.a.parent(s,t[1])}return{path:a,editor:e.editor,element:e.element,status:{isBlock:e.editor.reflex.isBlockNode(e.element),isTextBlock:L(e.editor,e.element),isEmptyLine:(c=e.element,!(1!==Object.keys(c).length||!Object(b.a)(c.children)||1!==c.children.length||""!==c.children[0].text)),isInCodeBlock:t,isInReactLive:n,isInHighLightBlock:r,isNextLine:!1,isInTableBlock:i},close:o}}),[a,e.editor,e.element]),u=Object(c.useMemo)((()=>{let t=null;for(const r of e.plugins){var n=r.renderIcon(d);if(n){t=n;break}}return t}),[e.plugins,d]),m=()=>{p.b.focus(e.editor),h.i.select(e.editor,a),o()};return u?Object(ee.jsx)(Ve.b,{popupVisible:t,onVisibleChange:n,popup:()=>Object(ee.jsx)(Ve.b,{className:"doc-toolbar-trigger",popup:()=>Object(ee.jsx)(Sn,{state:d,plugins:e.plugins}),position:"left",popupVisible:r,onVisibleChange:i,children:Object(ee.jsx)("div",{className:"doc-icon-background",children:Object(ee.jsx)("span",{className:"doc-icon-container",onMouseDown:e=>e.preventDefault(),onClick:m,children:u&&u.element})})}),position:"left",mouseLeaveDelay:300,mouseEnterDelay:300,...u.config,children:Object(ee.jsx)("div",{"data-doc-toolbar":!0,className:Object(s.a)(r&&"doc-line-hover"),children:e.children})}):Object(ee.jsx)(l.a.Fragment,{children:e.children})};var Bn=n(370);const Dn=(e,t)=>{const{editor:n,element:r}=e,[i,o]=t.split("."),s=p.b.findPath(n,r);p.b.focus(n),h.a.withoutNormalizing(n,(()=>{var c,l;e.status.isNextLine?s.length&&(c=s.slice(0,-1),l=s[s.length-1]+1,c.push(l),h.i.insertNodes(n,{children:[{text:""}]},{at:c,select:!0}),Promise.resolve().then((()=>{var s=e.editor.selection;s&&n.command.exec(i,{extraKey:o,path:s.focus.path,element:r,origin:t})}))):n.command.exec(i,{extraKey:o,path:s,element:r,origin:t})}))};var _n=n(60);const An=(e,t)=>Object(ee.jsx)("div",{className:"toolbar-signal-menu",onClick:t,children:e}),In=(e,t,n)=>Object(ee.jsxs)("div",{className:"toolbar-banner-menu",onClick:n,children:[Object(ee.jsx)("span",{className:"banner-menu-icon",children:e}),Object(ee.jsx)("span",{className:"banner-menu-name",children:t})]});Pt={renderIcon:e=>e.element[Rt]?{element:Object(ee.jsx)(Bn.a,{}),config:{position:"lt"}}:null,renderSignal:()=>null,renderBanner:e=>e.status.isBlock||!e.status.isEmptyLine?null:In(Object(ee.jsx)(Bn.a,{}),"\u4ee3\u7801\u5757",(()=>{Dn(e,Rt),e.close()}))};var Pn=n(170);t={renderIcon:e=>e.element[Se]||e.element[et]||e.element[ct]||e.status.isInCodeBlock||e.status.isInHighLightBlock||e.status.isInReactLive?null:{element:Object(ee.jsx)(Pn.a,{})},renderSignal:()=>null,renderBanner:()=>null};const Tn=Object(ee.jsx)("svg",{className:"arco-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",children:Object(ee.jsx)("path",{d:"M64.128 810.666667h128a21.333333 21.333333 0 0 1 21.333333 21.333333v42.666667a21.333333 21.333333 0 0 1-21.333333 21.333333h-128a21.333333 21.333333 0 0 1-21.333333-21.333333v-42.666667a21.333333 21.333333 0 0 1 21.333333-21.333333z m384 0h128a21.333333 21.333333 0 0 1 21.333333 21.333333v42.666667a21.333333 21.333333 0 0 1-21.333333 21.333333h-128a21.333333 21.333333 0 0 1-21.333333-21.333333v-42.666667a21.333333 21.333333 0 0 1 21.333333-21.333333z m384 0h128a21.333333 21.333333 0 0 1 21.333333 21.333333v42.666667a21.333333 21.333333 0 0 1-21.333333 21.333333h-128a21.333333 21.333333 0 0 1-21.333333-21.333333v-42.666667a21.333333 21.333333 0 0 1 21.333333-21.333333z m-768-682.666667h128a21.333333 21.333333 0 0 1 21.333333 21.333333v42.666667a21.333333 21.333333 0 0 1-21.333333 21.333333h-128a21.333333 21.333333 0 0 1-21.333333-21.333333V149.333333a21.333333 21.333333 0 0 1 21.333333-21.333333z m384 0h128a21.333333 21.333333 0 0 1 21.333333 21.333333v42.666667a21.333333 21.333333 0 0 1-21.333333 21.333333h-128a21.333333 21.333333 0 0 1-21.333333-21.333333V149.333333a21.333333 21.333333 0 0 1 21.333333-21.333333z m384 0h128a21.333333 21.333333 0 0 1 21.333333 21.333333v42.666667a21.333333 21.333333 0 0 1-21.333333 21.333333h-128a21.333333 21.333333 0 0 1-21.333333-21.333333V149.333333a21.333333 21.333333 0 0 1 21.333333-21.333333zM64 469.333333h896a21.333333 21.333333 0 0 1 21.333333 21.333334v42.666666a21.333333 21.333333 0 0 1-21.333333 21.333334H64a21.333333 21.333333 0 0 1-21.333333-21.333334v-42.666666a21.333333 21.333333 0 0 1 21.333333-21.333334z"})});var zn={renderIcon:e=>e.element[ht]?{element:Tn}:null,renderSignal:e=>e.status.isBlock?null:An(Tn,(()=>{Dn(e,ht),e.close()})),renderBanner:()=>null},Un={renderIcon:e=>e.element[tn]?{element:Object(ee.jsx)(mt.a,{}),config:{position:"lt"}}:null,renderSignal:()=>null,renderBanner:e=>e.status.isBlock||!e.status.isEmptyLine?null:In(Object(ee.jsx)(mt.a,{}),"\u6d41\u7a0b\u56fe",(()=>{Dn(e,tn),e.close()}))},Kn=n(362),Vn=n(363),Hn=n(364),Gn={renderIcon:e=>{var t=e.element[Ne];if(t&&e.status.isTextBlock){if("h1"===t.type)return{element:Object(ee.jsx)(Kn.a,{})};if("h2"===t.type)return{element:Object(ee.jsx)(Vn.a,{})};if("h3"===t.type)return{element:Object(ee.jsx)(Hn.a,{})}}return null},renderSignal:e=>{var t;return e.status.isBlock?null:(t=t=>()=>{Dn(e,Ne+"."+t),e.close()},Object(ee.jsxs)(l.a.Fragment,{children:[An(Object(ee.jsx)(Kn.a,{}),t("h1")),An(Object(ee.jsx)(Vn.a,{}),t("h2")),An(Object(ee.jsx)(Hn.a,{}),t("h3"))]}))},renderBanner:()=>null};const Rn=Object(ee.jsx)("svg",{className:"arco-icon",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 48 48",children:Object(ee.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42 6a2 2 0 012 2v24a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2h36zm1 33a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1v-2a1 1 0 011-1h38zM8 10h32v20H8V10z"})});var Fn={renderIcon:e=>e.element[vt]?{element:Rn,config:{position:"lt"}}:null,renderSignal:()=>null,renderBanner:e=>e.status.isBlock||!e.status.isEmptyLine?null:In(Rn,"\u9ad8\u4eae\u5757",(()=>{Dn(e,vt),e.close()}))},Wn=n(368),qn={renderIcon:e=>e.element[It]?{element:Object(ee.jsx)(Wn.a,{}),config:{position:"lt"}}:null,renderSignal:()=>null,renderBanner:e=>e.status.isBlock||!e.status.isEmptyLine?null:In(Object(ee.jsx)(Wn.a,{}),"\u56fe\u7247",(()=>{Dn(e,It),e.close()}))},Xn=n(366),Yn=n(367),Jn={renderIcon:e=>e.element[tt]&&e.status.isTextBlock?{element:Object(ee.jsx)(Xn.a,{})}:e.element[lt]&&e.status.isTextBlock?{element:Object(ee.jsx)(Yn.a,{})}:null,renderSignal:e=>{var t;return e.status.isBlock?null:(t=t=>()=>{Dn(e,t),e.close()},Object(ee.jsxs)(l.a.Fragment,{children:[An(Object(ee.jsx)(Xn.a,{}),t(et)),An(Object(ee.jsx)(Yn.a,{}),t(ct))]}))},renderBanner:()=>null},Zn=n(372),$n=n(373),Qn=n(374);const er=h.c;var tr=n(365),nr={renderIcon:e=>e.element[Le]&&e.status.isTextBlock?{element:Object(ee.jsx)(tr.a,{})}:null,renderSignal:e=>e.status.isBlock?null:An(Object(ee.jsx)(tr.a,{}),(()=>{Dn(e,Se),e.close()})),renderBanner:()=>null},rr=n(371),ir={renderIcon:e=>e.element[vn]?{element:Object(ee.jsx)(rr.a,{}),config:{position:"lt"}}:null,renderSignal:()=>null,renderBanner:e=>e.status.isBlock||!e.status.isEmptyLine||e.status.isInTableBlock?null:In(Object(ee.jsx)(rr.a,{}),"ReactLive",(()=>{Dn(e,vn),e.close()}))},or=n(369);const sr=Array(6).fill(null),cr=Array(6).fill(null),lr=e=>{const[t,n]=l.a.useState(-1),[r,i]=l.a.useState(-1);return Object(ee.jsx)("div",{className:"table-size-picker",onMouseLeave:()=>{n(-1),i(-1)},children:sr.map(((o,c)=>Object(ee.jsx)("div",{className:"table-size-picker-row",children:cr.map(((o,l)=>Object(ee.jsx)("div",{className:Object(s.a)("table-size-picker-item",c<=t&&l<=r&&"active"),onMouseEnter:()=>{n(c),i(l)},onClick:()=>{e.onClick(t+1,r+1)}},l)))},c)))})};var ar={renderIcon:e=>e.element[yn]?{element:Object(ee.jsx)(or.a,{}),config:{position:"lt",style:{marginTop:-17,marginLeft:5}}}:null,renderSignal:()=>null,renderBanner:e=>{if(e.status.isBlock||!e.status.isEmptyLine||e.status.isInTableBlock)return null;var t,n,r;const i=(t,n)=>{0<t&&0<n&&Dn(e,"".concat(yn,".").concat(t,".").concat(n)),e.close()};return t=Object(ee.jsx)(or.a,{}),"\u8868\u683c[WIP]",n=()=>{Dn(e,yn),e.close()},r={popup:()=>Object(ee.jsx)(lr,{onClick:i})},Object(ee.jsx)(Ve.b,{...r,position:"right",popupAlign:{right:10},children:Object(ee.jsxs)("div",{className:"toolbar-banner-menu flex-space-between",onClick:n,children:[Object(ee.jsxs)("div",{className:"toolbar-banner-menu-left",children:[Object(ee.jsx)("span",{className:"banner-menu-icon",children:t}),Object(ee.jsx)("span",{className:"banner-menu-name",children:"\u8868\u683c[WIP]"})]}),Object(ee.jsx)("div",{className:"toolbar-banner-menu-right",children:Object(ee.jsx)(_n.a,{})})]})})}};n(338);const dr=Object(ee.jsx)("svg",{className:"arco-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",children:Object(ee.jsx)("path",{d:"M474.49999971 849.5V212.00000029H174.5c-22.5 0-37.50000029-15.00000029-37.50000029-37.50000029s15.00000029-37.50000029 37.50000029-37.50000029h675c22.5 0 37.50000029 15.00000029 37.50000029 37.50000029s-15.00000029 37.50000029-37.50000029 37.50000029h-299.99999971v637.49999971c0 22.5-15.00000029 37.50000029-37.50000029 37.50000029s-37.50000029-15.00000029-37.50000029-37.50000029z"})});var hr={renderIcon:()=>null,renderSignal:e=>e.status.isBlock?null:An(dr,(()=>{Dn(e,ye),e.close()})),renderBanner:()=>null};const ur=[hr,Gn,nr,Jn,zn,qn,ar,Fn,Pt,Un,ir,t],pr=[hr,Gn,nr,Jn,zn,qn,ar,Fn,Pt,Un,ir,{renderIcon:()=>null,renderSignal:()=>null,renderBanner:e=>{if(e.status.isEmptyLine)return null;const t=()=>{const t=e.editor;var n=[e.element];const r=e=>e.map((e=>x(e)?er.string(e):L(t,e)?r(e.children)+"\n":g(t,e)?r(e.children):"")).join("");n=r(n).replace(/\n$/,""),navigator.clipboard.writeText(n),e.close()},n=()=>{h.i.delete(e.editor,{at:e.path,unit:"block"}),e.close()},r={...e,status:{...e.status,isBlock:!1,isEmptyLine:!0,isNextLine:!0}};return Object(ee.jsxs)(l.a.Fragment,{children:[In(Object(ee.jsx)(Zn.a,{}),"\u590d\u5236",t),In(Object(ee.jsx)($n.a,{}),"\u526a\u8d34",(()=>{t(),n(),e.close()})),In(Object(ee.jsx)(Qn.a,{}),"\u5220\u9664",n),!e.status.isNextLine&&Object(ee.jsxs)(l.a.Fragment,{children:[Object(ee.jsx)("div",{className:"doc-trigger-menu-cut"}),Object(ee.jsx)(Ve.b,{popup:()=>Object(ee.jsx)(Sn,{state:r,plugins:ur}),position:"right",popupAlign:{left:10,right:10},children:Object(ee.jsxs)("div",{className:"toolbar-banner-menu more-options",children:[Object(ee.jsxs)("div",{className:"toolbar-banner-menu-left",children:[Object(ee.jsx)("span",{className:"banner-menu-icon",children:Object(ee.jsx)(Pn.a,{})}),Object(ee.jsx)("span",{className:"banner-menu-name",children:"\u5728\u4e0b\u65b9\u6dfb\u52a0"})]}),Object(ee.jsx)("div",{className:"toolbar-banner-menu-right",children:Object(ee.jsx)(_n.a,{})})]})})]})]})}},t];class br extends fe{constructor(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:pr;super(),this.editor=e,this.readonly=t,this.plugins=n,this.key="doc-toolbar",this.priority=13}destroy(){}match(){return!0}renderLine(e){return this.readonly?e.children:Object(ee.jsx)(Ln,{editor:this.editor,element:e.element,plugins:this.plugins,children:e.children})}}const mr={"1.":et,"-":ct,"*":ct,">":Se,"#":"".concat(Ne,".h1"),"##":"".concat(Ne,".h2"),"###":"".concat(Ne,".h3"),"---":ht};class jr extends fe{constructor(e){super(),this.editor=e,this.key="shortcut",this.priority=50}destroy(){}match(){return!1}onKeyDown(e){var t,n,r,i=this.editor;M(e,T)&&C(i,i.selection)&&(t=m(i))&&(n=i.selection.anchor,t=t.path,n={anchor:n,focus:h.a.start(i,t)},r=h.a.string(i,n),r=mr[r.trim()])&&(h.i.select(i,n),h.i.delete(i),[n,r]=r.split("."),i.command.exec(n,{extraKey:r,path:t}),e.preventDefault())}}n(339),n(340);var vr=n(177);const gr={ref:{trs:[],widths:[],heights:[],element:{children:[]},size:{rows:-1,cols:-1},anchorCell:null,setSelection:()=>null},state:{selection:null}},xr=l.a.createContext(gr),fr=()=>{var e=l.a.useContext(xr);return{ref:e.ref,state:e.state}},Or=new WeakMap,yr=new WeakMap,kr=e=>{var t,n;const r=e.context,{ref:i,state:o}=fr(),{rowIndex:l,colIndex:a}=(m={rowIndex:null,colIndex:null},(t=r.element)&&t[wn]&&(n=(n=yr.get(t))&&Or.get(n),t=Or.get(t),m.rowIndex=Object(b.b)(n)?null:n,m.colIndex=Object(b.b)(t)?null:t),m),d=null!=(n=r.element[En])?n:1,p=null!=(t=r.element[Cn])?t:1;var m=Object(c.useMemo)((()=>{var e,t,n,r=o.selection;return!(!r||Object(b.b)(l)||Object(b.b)(a))&&(({start:r,end:t}=r),[r,e]=r,[t,n]=t,l>=r)&&l<=t&&a>=e&&a<=n}),[a,l,o.selection]);return 0!==d&&0!==p?Object(ee.jsxs)("td",{className:Object(s.a)("table-block-cell",m&&"is-selected"),...r.props.attributes,onMouseEnter:t=>{var n,r,o,s,c,h,u,m;e.editor.state.get(R)&&!e.readonly&&i.anchorCell&&!Object(b.b)(a)&&!Object(b.b)(l)&&p&&d&&([u,n,o,s]=i.anchorCell,m=l+p-1,r=a+d-1,o=u+o-1,s=n+s-1,c=Math.min(u,l,m,o),h=Math.min(n,a,r,s),u=Math.max(u,l,m,o),m=Math.max(n,a,r,s),i.setSelection({start:[c,h],end:[u,m]}),t.preventDefault(),t.stopPropagation())},onMouseDown:()=>{Object(b.b)(a)||Object(b.b)(l)||e.readonly||(i.anchorCell=[l,a,p,d])},colSpan:d,rowSpan:p,children:[e.children,!e.readonly&&Object(ee.jsx)("div",{contentEditable:!1,onMouseDown:t=>{t.stopPropagation(),document.body.style.cursor="col-resize";var n=k(e.editor,r.element),o=n&&N(e.editor,n,1);const s=n&&N(e.editor,n,2);if(o&&o.node[kn]&&s&&s.node[yn]&&!Object(b.b)(a)){const r=(n=a)+d-1;if(o=i.size.cols,!(r<0||r>o)){const o=i.widths,c=o[n]||Mn,l=t.clientX,a=Object(vr.a)((t=>{var n=t.clientX-l;if(0!=n){n=Math.max(c+n,Mn);const i=[...o];i[r]=n,u.a.withoutSaving(e.editor,(()=>{h.i.setNodes(e.editor,{[Nn]:i},{at:s.path})})),t.stopPropagation()}}),16),d=t=>{t=t.clientX-l,t=Math.max(c+t,Mn);var n=[...o];n[r]=t,t={type:"set_node",path:s.path,properties:{[Nn]:[...o]},newProperties:{[Nn]:[...n]}};e.editor.history.undos.push([t]),document.body.style.cursor="",document.removeEventListener(K,a),document.removeEventListener(U,d)};document.addEventListener(K,a),document.addEventListener(U,d)}}},className:"table-cell-resize"})]}):null},wr=e=>{const t=e.editor,{widths:n,element:r,size:i}=e.provider,[o,a]=Object(c.useState)((()=>Array(n.length).fill(!1))),d=Object(c.useRef)(-1),u=Object(ee.jsxs)("div",{onClick:e=>e.stopPropagation(),onMouseDown:e=>e.preventDefault(),children:[Object(ee.jsx)(ze.a,{type:"text",onClick:()=>{if(!(d.current<0)){const o=d.current+1,s=k(t,r);if(s){const c=[...n];c.splice(o,0,Mn),t.track.batch((()=>{r.children.forEach(((e,n)=>{var r=s.concat([n,o]);n=((e,n)=>{var r=n,o=s.concat([e,r]),c=(r=0<=r&&h.a.node(t,o),o=n+1,s.concat([e,o]));o=o<i.cols&&h.a.node(t,c);if(!(r&&o&&r[0]&&o[0]))return 1;if(c=r[0],r=o[0],c=null!=(o=c[En])?o:1,r=null!=(o=r[En])?o:1,1===c||1===r)return 1;for(let i=n;0<=i;i--){var l=s.concat([e,i]),a=h.a.node(t,l);if(a&&a[0]&&!((a=null!=(a=a[0][En])?a:1)<=1)){h.i.setNodes(t,{[En]:a+1},{at:l});break}}return 0})(n,o-1);h.i.insertNodes(t,{[wn]:!0,[En]:n,children:[{children:[{text:""}]}]},{at:r})})),h.i.setNodes(e.editor,{[Nn]:c},{at:s})})),d.current=-1,a(Array(n.length).fill(!1))}}},icon:Object(ee.jsx)(Pn.a,{}),size:"small"}),Object(ee.jsx)(ze.a,{type:"text",onClick:()=>{if(!(d.current<0)){const o=d.current,s=k(t,r);if(s){const c=[...n];c.splice(o,1),t.track.batch((()=>{r.children.forEach(((e,n)=>{var r=s.concat([n,o]);{var c=n,l=(n=o,r);const e=h.a.node(t,l);if(e&&e[0]&&1!==(l=null!=(l=e[0][En])?l:1)){if(0===l)for(let e=n-1;0<=e;e--){const n=s.concat([c,e]),r=h.a.node(t,n);if(r&&r[0]){var a=null!=(a=r[0][En])?a:1;if(!(a<=1)){h.i.setNodes(t,{[En]:a-1},{at:n});break}}}1<l&&((n+=1)>=i.cols||(n=s.concat([c,n]),h.i.setNodes(t,{[En]:l-1,[Cn]:1},{at:n})))}}h.i.delete(t,{at:r})})),h.i.setNodes(e.editor,{[Nn]:c},{at:s})})),d.current=-1,a(Array(n.length).fill(!1))}}},icon:Object(ee.jsx)(Qn.a,{}),size:"small",disabled:1===n.length})]});return Object(ee.jsx)("div",{contentEditable:!1,className:Object(s.a)("col-op-toolbar",(e.isFocusIn||o.some(Boolean))&&"active"),onClick:e=>e.stopPropagation(),onMouseDown:e=>e.preventDefault(),children:n.map(((t,n)=>Object(ee.jsx)(l.a.Fragment,{children:Object(ee.jsx)(Ve.b,{popupVisible:o[n],onVisibleChange:e=>{a((t=>(e||(d.current=-1),(t=[...t])[n]=e,t)))},className:"table-toolbar-trigger",popup:()=>u,popupAlign:{top:3},trigger:"click",position:"top",children:Object(ee.jsx)("div",{className:Object(s.a)("col-toolbar-block",d.current===n&&"active"),style:{width:n?t:t+1},onClick:()=>{return t=n,d.current=t,h.i.deselect(e.editor),void e.provider.setSelection(null);var t}})})},n)))})},Nr=e=>e.readonly?Object(ee.jsx)(c.Fragment,{children:e.children}):Object(ee.jsx)(Ve.b,{...e,children:e.children}),Er=Object(ee.jsx)("svg",{className:"arco-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",children:Object(ee.jsx)("path",{d:"M362.375529 613.556706a29.033412 29.033412 0 0 1-20.720941-8.613647l-0.963764-1.024a33.611294 33.611294 0 0 1-0.90353-45.116235l45.296941-47.706353h-224.677647V445.620706h224.195765l-44.393412-46.742588a33.611294 33.611294 0 0 1-0.903529-45.056l0.903529-1.084236a29.274353 29.274353 0 0 1 42.405647-1.084235l120.591059 126.976-119.145412 125.289412a28.912941 28.912941 0 0 1-21.684706 9.637647m340.931765 0a29.033412 29.033412 0 0 1-20.781176-8.613647L561.995294 478.027294l119.024941-125.289412a29.274353 29.274353 0 0 1 42.405647-1.084235l0.90353 1.084235a33.310118 33.310118 0 0 1 0.963764 44.754824l-45.357176 47.706353h224.256v65.897412h-224.075294l44.333176 46.742588a33.129412 33.129412 0 0 1 0.963765 44.634353l-0.963765 1.084235v0.481882a27.587765 27.587765 0 0 1-21.202823 9.517177m-579.102118 358.821647c-41.441882-3.553882-73.246118-39.152941-73.246117-83.727059V93.364706C50.898824 46.381176 86.136471 9.216 131.011765 9.216h267.986823c44.875294 0 80.112941 36.984471 80.112941 84.208941V177.694118h-62.644705V93.424941a19.456 19.456 0 0 0-4.818824-13.191529 18.672941 18.672941 0 0 0-12.528941-5.662118H130.951529a18.010353 18.010353 0 0 0-12.468705 5.541647 17.106824 17.106824 0 0 0-4.818824 12.769883v794.563764c0 11.685647 6.264471 18.251294 17.287529 18.251294h268.047059a18.010353 18.010353 0 0 0 12.468706-5.541647 17.106824 17.106824 0 0 0 4.818824-12.649411v-84.208942h62.223058v84.148706c0 47.224471-35.237647 84.208941-80.112941 84.208941H124.084706l0.12047 0.722824z m542.479059 0.481882c-44.815059 0-80.052706-36.984471-80.052706-84.208941v-84.208941h62.644706v84.208941c0 11.625412 6.264471 18.251294 17.287529 18.251294h268.649412a19.937882 19.937882 0 0 0 17.28753-18.251294V93.906824c0-11.625412-6.264471-18.251294-17.28753-18.251295h-268.528941a19.937882 19.937882 0 0 0-17.287529 18.251295V180.705882H586.691765V93.967059c0-47.224471 35.237647-84.208941 80.112941-84.208941h267.986823c44.875294 0 80.112941 36.984471 80.112942 84.208941v794.74447c0 47.224471-35.237647 84.208941-80.112942 84.208942h-268.167529z"})}),Cr=Object(ee.jsxs)("svg",{className:"arco-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",children:[Object(ee.jsx)("path",{d:"M111.559111 981.105778c-42.496 0-75.889778-36.010667-75.889778-82.090667V816.924444h59.392v82.090667c0 11.377778 5.916444 17.806222 16.384 17.806222h254.577778a19.228444 19.228444 0 0 0 16.440889-17.806222V124.074667c0-11.377778-5.916444-17.749333-16.440889-17.749334H111.559111a19.228444 19.228444 0 0 0-16.384 17.749334V208.782222H35.783111V124.074667c0-46.023111 33.393778-82.090667 75.889778-82.090667h254.008889c42.552889 0 75.946667 36.067556 75.946666 82.090667v774.940444c0 46.08-33.393778 82.090667-75.946666 82.090667H111.559111z"}),Object(ee.jsx)("path",{d:"M146.261333 630.784a27.136 27.136 0 0 1-19.626666-8.362667L12.288 498.631111 125.155556 376.433778a27.306667 27.306667 0 0 1 40.163555-1.024l0.910222 1.024a32.995556 32.995556 0 0 1 0.910223 43.633778l-42.951112 46.535111h212.48v64.284444H124.302222l42.097778 45.568a32.995556 32.995556 0 0 1 0.853333 43.52l-0.910222 1.080889v0.398222a25.827556 25.827556 0 0 1-20.081778 9.329778M620.202667 980.650667c-39.253333-3.413333-69.404444-38.115556-69.404445-81.635556V123.619556c0-45.966222 33.336889-82.090667 75.832889-82.090667h254.065778c42.496 0 75.889778 36.067556 75.889778 82.090667v82.090666H897.137778V123.619556a19.342222 19.342222 0 0 0-4.551111-12.856889 17.464889 17.464889 0 0 0-11.832889-5.518223h-254.179556a16.952889 16.952889 0 0 0-16.384 17.806223v774.826666c0 11.377778 5.916444 17.749333 16.384 17.749334h254.065778a16.952889 16.952889 0 0 0 16.384-17.806223V815.786667h58.936889v82.147555c0 46.023111-33.393778 82.090667-75.889778 82.090667H620.088889l0.113778 0.682667z"}),Object(ee.jsx)("path",{d:"M845.937778 630.784a27.136 27.136 0 0 1-19.626667-8.362667l-0.910222-1.080889a33.450667 33.450667 0 0 1-0.853333-43.975111l42.951111-46.478222h-212.935111V467.057778h212.48l-42.097778-45.624889a33.450667 33.450667 0 0 1-0.853334-43.975111l0.910223-1.024a27.306667 27.306667 0 0 1 40.163555-1.024l114.289778 123.790222-112.981333 122.140444a27.022222 27.022222 0 0 1-20.48 9.443556"})]}),Mr=e=>{const{editor:t,provider:n,sel:r}=e,{element:i,widths:o}=n,[s,l]=r.start,[a,d]=r.end;var{isMergeAble:e,isSplitAble:u}=Object(c.useMemo)((()=>{var e,n=k(t,i);return n&&(n=n.concat(s,l),n=h.a.node(t,n))&&n[0]?(e=null!=(e=(n=n[0])[Cn])?e:1,n=null!=(n=n[En])?n:1,s+e-1===a&&l+n-1===d?1!==e||1!==n?{isMergeAble:!1,isSplitAble:!0}:{isMergeAble:!1,isSplitAble:!1}:{isMergeAble:!0,isSplitAble:!1}):{isMergeAble:!1,isSplitAble:!1}}),[t,i,d,a,l,s]);const p=Object(ee.jsxs)("div",{onClick:e=>e.stopPropagation(),onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},children:[Object(ee.jsx)(ze.a,{type:"text",onClick:()=>{const e=k(t,i);e&&(t.track.batch((()=>{var n,r=a-s+1,i=d-l+1;for(let o=s;o<=a;o++)for(let c=l;c<=d;c++)o===s&&c===l?(n=e.concat(o,c),h.i.setNodes(t,{[Cn]:r,[En]:i},{at:n})):(n=e.concat(o,c),h.i.setNodes(t,{[Cn]:0,[En]:0},{at:n}))})),n.setSelection(null))},icon:Er,size:"small",disabled:!e}),Object(ee.jsx)(ze.a,{type:"text",onClick:()=>{const e=k(t,i);e&&(t.track.batch((()=>{for(let r=s;r<=a;r++)for(let i=l;i<=d;i++){var n=e.concat(r,i);h.i.setNodes(t,{[Cn]:1,[En]:1},{at:n})}})),n.setSelection(null))},icon:Cr,size:"small",disabled:!u})]});var{left:e,width:u}=Object(c.useMemo)((()=>{var e=r.start[1],t=r.end[1];return{left:o.slice(0,e).reduce(((e,t)=>e+t),0),width:o.slice(e,t+1).reduce(((e,t)=>e+t),0)}}),[r.end,r.start,o]);return Object(ee.jsx)(Nr,{className:"table-toolbar-trigger",popupVisible:!0,popup:()=>p,position:"top",popupAlign:{top:-2},children:Object(ee.jsx)("div",{contentEditable:!1,className:"merge-toolbar-container",style:{width:u,left:e}})})},Sr=e=>{const{editor:t,heights:n,provider:r}=e,{element:i,size:o}=r,[a,d]=Object(c.useState)((()=>Array(n.length).fill(!1))),u=Object(c.useRef)(-1),p=Object(ee.jsxs)("div",{onClick:e=>e.stopPropagation(),onMouseDown:e=>e.preventDefault(),children:[Object(ee.jsx)(ze.a,{type:"text",onClick:()=>{if(!(u.current<0)){const r=k(t,i);if(r){const i=u.current;var e=u.current+1;const s=r.concat([e]);t.track.batch((()=>{var e=Array.from({length:o.cols},((e,n)=>{var s=i,c=r.concat([s,n]),l=(s=0<=s&&h.a.node(t,c),c=i+1,r.concat([c,n]));c=c<o.rows&&h.a.node(t,l);if(!(s&&c&&s[0]&&c[0]))return 1;if(l=s[0],s=c[0],l=null!=(c=l[Cn])?c:1,s=null!=(c=s[Cn])?c:1,1===l||1===s)return 1;for(let o=i;0<=o;o--){var a=r.concat([o,n]),d=h.a.node(t,a);if(d&&d[0]&&!((d=null!=(d=d[0][Cn])?d:1)<=1)){h.i.setNodes(t,{[Cn]:d+1},{at:a});break}}return 0}));h.i.insertNodes(t,{[kn]:!0,children:e.map((e=>({[wn]:!0,[Cn]:e,children:[{children:[{text:""}]}]})))},{at:s})})),u.current=-1,d(Array(n.length).fill(!1))}}},icon:Object(ee.jsx)(Pn.a,{}),size:"small"}),Object(ee.jsx)(ze.a,{type:"text",onClick:()=>{if(!(u.current<0)){const e=k(t,i);if(e){const r=u.current,i=e.concat([r]);t.track.batch((()=>{for(let a=0;a<o.cols;a++){var n=i.concat([a]);if(!(n=h.a.node(t,n))||!n[0])return;if(1!==(n=null!=(n=n[0][Cn])?n:1)){if(0===n)for(let n=r-1;0<=n;n--){var s=e.concat([n,a]),c=h.a.node(t,s);if(c&&c[0]&&!((c=null!=(c=c[0][Cn])?c:1)<=1)){h.i.setNodes(t,{[Cn]:c-1},{at:s});break}}if(1<n){var l=r+1;if(!(l>=o.rows)){const r=e.concat([l,a]);h.i.setNodes(t,{[Cn]:n-1,[En]:1},{at:r})}}}}h.i.delete(t,{at:i})})),u.current=-1,d(Array(n.length).fill(!1))}}},icon:Object(ee.jsx)(Qn.a,{}),size:"small",disabled:1===n.length})]});return n.length?Object(ee.jsx)("div",{contentEditable:!1,className:Object(s.a)("row-op-toolbar",(e.isFocusIn||a.some(Boolean))&&"active"),onClick:e=>e.stopPropagation(),onMouseDown:e=>e.preventDefault(),children:n.map(((t,n)=>Object(ee.jsx)(l.a.Fragment,{children:Object(ee.jsx)(Ve.b,{popupVisible:a[n],onVisibleChange:e=>{d((t=>(e||(u.current=-1),(t=[...t])[n]=e,t)))},className:"table-toolbar-trigger",popup:()=>p,popupAlign:{left:3},trigger:"click",position:"left",children:Object(ee.jsx)("div",{className:Object(s.a)("row-toolbar-block",u.current===n&&"active"),style:{height:n?t:t+2},onClick:()=>{return t=n,u.current=t,h.i.deselect(e.editor),void e.provider.setSelection(null);var t}})})},n)))}):null},Lr=e=>{const t=e.context;var n,r=Object(p.e)();const i=Object(c.useRef)(null),o=(n=t.element,{size:Object(c.useMemo)((()=>{const e=n;var t=e.children||[],r=e.children.length;let i=0;return t.forEach(((t,n)=>{yr.set(t,e),Or.set(t,n);var r=t.children||[];0===n&&(i=r.length),r.forEach(((e,n)=>{yr.set(e,t),Or.set(e,n)}))})),{rows:r,cols:i}}),[n])}).size,[s,a]=Object(c.useState)([]),[d,u]=Object(c.useState)(null),[b,m]=Object(c.useState)(!1);var j=Object(c.useMemo)((()=>{var e=t.element[Nn];return e||(e=o.cols,Array(e).fill(Mn))}),[t.element,o.cols]);const v=((e,t)=>{const n=Object(c.useMemo)((()=>({...gr.ref})),[]);return Object.assign(n,e),{provider:Object(c.useMemo)((()=>({ref:n,state:t})),[t.selection])}})({size:o,widths:j,heights:s,element:t.element,setSelection:t=>{h.i.deselect(e.editor),u(t)}},{selection:d}).provider,g=(Object(c.useEffect)((()=>{const t=i.current;if(t&&!e.readonly){var n=()=>{var e=t.querySelector("tbody");if(e){e=Array.from(e.children).filter((e=>e instanceof HTMLTableRowElement));const t=v.ref;t.trs.length=e.length,t.heights.length=e.length,e.forEach(((e,n)=>{var r;e&&(r=e.getBoundingClientRect().height,t.trs[n]=e,t.heights[n]=r)})),a([...t.heights])}};n();const e=((e,t)=>{var n=e.getBoundingClientRect();let r=n.width,i=n.height;if(window.ResizeObserver){const n=new ResizeObserver((e=>{var n,[e]=e;e&&(({width:e,height:n}=e.contentRect),e===r&&n===i||(t({width:r,height:i},{width:e,height:n}),r=e,i=n))}));return n.observe(e),()=>{n.disconnect()}}{e.style.position="relative";const n=document.createElement("iframe");return n.setAttribute("src","//about:blank"),n.setAttribute("frameborder","0"),n.setAttribute("contenteditable","false"),n.setAttribute("style",["position: absolute","top: 0","left: 0","right: 0","bottom: 0","opacity: 0","width: 100%","height: 100%","border: none","z-index: -999999","user-select: none","visibility: hidden","pointer-events: none","translate(-999999px, -999999px)"].join(";")),n.contentWindow&&(n.contentWindow.onresize=()=>{var{clientWidth:n,clientHeight:o}=e;n===r&&o===i||(t({width:r,height:i},{width:n,height:o}),r=n,i=o)}),e.appendChild(n),()=>{e.removeChild(n)}}})(t,n);return()=>{e()}}}),[v.ref,e.readonly]),Object(jt.a)((e=>{var{previous:e,current:t}=e;!e&&t&&d&&(u(null),v.ref.anchorCell=null)})));return Object(c.useEffect)((()=>{e.onMount({onEditorSelectionChange:g});const t=()=>m(!1),n=()=>m(!0);return document.addEventListener(V,n),document.addEventListener(U,t),()=>{e.onUnMount({onEditorSelectionChange:g}),document.removeEventListener(V,n),document.removeEventListener(U,t)}}),[g,e.onMount,e.onUnMount]),Object(ee.jsxs)("div",{className:"table-block-wrapper",ref:i,children:[!e.readonly&&0<s.length&&Object(ee.jsx)(Sr,{isFocusIn:r||!!d,editor:e.editor,provider:{...v.ref},heights:s}),!e.readonly&&d&&!b&&Object(ee.jsx)(Mr,{sel:d,editor:e.editor,provider:{...v.ref}}),Object(ee.jsxs)("div",{className:"table-block-scroll",children:[!e.readonly&&Object(ee.jsx)(wr,{isFocusIn:r||!!d,editor:e.editor,provider:{...v.ref}}),Object(ee.jsxs)("table",{className:"table-block",children:[Object(ee.jsxs)("colgroup",{contentEditable:!1,children:[j.map(((e,t)=>Object(ee.jsx)(l.a.Fragment,{children:Object(ee.jsx)("col",{style:{width:e}})},t))),0<j.length&&Object(ee.jsx)("col",{style:{width:"100%"}})]}),Object(ee.jsx)(xr.Provider,{value:v,children:Object(ee.jsx)("tbody",{children:e.children})})]})]})]})},Br=e=>{const t=e.context,n=fr().ref,r=Or.get(t.element);return Object(ee.jsx)("tr",{className:"table-block-tr",...t.props.attributes,ref:e=>{Object(b.c)(t.props.attributes.ref)?t.props.attributes.ref(e):t.props.attributes.ref.current=e,Object(b.b)(r)||(n.trs[r]=e)},children:e.children})};class Dr extends fe{constructor(e,t){super(),this.editor=e,this.readonly=t,this.key=yn,this.views=void 0,this.onCommand=(e,t,n)=>{var{path:n,origin:r}=n;if(n=n&&w(e,n)){var[,r,i]=(null==r?void 0:r.split("."))||[],o=Number(r)||2,s=Number(i)||2,c=[];for(let e=0;e<o;e++){var l=[];for(let e=0;e<s;e++)l.push({[wn]:!0,children:[{children:[{text:""}]}]});c.push({[kn]:!0,children:l})}h.i.delete(e,{at:n,unit:"block"}),h.i.insertNodes(e,{table:!0,[Nn]:new Array(s).fill(Mn),children:c},{at:n,select:!0}),h.i.select(e,n.concat([0,0,0]))}},this.onTableMount=e=>{this.views.push(e)},this.onTableUnMount=e=>{-1!==(e=this.views.indexOf(e))&&this.views.splice(e,1)},this.onSelectionChange=e=>{this.views.forEach((t=>t.onEditorSelectionChange(e)))},this.views=[],e.event.on(X.SELECTION_CHANGE,this.onSelectionChange)}destroy(){this.views=[],this.editor.event.off(X.SELECTION_CHANGE,this.onSelectionChange)}match(e){return!!e.element[yn]||!!e.element[kn]||!!e.element[wn]}renderLine(e){var t;return e.element[yn]?Object(ee.jsx)(Lr,{onMount:this.onTableMount,onUnMount:this.onTableUnMount,editor:this.editor,readonly:this.readonly,context:e,children:e.children}):(t=e.props,e.element[kn]?(e.plain=!0,Object(ee.jsx)(Br,{context:e,children:t.children})):e.element[wn]?(e.plain=!0,Object(ee.jsx)(kr,{editor:this.editor,context:e,readonly:this.readonly,children:t.children})):e.children)}}n(341);var _r=n(389);function Ar(e,t){const n=new Set(t);return Object(b.e)(e)?Object.keys(e).reduce(((t,r)=>n.has(r)?t:{...t,[r]:e[r]}),{}):e.filter((e=>!n.has(e)))}hr=n(375),Gn=n(376),nr=n(377),Jn=n(378),zn=n(379),qn=n(380),ar=n(381),Fn=n(382),Pt=n(383),Un=n(384),ir=n(385),t=n(386);const Ir=Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(_r.a.Item,{children:Object(ee.jsx)(hr.a,{})},Ce),Object(ee.jsx)(_r.a.Item,{children:Object(ee.jsx)(Gn.a,{})},Ye),Object(ee.jsx)(_r.a.Item,{children:Object(ee.jsx)(nr.a,{})},Fe),Object(ee.jsx)(_r.a.Item,{children:Object(ee.jsx)(Jn.a,{})},qe),Object(ee.jsx)(_r.a.Item,{children:Object(ee.jsx)(zn.a,{})},Ze),Object(ee.jsx)(_r.a.Item,{children:Object(ee.jsx)(qn.a,{})},He),Object(ee.jsx)(_r.a.Item,{children:Object(ee.jsx)(ar.a,{})},wt),Object(ee.jsx)(_r.a.Item,{children:Object(ee.jsx)(Fn.a,{})},Ct),Object(ee.jsxs)(_r.a.SubMenu,{title:Object(ee.jsx)(Pt.a,{}),popup:!0,triggerProps:{trigger:"click",position:"bottom"},children:[Object(ee.jsx)(_r.a.Item,{children:Object(ee.jsx)("div",{className:"align-menu-center",children:Object(ee.jsx)(Pt.a,{})})},"".concat(pt,".left")),Object(ee.jsx)(_r.a.Item,{children:Object(ee.jsx)("div",{className:"align-menu-center",children:Object(ee.jsx)(Un.a,{})})},"".concat(pt,".center")),Object(ee.jsx)(_r.a.Item,{children:Object(ee.jsx)("div",{className:"align-menu-center",children:Object(ee.jsx)(ir.a,{})})},"".concat(pt,".right")),Object(ee.jsx)(_r.a.Item,{children:Object(ee.jsx)("div",{className:"align-menu-center",children:Object(ee.jsx)(t.a,{})})},"".concat(pt,".justify"))]},pt)]}),Pr=e=>(e=e.children,"object"==typeof document?a.a.createPortal(e,document.body):null),Tr=[He,wt],zr=[...Tr,Ct],Ur=e=>{const t=e.editor,n=Object(c.useRef)(!1),r=Object(c.useRef)(null),[i,o]=Object(c.useState)([]),s=Object(jt.a)((e=>{var n=r.current;n&&(p.b.isFocused(t)&&e?(o(Ar(Object.keys(h.a.marks(t)||[]),Tr)),(e=(e=window.getSelection())&&0<e.rangeCount?e.getRangeAt(0).getBoundingClientRect():null)&&(n.style.top="".concat(e.top+window.pageYOffset-40-10,"px"),n.style.left="".concat(e.left+window.pageXOffset-170+e.width/2,"px"))):((e=n).style.left="-1000px",e.style.top="-1000px"))})),l=(Object(c.useEffect)((()=>{const t=r.current;if(t&&!e.readonly){const e=()=>{n.current||(t.style.display="")},r=()=>{n.current||(t.style.display="none")},i=()=>{var e;n.current||(e=!!(e=window.getSelection())&&!e.isCollapsed,s(e))};return document.addEventListener(U,e),document.addEventListener(V,r),document.addEventListener(H,i),()=>{document.removeEventListener(U,e),document.removeEventListener(V,r),document.addEventListener(H,i)}}}),[t,s,e.readonly]),Object(jt.a)(((s,c)=>{var l,a,d,u,[s,p]=s.split("."),b=h.a.marks(t),m={left:0,top:0},j=r.current,v=(o((l=s,d=zr,v=-1<(a=i).indexOf(l),u=-1<d.indexOf(l),v?Ar(a,[l]):u?[...Ar(a,d),l]:[...a,l])),j&&(m.top=j.offsetTop+j.offsetHeight/2,m.left=j.offsetLeft+j.offsetWidth/2),e.editor.command.exec(s,{extraKey:p,event:c,position:m,marks:b}));v&&(n.current=!0,v.then((()=>n.current=!1)))})));var a=Object(c.useMemo)((()=>Object(ee.jsx)(_r.a,{className:"menu-toolbar-container",onClickMenuItem:l,onMouseUp:e=>e.stopPropagation(),onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},mode:"vertical",selectedKeys:i,children:Ir})),[l,i]);return e.readonly?null:Object(ee.jsx)(Pr,{children:Object(ee.jsx)("div",{ref:r,className:"hover-menu-container",children:a})})};var Kr=n(104);const Vr=[{children:[{text:"\u6587\u6863\u7f16\u8f91\u5668"}],heading:{id:"01f0de8f",type:"h1"},align:"center"},{children:[{text:"GitHub",link:{href:"https://github.com/WindrunnerMax/DocEditor",blank:!0}},{text:" \uff5c "},{text:"Editor DEMO",link:{href:"https://windrunnermax.github.io/DocEditor/",blank:!0}},{text:" \uff5c "},{text:"BLOG",link:{href:"https://github.com/WindrunnerMax/EveryDay/blob/master/Plugin/\u57fa\u4e8eslate\u6784\u5efa\u6587\u6863\u7f16\u8f91\u5668.md",blank:!0}}],align:"center"},{children:[{text:"\u57fa\u4e8e"},{text:"slate.js","inline-code":!0},{text:"\u6784\u5efa\u7684\u6587\u6863\u7f16\u8f91\u5668\uff0c\u6240\u6709\u529f\u80fd\u90fd\u662f\u57fa\u4e8e\u63d2\u4ef6\u5316\u5b9a\u4e49\u5b9e\u73b0\uff0c\u901a\u8fc7\u53f3\u4e0a\u89d2\u6309\u94ae\u5207\u6362\u7f16\u8f91\u6a21\u5f0f\u4e0e\u9884\u89c8\u6a21\u5f0f\uff0c\u6240\u89c1\u5373\u6240\u5f97\uff0c\u5f53\u524d\u9875\u9762\u4e5f\u5b9e\u73b0\u4e86\u4eae\u8272\u4e0e\u6697\u8272\u6a21\u5f0f\u7684\u9002\u914d\u3002"}]},{children:[{text:"\u884c\u5185\u5143\u7d20"}],heading:{type:"h2",id:"83ddface"}},{children:[{text:"\u652f\u6301"},{text:"\u52a0\u7c97",bold:!0},{text:"\u3001"},{text:"\u659c\u4f53",italic:!0},{text:"\u3001"},{text:"\u4e0b\u5212\u7ebf","under-line":!0},{text:"\u3001"},{text:"\u5220\u9664\u7ebf","strike-through":!0},{text:"\u3001"},{text:"\u884c\u5185\u4ee3\u7801\u5757","inline-code":!0},{text:"\u3001"},{text:"\u8d85\u94fe\u63a5",link:{href:"https://github.com/WindrunnerMax/DocEditor",blank:!0}},{text:"\u3001\u6587\u5b57\u5bf9\u9f50\u3001"},{text:"\u5b57\u53f7","font-base":{fontSize:13}},{text:"\u3001"},{text:"\u989c\u8272","font-base":{color:"rgb(var(--green-6))"}},{text:"\u3001"},{text:"\u80cc\u666f","font-base":{color:"var(--color-white)",background:"rgb(var(--blue-6))"}},{text:"\u3002"}],align:"center"},{children:[{text:"\u5757\u7ea7\u5143\u7d20"}],heading:{id:"4644b757",type:"h2"}},{children:[{text:"\u6807\u9898"}],heading:{type:"h3",id:"213e6703"}},{children:[{text:"\u652f\u6301"},{text:"h1~h3","inline-code":!0},{text:"\u7684\u4e09\u7ea7\u6807\u9898\uff0c\u5feb\u6377\u952e\u5524\u8d77 \u4e00\u7ea7\u6807\u9898"},{text:"# ","inline-code":!0},{text:"\u3001\u4e8c\u7ea7\u6807\u9898"},{text:"## ","inline-code":!0},{text:"\u3001\u4e09\u7ea7\u6807\u9898"},{text:"### ","inline-code":!0},{text:"\u3002"}]},{children:[{text:"\u5f15\u7528\u5757"}],heading:{type:"h3",id:"8426a51b"}},{"quote-block":!0,children:[{children:[{text:"\u652f\u6301\u5f15\u7528\u5757\u3002"}],"quote-block-item":!0},{"unordered-list":!0,"quote-block-item":!0,children:[{children:[{text:"\u53ef\u4ee5\u5d4c\u5957\u5176\u4ed6\u683c\u5f0f\u3002"}],"unordered-list-item":{level:1}},{"unordered-list-item":{level:1},children:[{text:"\u652f\u6301\u5feb\u6377\u952e"},{text:"> ","inline-code":!0},{text:"\u3002"}]}]}]},{children:[{text:"\u65e0\u5e8f\u5217\u8868"}],heading:{type:"h3",id:"a764a9a0"}},{children:[{text:"\u652f\u6301"},{text:"3","inline-code":!0},{text:"\u7ea7\u65e0\u5e8f\u5217\u8868\uff0c\u5feb\u6377\u952e\u5524\u8d77\u65e0\u5e8f\u5217\u8868"},{text:"* ","inline-code":!0},{text:"\u3001"},{text:"- ","inline-code":!0},{text:"\uff0c\u4e0b\u4e00\u7ea7\u65e0\u5e8f\u5217\u8868"},{text:"tab","inline-code":!0},{text:"\u3002"}]},{"unordered-list":!0,children:[{children:[{text:"\u4e00\u7ea7\u65e0\u5e8f\u5217\u8868\u3002"}],"unordered-list-item":{level:1}},{"unordered-list-item":{level:2},children:[{text:"\u4e8c\u7ea7\u65e0\u5e8f\u5217\u8868\u3002"}]},{"unordered-list-item":{level:3},children:[{text:"\u4e09\u7ea7\u65e0\u5e8f\u5217\u8868\u3002"}]}]},{children:[{text:"\u6709\u5e8f\u5217\u8868"}],heading:{type:"h3",id:"400aa7e1"}},{children:[{text:"\u652f\u6301"},{text:"3","inline-code":!0},{text:"\u7ea7\u6709\u5e8f\u5217\u8868\uff0c\u6709\u5e8f\u5217\u8868\u5404\u7ea7\u5355\u72ec\u8ba1\u6570\uff0c\u5feb\u6377\u952e\u5524\u8d77\u6709\u5e8f\u5217\u8868"},{text:"1. ","inline-code":!0},{text:"\uff0c\u4e0b\u4e00\u7ea7\u6709\u5e8f\u5217\u8868"},{text:"tab","inline-code":!0},{text:"\u3002"}]},{"ordered-list":!0,children:[{children:[{text:"\u4e00\u7ea7\u6709\u5e8f\u5217\u8868\u3002"}],"ordered-list-item":{start:1,level:1}},{"ordered-list-item":{level:2,start:1},children:[{text:"\u4e8c\u7ea7\u6709\u5e8f\u5217\u8868\u3002"}]},{"ordered-list-item":{level:3,start:1},children:[{text:"\u4e09\u7ea7\u6709\u5e8f\u5217\u8868\u3002"}]}]},{children:[{text:"\u5206\u5272\u7ebf"}],heading:{type:"h3",id:"5ab77ffb"}},{children:[{text:"\u652f\u6301\u5206\u5272\u7ebf\uff0c\u5feb\u6377\u952e"},{text:"--- ","inline-code":!0},{text:"\u3002"}]},{"dividing-line":!0,children:[{text:""}]},{children:[{text:"\u9ad8\u4eae\u5757"}],heading:{type:"h3",id:"af869b51"}},{"highlight-block":{border:"var(--arcoblue-6)",background:"var(--arcoblue-3)"},children:[{children:[{text:"\ud83c\udf30 "},{text:"\u4e3e\u4e2a\u6817\u5b50",bold:!0}]},{children:[{text:"\u652f\u6301\u9ad8\u4eae\u5757 \u53ef\u4ee5\u7528\u4e8e\u63d0\u793a\u6587\u6863\u4e2d\u7684\u91cd\u8981\u5185\u5bb9\u3002"}]}]},{"highlight-block":{background:"var(--green-3)",border:"var(--green-6)"},children:[{children:[{text:"\ud83c\udfdd \u53ef\u4ee5\u4e3a\u9ad8\u4eae\u5757\u66f4\u6362\u4e3b\u9898\u3002"}]}]},{children:[{text:"\u884c\u9ad8"}],heading:{type:"h3",id:"5ab77ffb"}},{children:[{text:"\u652f\u6301\u72ec\u7acb\u8bbe\u7f6e\u884c\u9ad8\u3002"}],"line-height":2},{children:[{text:"\u56fe\u7247"}],heading:{type:"h3",id:"aab55qq1"}},{children:[{text:"\u652f\u6301\u56fe\u7247\u4e0a\u4f20\u3002"}]},{children:[{text:""}],image:{src:"./favicon.ico",status:2,width:256,height:256},uuid:"aab55qq1"},{heading:{type:"h2",id:"82651426"},children:[{text:"\u4ee3\u7801\u5757"}]},{"code-block":!0,"code-block-config":{language:"JavaScript"},children:[{children:[{text:"// \u652f\u6301\u4ee3\u7801\u5757\u9ad8\u4eae"}]},{children:[{text:"const a = 1;"}]},{children:[{text:"const b = 2;"}]}]},{heading:{type:"h2",id:"82651426"},children:[{text:"\u6d41\u7a0b\u56fe"}]},{children:[{text:"\u652f\u6301\u6d41\u7a0b\u56fe\u5728\u7ebf\u7f16\u8f91\u3002"}]},{uuid:"c751cd0d5ea","flow-chart":{type:"xml",content:'<mxGraphModel dx="506" dy="742" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;sketch=0;" parent="1" source="2" target="3" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="2" value="Start" style="rounded=1;whiteSpace=wrap;html=1;sketch=0;glass=0;shadow=0;comic=1;" parent="1" vertex="1"><mxGeometry x="140" y="230" width="120" height="60" as="geometry"/></mxCell><mxCell id="3" value="End" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;glass=0;comic=1;" parent="1" vertex="1"><mxGeometry x="420" y="230" width="120" height="60" as="geometry"/></mxCell></root></mxGraphModel>'},children:[{text:""}]},{heading:{type:"h2",id:"82651426"},children:[{text:"React\u5b9e\u65f6\u9884\u89c8"}]},{children:[{text:"\u652f\u6301React\u7ec4\u4ef6\u5b9e\u65f6\u7f16\u8f91\u53ca\u9884\u89c8\u3002"}]},{"react-live":!0,children:[{children:[{text:"<Space size='large'>"}]},{children:[{text:"  <Button type='primary'>Primary</Button>"}]},{children:[{text:"  <Button type='secondary'>Secondary</Button>"}]},{children:[{text:"  <Button type='dashed'>Dashed</Button>"}]},{children:[{text:"  <Button type='outline'>Outline</Button>"}]},{children:[{text:"  <Button type='text'>Text</Button>"}]},{children:[{text:"</Space>"}]}]},{children:[{text:"\u8868\u683c"}],heading:{type:"h2",id:"xwGkjdiG"}},{children:[{text:"\u8868\u683c\u529f\u80fd\u5904\u4e8e"},{text:"WIP","inline-code":!0},{text:"\u72b6\u6001\uff0c\u8fd8\u5b58\u5728\u5927\u91cf\u4ea4\u4e92\u4e0e"},{text:"BUG","inline-code":!0},{text:"\u9700\u8981\u5904\u7406\u3002"}]},{table:!0,"table-col-widths":[199,292,224],children:[{"table-row":!0,children:[{"table-cell":!0,children:[{children:[{text:"\u8868\u683c"}],align:"center"}]},{"table-cell":!0,children:[{children:[{text:"\u8868\u683c\u53ef\u4ee5\u627f\u8f7d\u590d\u6742\u5185\u5bb9"}],align:"center"}],"cell-row-span":1,"cell-col-span":2},{"table-cell":!0,"cell-col-span":0,children:[{children:[{text:""}]}],"cell-row-span":0}]},{"table-row":!0,children:[{"table-cell":!0,children:[{children:[{"unordered-list-item":{level:1},children:[{text:"\u5bbd\u5ea6\u8c03\u6574"}]},{"unordered-list-item":{level:1},children:[{text:"\u5355\u5143\u683c\u5408\u5e76"}]}],"unordered-list":!0}]},{"table-cell":!0,children:[{children:[{text:"Blog"}],heading:{type:"h3",id:"qBjahwuG"}},{children:[{"quote-block-item":!0,children:[{text:"\u52e4\u5b66\u5982\u6625\u8d77\u4e4b\u82d7\uff0c\u4e0d\u89c1\u5176\u589e\uff0c\u65e5\u6709\u6240\u957f\uff1b"}]},{"quote-block-item":!0,children:[{text:"\u8f8d\u5b66\u5982\u78e8\u5200\u4e4b\u77f3\uff0c\u4e0d\u89c1\u5176\u635f\uff0c\u65e5\u6709\u6240\u4e8f\u3002"}]}],"quote-block":!0},{"code-block":!0,"code-block-config":{language:"JavaScript"},children:[{children:[{text:'console.log("Hello World");'}]}]}],"cell-row-span":2,"cell-col-span":1},{"table-cell":!0,"cell-col-span":1,children:[{"highlight-block":{background:"var(--purple-3)",border:"var(--purple-6)"},children:[{children:[{text:"\u91cd\u70b9\u4fe1\u606f"}],align:"center"}]}],"cell-row-span":1}]},{"table-row":!0,children:[{"table-cell":!0,"cell-row-span":1,children:[{children:[{"unordered-list-item":{level:1},children:[{text:"\u590d\u6742\u683c\u5f0f\u5d4c\u5957"}]},{"unordered-list-item":{level:1},children:[{text:"\u5355\u5143\u683c\u9009\u533a\u64cd\u4f5c"}]},{"unordered-list-item":{level:1},children:[{text:"\u884c\u5217\u64cd\u4f5c\u5de5\u5177\u680f"}]},{children:[{text:"\u6a21\u5757\u5316\u7ec4\u4ef6\u9002\u914d"}],"unordered-list-item":{level:1}}],"unordered-list":!0}]},{"table-cell":!0,"cell-row-span":0,children:[{children:[{text:""}]}],"cell-col-span":0},{"table-cell":!0,"cell-row-span":1,children:[{children:[{"ordered-list-item":{start:1,level:1},children:[{text:"\u6709\u5e8f\u5217\u8868"}]},{"ordered-list-item":{level:2,start:1},children:[{text:"\u5c42\u7ea7\u8c03\u6574"}]}],"ordered-list":!0},{children:[{"unordered-list-item":{level:1},children:[{text:"\u65e0\u5e8f\u5217\u8868"}]},{children:[{text:"\u5c42\u7ea7\u8c03\u6574"}],"unordered-list-item":{level:2}}],"unordered-list":!0}],"cell-col-span":1}]}]},{children:[{text:"\u5feb\u6377\u529f\u80fd"}],heading:{type:"h2",id:"8b4f0218"}},{heading:{type:"h3",id:"614d6a4c"},children:[{text:"\u5feb\u6377\u952e"}]},{children:[{text:"\u652f\u6301\u5feb\u6377\u952e: "}]},{"unordered-list":!0,children:[{children:[{text:"\u4e00\u7ea7\u6807\u9898"},{text:"# ","inline-code":!0},{text:"\u3001\u4e8c\u7ea7\u6807\u9898"},{text:"## ","inline-code":!0},{text:"\u3001\u4e09\u7ea7\u6807\u9898"},{text:"### ","inline-code":!0},{text:"\u3002"}],"unordered-list-item":{level:1}},{"unordered-list":!0,children:[{"unordered-list-item":{level:1},children:[{text:"\u5f15\u7528\u5757"},{text:"> ","inline-code":!0},{text:"\u3002"}]}]},{"unordered-list-item":{level:1},children:[{text:"\u591a\u7ea7\u65e0\u5e8f\u5217\u8868"},{text:"* ","inline-code":!0},{text:"\u3001"},{text:"- ","inline-code":!0},{text:"\uff0c\u4e0b\u7ea7\u65e0\u5e8f\u5217\u8868"},{text:"tab","inline-code":!0},{text:"\u3002"}]},{"unordered-list-item":{level:1},children:[{text:"\u591a\u7ea7\u6709\u5e8f\u5217\u8868"},{text:"1. ","inline-code":!0},{text:"\uff0c\u4e0b\u7ea7\u6709\u5e8f\u5217\u8868"},{text:"tab","inline-code":!0},{text:"\u3002"}]},{"unordered-list-item":{level:1},children:[{text:"\u5206\u5272\u7ebf"},{text:"--- ","inline-code":!0},{text:"\u3002"}]},{"unordered-list-item":{level:1},children:[{text:"\u64a4\u9500"},{text:"Ctrl + Z","inline-code":!0},{text:"\uff0c\u524d\u8fdb"},{text:"Ctrl + Shift + Z","inline-code":!0},{text:"\u3002"}]},{"unordered-list-item":{level:1},children:[{text:"\u7f29\u8fdb"},{text:"Tab","inline-code":!0},{text:"\u3002"}]}]},{children:[{text:"\u5de5\u5177\u680f"}],heading:{type:"h3",id:"0f8a5d9e"}},{children:[{text:"\u5de6\u4fa7\u5de5\u5177\u680f\u53ef\u4ee5\u5524\u8d77\u5feb\u6377\u64cd\u4f5c\uff0c\u9009\u4e2d\u6587\u5b57\u540e\u53ef\u4ee5\u5f39\u51fa\u9876\u90e8\u5de5\u5177\u680f\u3002"}]},{children:[{text:"\u5176\u4ed6"}],heading:{type:"h2",id:"3e92c207"}},{children:[{text:"\u540e\u7eed\u652f\u6301\u5b8c\u5584\u4e2d..."}]}],Hr={[It]:{void:!0,block:!0},"dividing-line":{void:!0,block:!0},"flow-chart":{void:!0,block:!0},"quote-block-item":{wrap:Se},"ordered-list-item":{wrap:et},"unordered-list-item":{wrap:ct},"highlight-block":{block:!0,instance:!0},"code-block":{block:!0,instance:!0},"react-live":{block:!0,instance:!0},[kn]:{wrap:yn},[wn]:{wrap:kn,instance:!0}},Gr=e=>{const t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Object(c.useMemo)((()=>{{var[e,n]=[...t],r=Object(u.b)(Object(p.f)(Object(h.j)()));const i=(e=new be(e,r)).with(r),o=(i.init=n,i.schema=e,i.reflex=new se(i),i.command=new A(i),i.logger=new Q($),i.state=new me(i),i.event=new q(i),i.clipboard=new _(i),i.plugin=new oe(i),i.track=new je(i),i.apply);return i.apply=e=>{"set_selection"===e.type?i.event.trigger(X.SELECTION_CHANGE,{previous:e.properties,current:e.newProperties}):i.event.trigger(X.CONTENT_CHANGE,{change:e}),o(e)},i.destroy=()=>{i.command.destroy(),i.event.destroy(),i.plugin.destroy(),i.track.destroy()},i}}),[]);return Object(c.useEffect)((()=>()=>{r.destroy()}),[]),r}(Hr,Vr),n=(Object(c.useMemo)((()=>{window.editor=t,window.Transforms=h.i,window.Editor=h.a,t.logger.set(Y),t.plugin.register(new ke,new Ee(t),new Me,new Be(t),new Re(t,e.readonly),new We,new Xe,new Je,new $e,new st(t),new at(t),new ut,new bt,new ft(t,e.readonly),new Nt,new Mt,new Ht(t,e.readonly),new Zt(t,e.readonly),new $t(t),new hn(t,e.readonly),new On(t),new br(t,e.readonly),new jr(t),new Dr(t,e.readonly))}),[t,e.readonly]),Object(d.a)(Object(Kr.a)((()=>{console.log("Text changes",t.children)}),500)));return Object(c.useEffect)((()=>(t.event.on(X.CONTENT_CHANGE,n),()=>{t.event.off(X.CONTENT_CHANGE,n)})),[t.event,n]),Object(ee.jsxs)(l.a.Fragment,{children:[Object(ee.jsx)(Ur,{readonly:e.readonly,editor:t}),Object(ee.jsx)(ge,{editor:t,readonly:e.readonly,placeholder:"Enter text ..."})]})};hr=n(352),Gn=n(353),nr=n(354);var Rr=n(395);const Fr="theme-index",Wr=window.matchMedia("(prefers-color-scheme: dark)"),qr=[Object(ee.jsx)(hr.a,{}),Object(ee.jsx)(Gn.a,{}),Object(ee.jsx)(nr.a,{})],Xr=e=>{e.matches?document.body.setAttribute("arco-theme","dark"):document.body.removeAttribute("arco-theme")},Yr=()=>{const[e,t]=Object(c.useState)(Rr.a.local.get(Fr)||0);return Object(c.useEffect)((()=>{switch(e){case 0:Wr.matches?document.body.setAttribute("arco-theme","dark"):document.body.removeAttribute("arco-theme"),Wr.onchange=Xr;break;case 1:Wr.onchange=null,document.body.removeAttribute("arco-theme");break;case 2:Wr.onchange=null,document.body.setAttribute("arco-theme","dark")}}),[e]),Object(ee.jsx)("div",{onClick:()=>{var n=(e+1)%qr.length;t(n),Rr.a.local.set(Fr,n)},children:qr[e]})},Jr=()=>{const[e,t]=Object(c.useState)(!1);return Object(ee.jsxs)("div",{className:"doc-editor-container",children:[Object(ee.jsxs)("div",{className:"header",children:[Object(ee.jsx)("span",{className:"left",children:"Slogan"}),Object(ee.jsxs)("div",{className:"right",children:[Object(ee.jsx)("div",{onClick:()=>t(!e),children:e?Object(ee.jsx)(r.a,{}):Object(ee.jsx)(i.a,{})}),Object(ee.jsx)(Yr,{}),Object(ee.jsx)("a",{className:"github",target:"_blank",href:"https://github.com/WindrunnerMax/DocEditor",children:Object(ee.jsx)(o.a,{})})]})]}),Object(ee.jsx)("div",{className:"gap"}),Object(ee.jsx)("div",{className:Object(s.a)("editor",e&&"render"),children:Object(ee.jsx)("div",{className:"slate-editor",children:Object(ee.jsx)(Gr,{readonly:e})})})]})};a.a.render(Object(ee.jsx)(Jr,{}),document.getElementById("root"))},71:function(e,t,n){e.exports={preview:"wrapper_preview__wkuMJ",resider:"wrapper_resider__390yi"}}},[[342,5,6]]]);